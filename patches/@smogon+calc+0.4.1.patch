diff --git a/node_modules/@smogon/calc/dist/data/production.min.js.gz b/node_modules/@smogon/calc/dist/data/production.min.js.gz
deleted file mode 100644
index ea0104c..0000000
Binary files a/node_modules/@smogon/calc/dist/data/production.min.js.gz and /dev/null differ
diff --git a/node_modules/@smogon/calc/dist/mechanics/gen78.js b/node_modules/@smogon/calc/dist/mechanics/gen78.js
index ea03367..149836c 100644
--- a/node_modules/@smogon/calc/dist/mechanics/gen78.js
+++ b/node_modules/@smogon/calc/dist/mechanics/gen78.js
@@ -84,7 +84,7 @@ function calculateSMSS(gen, attacker, defender, move, field) {
         desc.moveBP = move.bp;
         desc.moveType = move.type;
     }
-    else if (move.named('Nature Power')) {
+    else if (move.named('Nature Power', 'Terrain Pulse')) {
         move.type =
             field.hasTerrain('Electric') ? 'Electric'
                 : field.hasTerrain('Grassy') ? 'Grass'
@@ -102,14 +102,6 @@ function calculateSMSS(gen, attacker, defender, move, field) {
         else if (attacker.named('Morpeko-Hangry')) {
             move.type = 'Dark';
         }
-        else if (move.named('Terrain Pulse')) {
-            move.type =
-                field.hasTerrain('Electric') ? 'Electric'
-                    : field.hasTerrain('Grassy') ? 'Grass'
-                        : field.hasTerrain('Misty') ? 'Fairy'
-                            : field.hasTerrain('Psychic') ? 'Psychic'
-                                : 'Normal';
-        }
     }
     var isAerilate = false;
     var isPixilate = false;
@@ -117,7 +109,7 @@ function calculateSMSS(gen, attacker, defender, move, field) {
     var isGalvanize = false;
     var isLiquidVoice = false;
     var isNormalize = false;
-    var noTypeChange = move.named('Revelation Dance', 'Judgment', 'Nature Power', 'Techo Blast', 'Multi Attack', 'Natural Gift', 'Weather Ball');
+    var noTypeChange = move.named('Revelation Dance', 'Judgment', 'Nature Power', 'Techno Blast', 'Multi Attack', 'Natural Gift', 'Weather Ball', 'Terrain Pulse');
     if (!move.isZ && !noTypeChange) {
         var normal = move.hasType('Normal');
         if ((isAerilate = attacker.hasAbility('Aerilate') && normal)) {
@@ -199,7 +191,7 @@ function calculateSMSS(gen, attacker, defender, move, field) {
         (move.hasType('Ground') &&
             !field.isGravity && !move.named('Thousand Arrows') && defender.hasAbility('Levitate')) ||
         (move.flags.bullet && defender.hasAbility('Bulletproof')) ||
-        (move.flags.sound && defender.hasAbility('Soundproof')) ||
+        (move.flags.sound && !move.named('Clangorous Soul') && defender.hasAbility('Soundproof')) ||
         (move.priority > 0 && defender.hasAbility('Queenly Majesty', 'Dazzling'))) {
         desc.defenderAbility = defender.ability;
         return result;
@@ -278,13 +270,13 @@ function calculateSMSS(gen, attacker, defender, move, field) {
             desc.moveBP = basePower;
             break;
         case 'Expanding Force':
-            basePower = move.bp * ((util_2.isGrounded(attacker, field) && field.hasTerrain('Psychic')) ? 2 : 1);
-            move.target =
-                (util_2.isGrounded(attacker, field) && field.hasTerrain('Psychic')) ? 'allAdjacentFoes' : 'normal';
+            var isTerrainBoosted = util_2.isGrounded(attacker, field) && field.hasTerrain('Psychic');
+            basePower = move.bp * (isTerrainBoosted ? 1.5 : 1);
+            move.target = isTerrainBoosted ? 'allAdjacentFoes' : 'normal';
             desc.moveBP = basePower;
             break;
         case 'Misty Explosion':
-            basePower = move.bp * (field.hasTerrain('Misty') ? 2 : 1);
+            basePower = move.bp * (field.hasTerrain('Misty') ? 1.5 : 1);
             desc.moveBP = basePower;
             break;
         case 'Rising Voltage':
@@ -349,7 +341,7 @@ function calculateSMSS(gen, attacker, defender, move, field) {
             desc.moveBP = basePower;
             break;
         case 'Terrain Pulse':
-            basePower = field.terrain ? 100 : 50;
+            basePower = move.bp * (field.terrain ? 2 : 1);
             desc.moveBP = basePower;
             break;
         case 'Fling':
@@ -378,6 +370,10 @@ function calculateSMSS(gen, attacker, defender, move, field) {
             basePower = attacker.named('Greninja-Ash') && attacker.hasAbility('Battle Bond') ? 20 : 15;
             desc.moveBP = basePower;
             break;
+        case 'Triple Axel':
+            basePower = move.hits === 2 ? 30 : move.hits === 3 ? 40 : 20;
+            desc.moveBP = basePower;
+            break;
         case 'Lash Out':
             basePower = move.bp * (util_2.countBoosts(gen, attacker.boosts) < 0 ? 2 : 1);
             desc.moveBP = basePower;
@@ -434,6 +430,8 @@ function calculateSMSS(gen, attacker, defender, move, field) {
         bpMods.push(0x14CD);
         desc.isBattery = true;
     }
+    var analyticBoost = attacker.hasAbility('Analytic') &&
+        (turnOrder !== 'first' || field.defenderSide.isSwitching === 'out');
     if (attacker.hasAbility('Sheer Force') && move.secondaries && !move.isMax) {
         bpMods.push(0x14cd);
         desc.attackerAbility = attacker.ability;
@@ -445,7 +443,7 @@ function calculateSMSS(gen, attacker, defender, move, field) {
         desc.attackerAbility = attacker.ability;
         desc.weather = field.weather;
     }
-    else if (attacker.hasAbility('Analytic') && turnOrder !== 'first') {
+    else if (analyticBoost) {
         bpMods.push(0x14cd);
         desc.attackerAbility = attacker.ability;
     }
@@ -738,17 +736,21 @@ function calculateSMSS(gen, attacker, defender, move, field) {
     if (attacker.hasAbility('Parental Bond (Child)')) {
         baseDamage = util_2.pokeRound(util_2.OF32(baseDamage * 0x400) / 0x1000);
     }
-    if ((field.hasWeather('Sun', 'Harsh Sunshine') && move.hasType('Fire')) ||
+    var noWeatherBoost = defender.hasItem('Utility Umbrella');
+    if (!noWeatherBoost && (field.hasWeather('Sun', 'Harsh Sunshine') &&
+        move.hasType('Fire')) ||
         (field.hasWeather('Rain', 'Heavy Rain') && move.hasType('Water'))) {
         baseDamage = util_2.pokeRound(util_2.OF32(baseDamage * 0x1800) / 0x1000);
         desc.weather = field.weather;
     }
-    else if ((field.hasWeather('Sun') && move.hasType('Water')) ||
+    else if (!noWeatherBoost &&
+        (field.hasWeather('Sun') && move.hasType('Water')) ||
         (field.hasWeather('Rain') && move.hasType('Fire'))) {
         baseDamage = util_2.pokeRound(util_2.OF32(baseDamage * 0x800) / 0x1000);
         desc.weather = field.weather;
     }
-    else if ((field.hasWeather('Harsh Sunshine') && move.hasType('Water')) ||
+    else if (!noWeatherBoost &&
+        (field.hasWeather('Harsh Sunshine') && move.hasType('Water')) ||
         (field.hasWeather('Heavy Rain') && move.hasType('Fire'))) {
         return result;
     }
diff --git a/node_modules/@smogon/calc/dist/mechanics/gen78.js.map b/node_modules/@smogon/calc/dist/mechanics/gen78.js.map
index e1f7bd8..b5ff0f0 100644
--- a/node_modules/@smogon/calc/dist/mechanics/gen78.js.map
+++ b/node_modules/@smogon/calc/dist/mechanics/gen78.js.map
@@ -1 +1 @@
-{"version":3,"file":"gen78.js","sourceRoot":"","sources":["../../src/mechanics/gen78.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"gen78.js","sourceRoot":"","sources":["../../src/mechanics/gen78.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@smogon/calc/dist/production.min.js b/node_modules/@smogon/calc/dist/production.min.js
index ddf1b5c..0075f51 100644
--- a/node_modules/@smogon/calc/dist/production.min.js
+++ b/node_modules/@smogon/calc/dist/production.min.js
@@ -1 +1 @@
-var _this=this;!function(){"use strict";var e={};e.toID=function(e){return(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")},e.error=function(e,t){if(e)throw new Error(t);console.log(t)},e.assignWithout=function(e,t,a){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!a.has(i)&&(e[i]=t[i])};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"},a=t.toString,i=t.hasOwnProperty;function r(e){return"function"===s(e)}function s(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?t[a.call(e)]||"object":typeof e}function o(e){if("object"!==s(e)||e.nodeType||function(e){return null!=e&&e===e.window}(e))return!1;try{if(e.constructor&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0}e.extend=function e(){for(var t,a,i,s,n,l,h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];var d=h[0]||{},u=1,y=!1,m=h.length;for("boolean"==typeof d&&(y=d,d=h[1]||{},u=2),"object"==typeof d||r(d)||(d={}),m===u&&(d=this,--u);u<m;u++)if(null!=(t=h[u]))for(a in t)i=d[a],d!==(s=t[a])&&(y&&s&&(o(s)||(n=Array.isArray(s)))?(n?(n=!1,l=i&&Array.isArray(i)?i:[]):l=i&&o(i)?i:{},d[a]=e(y,l,s)):void 0!==s&&(d[a]=s));return d};var n=e,l=["hp","atk","def","spa","spd","spe"],h=l,c=l,d=l,u=l,y=l,m=l;e.STATS=[[],["hp","atk","def","spc","spe"],l,h,c,d,u,y,m];var p=["Fighting","Flying","Poison","Ground","Rock","Bug","Ghost","Steel","Fire","Water","Grass","Electric","Psychic","Ice","Dragon","Dark"],f={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}};e.Stats=new(function(){function t(){}return t.prototype.displayStat=function(e){switch(e){case"hp":return"HP";case"atk":return"Atk";case"def":return"Def";case"spa":return"SpA";case"spd":return"SpD";case"spe":return"Spe";case"spc":return"Spc";default:throw new Error("unknown stat "+e)}},t.prototype.shortForm=function(e){switch(e){case"hp":return"hp";case"atk":return"at";case"def":return"df";case"spa":return"sa";case"spd":return"sd";case"spe":return"sp";case"spc":return"sl"}},t.prototype.getHPDV=function(e){return this.IVToDV(e.atk)%2*8+this.IVToDV(e.def)%2*4+this.IVToDV(e.spe)%2*2+this.IVToDV(e.spc)%2},t.prototype.IVToDV=function(e){return Math.floor(e/2)},t.prototype.DVToIV=function(e){return 2*e},t.prototype.DVsToIVs=function(t){var a,i={};for(a in t)i[a]=e.Stats.DVToIV(t[a]);return i},t.prototype.calcStat=function(e,t,a,i,r,s,o){if(e.num<1||e.num>8)throw new Error("Invalid generation "+e.num);return e.num<3?this.calcStatRBY(t,a,i,s):this.calcStatADV(e.natures,t,a,i,r,s,o)},t.prototype.calcStatADV=function(e,t,a,i,r,s,o){if("hp"===t)return 1===a?a:Math.floor((2*a+i+Math.floor(r/4))*s/100)+s+10;var l=[void 0,void 0];if(o){var h=e.get(n.toID(o));l=[null==h?void 0:h.plus,null==h?void 0:h.minus]}var c=l[0]===t&&l[1]===t?1:l[0]===t?1.1:l[1]===t?.9:1;return Math.floor((Math.floor((2*a+i+Math.floor(r/4))*s/100)+5)*c)},t.prototype.calcStatRBY=function(e,t,a,i){return this.calcStatRBYFromDV(e,t,this.IVToDV(a),i)},t.prototype.calcStatRBYFromDV=function(e,t,a,i){return"hp"===e?Math.floor((2*(t+a)+63)*i/100)+i+10:Math.floor((2*(t+a)+63)*i/100)+5},t.prototype.getHiddenPowerIVs=function(t,a){var i=f[a];if(i)return 2===t.num?e.Stats.DVsToIVs(i.dvs):i.ivs},t.prototype.getHiddenPower=function(e,t){var a=function(e,t){return void 0===t&&(t=0),t?(e>>>0)%Math.pow(2,t):e>>>0};if(e.num<=2){var i=a(t.atk/2),r=a(t.def/2),s=a(t.spe/2),o=a(t.spa/2);return{type:p[i%4*4+r%4],power:a((5*((o>>3)+2*(s>>3)+4*(r>>3)+8*(i>>3))+o%4)/2+31)}}var n=0,l=0,h=1;for(var c in{hp:31,atk:31,def:31,spe:31,spa:31,spd:31})n+=h*(t[c]%2),l+=h*(a(t[c]/2)%2),h*=2;return{type:p[a(15*n/63)],power:e.num&&e.num<6?a(40*l/63)+30:60}},t}());var b=e,g=_this&&_this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],i=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S=["hp","atk","def","spa","spd","spe"],v=new Set(["spc"]),k=function(){function e(t,a,i){var r,s,o;void 0===i&&(i={}),this.species=n.extend(!0,{},t.species.get(n.toID(a)),i.overrides),this.gen=t,this.name=i.name||a,this.types=this.species.types,this.weightkg=this.species.weightkg,this.level=i.level||100,this.gender=i.gender||this.species.gender||"M",this.ability=i.ability||(null===(o=this.species.abilities)||void 0===o?void 0:o[0])||void 0,this.abilityOn=!!i.abilityOn,this.isDynamaxed=!!i.isDynamaxed,this.item=i.item,this.nature=i.nature||"Serious",this.ivs=e.withDefault(t,i.ivs,31),this.evs=e.withDefault(t,i.evs,t.num>=3?0:252),this.boosts=e.withDefault(t,i.boosts,0,!1),t.num<3&&(this.ivs.hp=b.Stats.DVToIV(b.Stats.getHPDV({atk:this.ivs.atk,def:this.ivs.def,spe:this.ivs.spe,spc:this.ivs.spa}))),this.rawStats={},this.stats={};try{for(var l=g(S),h=l.next();!h.done;h=l.next()){var c=h.value,d=this.calcStat(t,c);this.rawStats[c]=d,this.stats[c]=d}}catch(e){r={error:e}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}var u=i.curHP||i.originalCurHP;this.originalCurHP=u&&u<=this.rawStats.hp?u:this.rawStats.hp,this.status=i.status||"",this.toxicCounter=i.toxicCounter||0,this.moves=i.moves||[]}return e.prototype.maxHP=function(e){return void 0===e&&(e=!1),!e&&this.isDynamaxed&&1!==this.species.baseStats.hp?2*this.rawStats.hp:this.rawStats.hp},e.prototype.curHP=function(e){return void 0===e&&(e=!1),!e&&this.isDynamaxed&&1!==this.species.baseStats.hp?2*this.originalCurHP:this.originalCurHP},e.prototype.hasAbility=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.ability||!e.includes(this.ability))},e.prototype.hasItem=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.item||!e.includes(this.item))},e.prototype.hasStatus=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.status||!e.includes(this.status))},e.prototype.hasType=function(){for(var e,t,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{for(var r=g(a),s=r.next();!s.done;s=r.next()){var o=s.value;if(this.types.includes(o))return!0}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!1},e.prototype.named=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.name)},e.prototype.clone=function(){return new e(this.gen,this.name,{level:this.level,ability:this.ability,abilityOn:this.abilityOn,isDynamaxed:this.isDynamaxed,item:this.item,gender:this.gender,nature:this.nature,ivs:n.extend(!0,{},this.ivs),evs:n.extend(!0,{},this.evs),boosts:n.extend(!0,{},this.boosts),originalCurHP:this.originalCurHP,status:this.status,toxicCounter:this.toxicCounter,moves:this.moves.slice(),overrides:this.species})},e.prototype.calcStat=function(e,t){return b.Stats.calcStat(e,t,this.species.baseStats[t],this.ivs[t],this.evs[t],this.level,this.nature)},e.getForme=function(e,t,a,i){var r=e.species.get(n.toID(t));if(!r||!r.otherFormes)return t;var s=0;return a&&(a.includes("ite")&&!a.includes("ite Y")||"Groudon"===t&&"Red Orb"===a||"Kyogre"===t&&"Blue Orb"===a)||i&&"Meloetta"===t&&"Relic Song"===i||"Rayquaza"===t&&"Dragon Ascent"===i?s=1:(null==a?void 0:a.includes("ite Y"))&&(s=2),s?r.otherFormes[s-1]:r.name},e.withDefault=function(e,t,a,i){void 0===i&&(i=!0);var r={};if(t&&(n.assignWithout(r,t,v),t.spc&&(r.spa=t.spc,r.spd=t.spc),i&&e.num<=2&&t.spa!==t.spd))throw new Error("Special Attack and Special Defense must match before Gen 3");return Object.assign({hp:a,atk:a,def:a,spa:a,spd:a,spe:a},r)},e}();e.Pokemon=k;var A=_this&&_this.__read||function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var i,r,s=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return o};e.__esModule=!0;var P=function(){function e(e){void 0===e&&(e={}),this.gameType=e.gameType||"Singles",this.terrain=e.terrain,this.weather=e.weather,this.isGravity=!!e.isGravity,this.attackerSide=new M(e.attackerSide||{}),this.defenderSide=new M(e.defenderSide||{})}return e.prototype.hasWeather=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.weather||!e.includes(this.weather))},e.prototype.hasTerrain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.terrain||!e.includes(this.terrain))},e.prototype.swap=function(){var e;return e=A([this.defenderSide,this.attackerSide],2),this.attackerSide=e[0],this.defenderSide=e[1],this},e.prototype.clone=function(){return new e({gameType:this.gameType,weather:this.weather,terrain:this.terrain,isGravity:this.isGravity,attackerSide:this.attackerSide,defenderSide:this.defenderSide})},e}();e.Field=P;var M=function(){function e(e){void 0===e&&(e={}),this.spikes=e.spikes||0,this.steelsurge=!!e.steelsurge,this.wildfire=!!e.wildfire,this.volcalith=!!e.volcalith,this.isSR=!!e.isSR,this.isReflect=!!e.isReflect,this.isLightScreen=!!e.isLightScreen,this.isProtected=!!e.isProtected,this.isSeeded=!!e.isSeeded,this.isForesight=!!e.isForesight,this.isTailwind=!!e.isTailwind,this.isHelpingHand=!!e.isHelpingHand,this.isFriendGuard=!!e.isFriendGuard,this.isAuroraVeil=!!e.isAuroraVeil,this.isBattery=!!e.isBattery,this.isSwitching=e.isSwitching}return e.prototype.clone=function(){return new e(this)},e}();e.Side=M;var T=["Fire","Water","Grass","Electric","Ice","Psychic","Dark","Dragon"],w=function(){function e(e,t,a){var i,r;void 0===a&&(a={}),t=a.name||t,this.originalName=t;var s=n.extend(!0,{name:t},e.moves.get(n.toID(t)),a.overrides);if(this.hits=1,a.useMax&&s.maxMove){var o=F(s.type,a.species,!("Status"!==s.category)),l=e.moves.get(n.toID(o));s=n.extend(!0,{},l,{name:o,basePower:10===l.basePower||"Max Flare"===o?s.maxMove.basePower:l.basePower,category:s.category})}if(a.useZ&&(null===(i=s.zMove)||void 0===i?void 0:i.basePower)){var h=B(s.name,s.type,a.item),c=e.moves.get(n.toID(h));s=n.extend(!0,{},c,{name:h,basePower:1===c.basePower?s.zMove.basePower:c.basePower,category:s.category})}else s.multihit&&("number"==typeof s.multihit?this.hits=s.multihit:a.hits?this.hits=a.hits:this.hits="Skill Link"===a.ability||"Grip Claw"===a.item?s.multihit[1]:s.multihit[0]+1),this.timesUsedWithMetronome=a.timesUsedWithMetronome;this.gen=e,this.name=s.name,this.ability=a.ability,this.item=a.item,this.useZ=a.useZ,this.useMax=a.useMax,this.overrides=a.overrides,this.species=a.species,this.bp=s.basePower;var d=e.num>=2&&e.num<=4&&["futuresight","doomdesire","struggle"].includes(s.id);this.type=d?"???":s.type,this.category=s.category||(e.num<4?T.includes(s.type)?"Special":"Physical":"Status");var u="Special"===this.category?"spa":"atk";(null===(r=s.self)||void 0===r?void 0:r.boosts)&&s.self.boosts[u]&&s.self.boosts[u]<0&&(this.dropsStats=Math.abs(s.self.boosts[u])),this.timesUsed=this.dropsStats&&a.timesUsed||1,this.secondaries=s.secondaries,this.target=s.target||"any",this.recoil=s.recoil,this.hasCrashDamage=!!s.hasCrashDamage,this.mindBlownRecoil=!!s.mindBlownRecoil,this.struggleRecoil=!!s.struggleRecoil,this.isCrit=!!a.isCrit||!!s.willCrit||1===e.num&&["crabhammer","razorleaf","slash"].includes(s.id),this.drain=s.drain,this.flags=s.flags,this.priority=s.priority||0,this.ignoreDefensive=!!s.ignoreDefensive,this.defensiveCategory=s.defensiveCategory||this.category,this.breaksProtect=!!s.breaksProtect,this.isZ=!!s.isZ,this.isMax=!!s.isMax,this.bp||(["return","frustration","pikapapow","veeveevolley"].includes(s.id)?this.bp=102:"naturepower"===s.id&&(this.bp=80,e.num>=5&&(this.secondaries=!0)))}return e.prototype.named=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.name)},e.prototype.hasType=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.type)},e.prototype.clone=function(){return new e(this.gen,this.originalName,{ability:this.ability,item:this.item,species:this.species,useZ:this.useZ,useMax:this.useMax,isCrit:this.isCrit,hits:this.hits,timesUsed:this.timesUsed,timesUsedWithMetronome:this.timesUsedWithMetronome,overrides:this.overrides})},e}();function B(e,t,a){if(a=a||"",e.includes("Hidden Power"))return"Breakneck Blitz";if("Clanging Scales"===e&&"Kommonium Z"===a)return"Clangorous Soulblaze";if("Darkest Lariat"===e&&"Incinium Z"===a)return"Malicious Moonsault";if("Giga Impact"===e&&"Snorlium Z"===a)return"Pulverizing Pancake";if("Moongeist Beam"===e&&"Lunalium Z"===a)return"Menacing Moonraze Maelstrom";if("Photon Geyser"===e&&"Ultranecrozium Z"===a)return"Light That Burns the Sky";if("Play Rough"===e&&"Mimikium Z"===a)return"Let's Snuggle Forever";if("Psychic"===e&&"Mewnium Z"===a)return"Genesis Supernova";if("Sparkling Aria"===e&&"Primarium Z"===a)return"Oceanic Operetta";if("Spectral Thief"===e&&"Marshadium Z"===a)return"Soul-Stealing 7-Star Strike";if("Spirit Shackle"===e&&"Decidium Z"===a)return"Sinister Arrow Raid";if("Stone Edge"===e&&"Lycanium Z"===a)return"Splintered Stormshards";if("Sunsteel Strike"===e&&"Solganium Z"===a)return"Searing Sunraze Smash";if("Volt Tackle"===e&&"Pikanium Z"===a)return"Catastropika";if("Nature's Madness"===e&&"Tapunium Z"===a)return"Guardian of Alola";if("Thunderbolt"===e){if("Aloraichium Z"===a)return"Stoked Sparksurfer";if("Pikashunium Z"===a)return"10,000,000 Volt Thunderbolt"}return x[t]}e.Move=w,e.getZMoveName=B;var x={Bug:"Savage Spin-Out",Dark:"Black Hole Eclipse",Dragon:"Devastating Drake",Electric:"Gigavolt Havoc",Fairy:"Twinkle Tackle",Fighting:"All-Out Pummeling",Fire:"Inferno Overdrive",Flying:"Supersonic Skystrike",Ghost:"Never-Ending Nightmare",Grass:"Bloom Doom",Ground:"Tectonic Rage",Ice:"Subzero Slammer",Normal:"Breakneck Blitz",Poison:"Acid Downpour",Psychic:"Shattered Psyche",Rock:"Continental Crush",Steel:"Corkscrew Crash",Water:"Hydro Vortex"};function F(e,t,a){if(a)return"Max Guard";if("Fire"===e){if("Charizard-Gmax"===t)return"G-Max Wildfire";if("Centiskorch-Gmax"===t)return"G-Max Centiferno"}if("Normal"===e){if("Eevee-Gmax"===t)return"G-Max Cuddle";if("Meowth-Gmax"===t)return"G-Max Gold Rush";if("Snorlax-Gmax"===t)return"G-Max Replenish"}if("Fairy"===e){if("Alcremie-Gmax"===t)return"G-Max Finale";if("Hatterene-Gmax"===t)return"G-Max Smite"}if("Steel"===e){if("Copperajah-Gmax"===t)return"G-Max Steelsurge";if("Melmetal-Gmax"===t)return"G-Max Meltdown"}if("Electric"===e){if("Pikachu-Gmax"===t)return"G-Max Volt Crash";if("Toxtricity-Gmax"===t)return"G-Max Stun Shock"}if("Grass"===e){if("Appletun-Gmax"===t)return"G-Max Sweetness";if("Flapple-Gmax"===t)return"G-Max Tartness"}if("Water"===e){if("Drednaw-Gmax"===t)return"G-Max Stonesurge";if("Kingler-Gmax"===t)return"G-Max Foam Burst"}return"Poison"===e&&"Garbodor-Gmax"===t?"G-Max Malodor":"Fighting"===e&&"Machamp-Gmax"===t?"G-Max Chi Strike":"Ghost"===e&&"Gengar-Gmax"===t?"G-Max Terror":"Ice"===e&&"Lapras-Gmax"===t?"G-Max Resonance":"Flying"===e&&"Corviknight-Gmax"===t?"G-Max Wind Rage":"Dragon"===e&&"Duraludon-Gmax"===t?"G-Max Depletion":"Psychic"===e&&"Orbeetle-Gmax"===t?"G-Max Gravitas":"Rock"===e&&"Coalossal-Gmax"===t?"G-Max Volcalith":"Ground"===e&&"Sandaconda-Gmax"===t?"G-Max Sandblast":"Dark"===e&&"Grimmsnarl-Gmax"===t?"G-Max Snooze":"Max "+R[e]}e.getMaxMoveName=F;var R={Bug:"Flutterby",Dark:"Darkness",Dragon:"Wyrmwind",Electric:"Lightning",Fairy:"Starfall",Fighting:"Knuckle",Fire:"Flare",Flying:"Airstream",Ghost:"Phantasm",Grass:"Overgrowth",Ground:"Quake",Ice:"Hailstorm",Normal:"Strike",Poison:"Ooze",Psychic:"Mindstorm",Rock:"Rockfall",Steel:"Steelspike",Water:"Geyser"};e.SEED_BOOSTED_STAT={"Electric Seed":"def","Grassy Seed":"def","Misty Seed":"spd","Psychic Seed":"spd"},e.getItemBoostType=function(e){switch(e){case"Draco Plate":case"Dragon Fang":return"Dragon";case"Dread Plate":case"Black Glasses":return"Dark";case"Earth Plate":case"Soft Sand":return"Ground";case"Fist Plate":case"Black Belt":return"Fighting";case"Flame Plate":case"Charcoal":return"Fire";case"Icicle Plate":case"Never-Melt Ice":return"Ice";case"Insect Plate":case"SilverPowder":return"Bug";case"Iron Plate":case"Metal Coat":return"Steel";case"Meadow Plate":case"Rose Incense":case"Miracle Seed":return"Grass";case"Mind Plate":case"Odd Incense":case"Twisted Spoon":return"Psychic";case"Pixie Plate":return"Fairy";case"Sky Plate":case"Sharp Beak":return"Flying";case"Splash Plate":case"Sea Incense":case"Wave Incense":case"Mystic Water":return"Water";case"Spooky Plate":case"Spell Tag":return"Ghost";case"Stone Plate":case"Rock Incense":case"Hard Stone":return"Rock";case"Toxic Plate":case"Poison Barb":return"Poison";case"Zap Plate":case"Magnet":return"Electric";case"Silk Scarf":case"Pink Bow":case"Polkadot Bow":return"Normal";default:return}},e.getBerryResistType=function(e){switch(e){case"Chilan Berry":return"Normal";case"Occa Berry":return"Fire";case"Passho Berry":return"Water";case"Wacan Berry":return"Electric";case"Rindo Berry":return"Grass";case"Yache Berry":return"Ice";case"Chople Berry":return"Fighting";case"Kebia Berry":return"Poison";case"Shuca Berry":return"Ground";case"Coba Berry":return"Flying";case"Payapa Berry":return"Psychic";case"Tanga Berry":return"Bug";case"Charti Berry":return"Rock";case"Kasib Berry":return"Ghost";case"Haban Berry":return"Dragon";case"Colbur Berry":return"Dark";case"Babiri Berry":return"Steel";case"Roseli Berry":return"Fairy";default:return}};var G=new Set(["TR24","TR28","TR34","TR39","TR53","TR55","TR64","TR66","TR72","TR73"]),I=new Set(["Hard Stone","Room Service","Claw Fossil","Dome Fossil","Helix Fossil","Old Amber","Root Fossil","Armor Fossil","Old Amber","Fossilized Bird","Fossilized Dino","Fossilized Drake","Fossilized Fish","Plume Fossil","Jaw Fossil","Cover Fossil","Sail Fossil","Rare Bone","Skull Fossil","TR10","TR31","TR75"]),H=new Set(["Deep Sea Tooth","Thick Club","TR02","TR04","TR05","TR08","TR11","TR22","TR35","TR42","TR45","TR50","TR61","TR65","TR67","TR86","TR90","TR96"]),D=new Set(["TR01","TR41","TR62","TR93","TR97","TR98"]),W=new Set(["Assault Vest","Blunder Policy","Chipped Pot","Cracked Pot","Heavy-Duty Boots","Weakness Policy","Quick Claw","Dawn Stone","Dusk Stone","Electirizer","Magmarizer","Oval Stone","Protector","Sachet","Whipped Dream","Razor Claw","Shiny Stone","TR16","TR18","TR19","TR25","TR32","TR33","TR47","TR56","TR57","TR58","TR59","TR60","TR63","TR69","TR70","TR74","TR84","TR87","TR92","TR95","TR99"]),C=new Set(["Poison Barb","Dragon Fang","Power Anklet","Power Band","Power Belt","Power Bracer","Power Lens","Power Weight"]),O=new Set(["Adamant Orb","Damp Rock","Heat Rock","Leek","Lustrous Orb","Macho Brace","Rocky Helmet","Stick","Utility Umbrella","Terrain Extender"]),E=new Set(["Absorb Bulb","Black Belt","Black Sludge","Black Glasses","Cell Battery","Charcoal","Deep Sea Scale","Flame Orb","King's Rock","Life Orb","Light Ball","Light Clay","Magnet","Metal Coat","Miracle Seed","Mystic Water","Never-Melt Ice","Razor Fang","Scope Lens","Soul Dew","Spell Tag","Sweet Apple","Tart Apple","Throat Spray","Toxic Orb","Twisted Spoon","Dragon Scale","Energy Powder","Fire Stone","Leaf Stone","Moon Stone","Sun Stone","Thunder Stone","Up-Grade","Water Stone","Berry Juice","Black Sludge","Prism Scale","Ice Stone","Gold Bottle Cap","Luminous Moss","Eject Button","Snowball","Bottle Cap"]),L=new Set(["Air Balloon","Berry Sweet","Choice Band","Choice Scarf","Choice Specs","Clover Sweet","Destiny Knot","Electric Seed","Expert Belt","Flower Sweet","Focus Band","Focus Sash","Full Incense","Grassy Seed","Lagging Tail","Lax Incense","Leftovers","Love Sweet","Mental Herb","Metal Powder","Mint Berry","Miracle Berry","Misty Seed","Muscle Band","Power Herb","Psychic Seed","Odd Incense","Quick Powder","Reaper Cloth","Red Card","Ribbon Sweet","Ring Target","Rock Incense","Rose Incense","Sea Incense","Shed Shell","Silk Scarf","Silver Powder","Smooth Rock","Soft Sand","Soothe Bell","Star Sweet","Strawberry Sweet","Wave Incense","White Herb","Wide Lens","Wise Glasses","Zoom Lens","SilverPowder","Power Herb","TR00","TR07","TR12","TR13","TR14","TR17","TR20","TR21","TR23","TR26","TR27","TR29","TR30","TR37","TR38","TR40","TR44","TR46","TR48","TR49","TR51","TR52","TR54","TR68","TR76","TR77","TR79","TR80","TR83","TR85","TR88","TR91"]);e.getFlingPower=function(e){return e?["Iron Ball","TR43","TR71"].includes(e)?130:G.has(e)?85:["TR03","TR06","TR09","TR15","TR89"].includes(e)?110:I.has(e)?100:["TR36","TR78","TR81","TR94"].includes(e)?95:e.includes("Plate")||H.has(e)?90:D.has(e)?85:W.has(e)?80:C.has(e)?70:O.has(e)?60:["Eject Pack","Sharp Beak","Dubious Disc"].includes(e)?50:["Icy Rock","Eviolite","Lucky Punch"].includes(e)?40:E.has(e)?30:"TR82"===e?20:e.includes("Berry")||L.has(e)?10:0:0},e.getNaturalGift=function(e,t){var a,i=null===(a=e.items.get(n.toID(t)))||void 0===a?void 0:a.naturalGift;return i?{t:i.type,p:i.basePower}:{t:"Normal",p:1}},e.getTechnoBlast=function(e){switch(e){case"Burn Drive":return"Fire";case"Chill Drive":return"Ice";case"Douse Drive":return"Water";case"Shock Drive":return"Electric";default:return}},e.getMultiAttack=function(e){if(e.includes("Memory"))return e.substring(0,e.indexOf(" "))};var N=_this&&_this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e},V=["Macho Brace","Power Anklet","Power Band","Power Belt","Power Bracer","Power Lens","Power Weight"];function U(e,t,a){var i=[1,1.5,2,2.5,3,3.5,4];if(a&&a.num<3){if(t>=0)e=Math.floor(e*i[t]);else{e=Math.floor(e*[100,66,50,40,33,28,25][-t]/100)}return Math.min(999,Math.max(1,e))}return e=t>=0?Math.floor(e*i[t]):Math.floor(e/i[-t])}function z(e,t,a,i){var r=a.weather||"",s=a.terrain,o=U(t.rawStats.spe,t.boosts.spe,e),n=1;return t.hasItem("Choice Scarf")?n*=1.5:t.hasItem.apply(t,N(["Iron Ball"],V))?n*=.5:t.hasItem("Quick Powder")&&t.named("Ditto")&&(n*=2),t.hasAbility("Unburden")&&t.abilityOn||t.hasAbility("Chlorophyll")&&r.includes("Sun")||t.hasAbility("Sand Rush")&&"Sand"===r||t.hasAbility("Swift Swim")&&r.includes("Rain")||t.hasAbility("Slush Rush")&&"Hail"===r||t.hasAbility("Surge Surfer")&&"Electric"===s?o*=2:t.hasAbility("Quick Feet")&&t.status?n*=1.5:t.hasAbility("Slow Start")&&t.abilityOn&&(n*=.5),i.isTailwind&&(n*=2),o=K(o*n),t.hasStatus("par")&&!t.hasAbility("Quick Feet")&&(o=Math.floor(o*(e.num<7?.25:.5))),o=Math.min(e.num<=2?999:1e4,o),Math.max(1,o)}function K(e){return e%1>.5?Math.ceil(e):Math.floor(e)}function Z(e){return e>65535?e%65536:e}function j(e){return e>4294967295?e%4294967296:e}e.isGrounded=function(e,t){return t.isGravity||!e.hasType("Flying")&&!e.hasAbility("Levitate")&&!e.hasItem("Air Balloon")},e.getModifiedStat=U,e.computeFinalStats=function(e,t,a,i){for(var r,s,o,n,l=[],h=4;h<arguments.length;h++)l[h-4]=arguments[h];var c=[[t,i.attackerSide],[a,i.defenderSide]];try{for(var d=g(c),u=d.next();!u.done;u=d.next()){var y=A(u.value,2),m=y[0],p=y[1];try{for(var f=(o=void 0,g(l)),b=f.next();!b.done;b=f.next()){var S=b.value;"spe"===S?m.stats.spe=z(e,m,i,p):m.stats[S]=U(m.rawStats[S],m.boosts[S],e)}}catch(e){o={error:e}}finally{try{b&&!b.done&&(n=f.return)&&n.call(f)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}},e.getFinalSpeed=z,e.getMoveEffectiveness=function(e,t,a,i,r){return i&&"Ghost"===a&&t.hasType("Normal","Fighting")||r&&"Flying"===a&&t.hasType("Ground")?1:t.named("Freeze-Dry")&&"Water"===a?2:t.named("Flying Press")?e.types.get("fighting").effectiveness[a]*e.types.get("flying").effectiveness[a]:e.types.get(n.toID(t.type)).effectiveness[a]},e.checkAirLock=function(e,t){e.hasAbility("Air Lock","Cloud Nine")&&(t.weather=void 0)},e.checkForecast=function(e,t){if(e.hasAbility("Forecast")&&e.named("Castform"))switch(t){case"Sun":case"Harsh Sunshine":e.types=["Fire"];break;case"Rain":case"Heavy Rain":e.types=["Water"];break;case"Hail":e.types=["Ice"];break;default:e.types=["Normal"]}},e.checkKlutz=function(e){e.hasAbility("Klutz")&&!V.includes(e.item)&&(e.item="")},e.checkIntimidate=function(e,t,a){var i=a.hasAbility("Clear Body","White Smoke","Hyper Cutter","Full Metal Body")||8===e.num&&a.hasAbility("Inner Focus","Own Tempo","Oblivious","Scrappy");t.hasAbility("Intimidate")&&t.abilityOn&&!i&&(a.hasAbility("Contrary","Defiant")?a.boosts.atk=Math.min(6,a.boosts.atk+1):a.hasAbility("Simple")?a.boosts.atk=Math.max(-6,a.boosts.atk-2):a.boosts.atk=Math.max(-6,a.boosts.atk-1))},e.checkDownload=function(e,t){e.hasAbility("Download")&&(t.stats.spd<=t.stats.def?e.boosts.spa=Math.min(6,e.boosts.spa+1):e.boosts.atk=Math.min(6,e.boosts.atk+1))},e.checkIntrepidSword=function(e){e.hasAbility("Intrepid Sword")&&(e.boosts.atk=Math.min(6,e.boosts.atk+1))},e.checkDauntlessShield=function(e){e.hasAbility("Dauntless Shield")&&(e.boosts.def=Math.min(6,e.boosts.def+1))},e.checkInfiltrator=function(e,t){e.hasAbility("Infiltrator")&&(t.isReflect=!1,t.isLightScreen=!1,t.isAuroraVeil=!1)},e.checkSeedBoost=function(e,t){if(e.item&&t.terrain&&e.item.includes("Seed")){var a=e.item.substring(0,e.item.indexOf(" "));t.hasTerrain(a)&&("Grassy"===a||"Electric"===a?e.boosts.def=e.hasAbility("Contrary")?Math.max(-6,e.boosts.def-1):Math.min(6,e.boosts.def+1):e.boosts.spd=e.hasAbility("Contrary")?Math.max(-6,e.boosts.spd-1):Math.min(6,e.boosts.spd+1))}},e.checkMultihitBoost=function(e,t,a,i,r,s,o){void 0===o&&(o=!1),i.named("Gyro Ball","Electro Ball")&&a.hasAbility("Gooey","Tangling Hair")?t.hasItem("White Herb")&&!o?(s.attackerItem=t.item,o=!0):(t.boosts.spe=Math.max(t.boosts.spe-1,-6),t.stats.spe=z(e,t,r,r.attackerSide),s.defenderAbility=a.ability):i.named("Power-Up Punch")&&(t.boosts.atk=Math.min(t.boosts.atk+1,6),t.stats.atk=U(t.rawStats.atk,t.boosts.atk,e)),a.hasAbility("Stamina")?t.hasAbility("Unaware")?s.attackerAbility=t.ability:(a.boosts.def=Math.min(a.boosts.def+1,6),a.stats.def=U(a.rawStats.def,a.boosts.def,e),s.defenderAbility=a.ability):a.hasAbility("Weak Armor")&&(t.hasAbility("Unaware")?s.attackerAbility=t.ability:a.hasItem("White Herb")&&!o?(s.defenderItem=a.item,o=!0):(a.boosts.def=Math.max(a.boosts.def-1,-6),a.stats.def=U(a.rawStats.def,a.boosts.def,e)),a.boosts.spe+=Math.min(a.boosts.spe+2,6),a.stats.spe=z(e,a,r,r.defenderSide),s.defenderAbility=a.ability);var n=t.hasAbility("Simple")?2:1;if(i.dropsStats)if(t.hasAbility("Unaware"))s.attackerAbility=t.ability;else{var l="Special"===i.category?"spa":"atk",h=t.boosts[l];t.hasAbility("Contrary")?(h=Math.min(6,h+i.dropsStats),s.attackerAbility=t.ability):(h=Math.max(-6,h-i.dropsStats*n),n>1&&(s.attackerAbility=t.ability)),t.hasItem("White Herb")&&t.boosts[l]<0&&!o&&(h+=i.dropsStats*n,s.attackerItem=t.item,o=!0),t.boosts[l]=h,t.stats[l]=U(t.rawStats[l],a.boosts[l],e)}return o},e.chainMods=function(e){var t,a,i=4096;try{for(var r=g(e),s=r.next();!s.done;s=r.next()){var o=s.value;4096!==o&&(i=i*o+2048>>12)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}return i},e.getBaseDamage=function(e,t,a,i){return Math.floor(j(Math.floor(j(j(Math.floor(2*e/5+2)*t)*a)/i)/50+2))},e.getFinalDamage=function(e,t,a,i,r,s,o){var n=Math.floor(j(e*(85+t))/100);return 4096!==r&&(n=j(n*r)/4096),n=Math.floor(j(K(n)*a)),i&&(n=Math.floor(n/2)),o&&(n=K(j(1024*n)/4096)),Z(K(Math.max(1,j(n*s)/4096)))},e.getWeightFactor=function(e){return e.hasAbility("Heavy Metal")?2:e.hasAbility("Light Metal")?.5:1},e.countBoosts=function(e,t){var a,i,r=0,s=1===e.num?["atk","def","spa","spe"]:["atk","def","spa","spd","spe"];try{for(var o=g(s),n=o.next();!n.done;n=o.next()){var l=t[n.value];l&&l>0&&(r+=l)}}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return r},e.getEVDescriptionText=function(e,t,a,i){var r=e.natures.get(n.toID(i));return t.evs[a]+(r.plus===r.minus?"":r.plus===a?"+":r.minus===a?"-":"")+" "+b.Stats.displayStat(a)},e.handleFixedDamageMoves=function(e,t){return t.named("Seismic Toss","Night Shade")?e.level:t.named("Dragon Rage")?40:t.named("Sonic Boom")?20:0},e.pokeRound=K,e.OF16=Z,e.OF32=j;var _=function(){function e(e,t,a,i,r,s,o){this.gen=e,this.attacker=t,this.defender=a,this.move=i,this.field=r,this.damage=s,this.rawDesc=o}return e.prototype.desc=function(){return this.fullDesc()},e.prototype.range=function(){var e=Y(this.damage);if("number"==typeof e[0])return e;var t=e;return[t[0][0]+t[0][1],t[1][0]+t[1][1]]},e.prototype.fullDesc=function(e,t){return void 0===e&&(e="%"),void 0===t&&(t=!0),oe.display(this.gen,this.attacker,this.defender,this.move,this.field,this.damage,this.rawDesc,e,t)},e.prototype.moveDesc=function(e){return void 0===e&&(e="%"),oe.displayMove(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.recovery=function(e){return void 0===e&&(e="%"),oe.getRecovery(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.recoil=function(e){return void 0===e&&(e="%"),oe.getRecoil(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.kochance=function(e){return void 0===e&&(e=!0),oe.getKOChance(this.gen,this.attacker,this.defender,this.move,this.field,this.damage,e)},e}();function Y(e){if("number"==typeof e)return[e,e];if(e.length>2){var t=e;return t[0]>t[t.length-1]?[Math.min.apply(Math,N(t)),Math.max.apply(Math,N(t))]:[t[0],t[t.length-1]]}if("number"==typeof e[0]&&"number"==typeof e[1])return[[e[0],e[1]],[e[0],e[1]]];var a=e;return a[0][0]>a[0][a[0].length-1]&&(a[0]=a[0].slice().sort()),a[1][0]>a[1][a[1].length-1]&&(a[1]=a[1].slice().sort()),[[a[0][0],a[1][0]],[a[0][a[0].length-1],a[1][a[1].length-1]]]}e.Result=_,e.damageRange=Y;var J=e,Q=e;function q(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h="number"==typeof n?[n]:n,c="number"==typeof l?[l]:l,d=[0,0],u="",y=3===e.num&&i.named("Doom Desire","Future Sight");if(t.hasItem("Shell Bell")&&!y)for(var m=Math.round(a.maxHP()/8),p=0;p<h.length;p++)d[0]+=Math.min(Math.round(h[p]*i.hits/8),m),d[1]+=Math.min(Math.round(c[p]*i.hits/8),m);if(i.named("G-Max Finale")&&(d[0]=d[1]=Math.round(t.maxHP()/6)),i.drain){var f=i.drain[0]/i.drain[1];for(m=Math.round(a.maxHP()*f),p=0;p<h.length;p++)d[0]+=Math.min(Math.round(h[p]*i.hits*f),m),d[1]+=Math.min(Math.round(c[p]*i.hits*f),m)}return 0===d[1]?{recovery:d,text:u}:{recovery:d,text:u=se(s,d[0],t.maxHP())+" - "+se(s,d[1],t.maxHP())+s+" recovered"}}function X(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h=("number"==typeof n?n:n[0]+n[1])*i.hits,c=("number"==typeof l?l:l[0]+l[1])*i.hits,d=[0,0],u="",y=n>a.curHP()||l>a.curHP();if(i.recoil){var m=i.recoil[0]/i.recoil[1]*100,p=void 0,f=void 0;y?(p=se(s,a.curHP()*m,t.maxHP(),100),f=se(s,a.curHP()*m,t.maxHP(),100)):(p=se(s,Math.min(h,a.curHP())*m,t.maxHP(),100),f=se(s,Math.min(c,a.curHP())*m,t.maxHP(),100)),t.hasAbility("Rock Head")||(d=[p,f],u=p+" - "+f+s+" recoil damage")}else if(i.hasCrashDamage){var b=2===e.num?12.5:e.num>=3?50:1;p=void 0,f=void 0;switch(y&&2!==e.num?(p=se(s,a.curHP()*b,t.maxHP(),100),f=se(s,a.curHP()*b,t.maxHP(),100)):(p=se(s,Math.min(h,a.maxHP())*b,t.maxHP(),100),f=se(s,Math.min(c,a.maxHP())*b,t.maxHP(),100)),d=[p,f],e.num){case 1:d=se(s,1,t.maxHP()),u="1hp damage on miss";break;case 2:case 3:case 4:if(a.hasType("Ghost"))if(4===e.num){var g=Math.floor(.5*a.maxHP()/t.maxHP()*100);d="%"===s?g:Math.floor(g/100*48),u=g+"% crash damage"}else d=0,u="no crash damage on Ghost types";else u=p+" - "+f+s+" crash damage on miss";break;default:d="%"===s?24:50,u="50% crash damage"}}else i.struggleRecoil?(d="%"===s?12:25,u="25% struggle damage",4===e.num&&(u+=" (rounded down)")):i.mindBlownRecoil&&(d="%"===s?24:50,u="50% recoil damage");return{recoil:d,text:u}}function $(e,t,a,i,r,s,o){if(void 0===o&&(o=!0),s=function(e){if("number"==typeof e)return[e];if(e.length>2)return e[0]>e[e.length-1]&&(e=e.slice().sort()),e;if("number"==typeof e[0]&&"number"==typeof e[1])return[e[0]+e[1]];for(var t=e,a=[],i=0;i<t[0].length;i++)for(var r=0;r<t[1].length;r++)a.push(t[0][i]+t[1][r]);return a.sort()}(s),isNaN(s[0]))return n.error(o,"damage[0] must be a number."),{chance:0,n:0,text:""};if(0===s[s.length-1])return n.error(o,"damage[damage.length - 1] === 0."),{chance:0,n:0,text:""};if(void 0===i.timesUsed&&(i.timesUsed=1),void 0===i.timesUsedWithMetronome&&(i.timesUsedWithMetronome=1),s[0]>=a.maxHP()&&1===i.timesUsed&&1===i.timesUsedWithMetronome)return{chance:1,n:1,text:"guaranteed OHKO"};var l=function(e,t,a){var i=0,r=[];if(t.hasItem("Heavy-Duty Boots"))return{damage:i,texts:r};if(a.isSR&&!t.hasAbility("Magic Guard","Mountaineer")){var s=e.types.get("rock"),o=s.effectiveness[t.types[0]]*(t.types[1]?s.effectiveness[t.types[1]]:1);i+=Math.floor(o*t.maxHP()/8),r.push("Stealth Rock")}if(a.steelsurge&&!t.hasAbility("Magic Guard","Mountaineer")){var n=e.types.get("steel");o=n.effectiveness[t.types[0]]*(t.types[1]?n.effectiveness[t.types[1]]:1);i+=Math.floor(o*t.maxHP()/8),r.push("Steelsurge")}t.hasType("Flying")||t.hasAbility("Magic Guard","Levitate")||t.hasItem("Air Balloon")||(1===a.spikes?(i+=Math.floor(t.maxHP()/8),2===e.num?r.push("Spikes"):r.push("1 layer of Spikes")):2===a.spikes?(i+=Math.floor(t.maxHP()/6),r.push("2 layers of Spikes")):3===a.spikes&&(i+=Math.floor(t.maxHP()/4),r.push("3 layers of Spikes")));isNaN(i)&&(i=0);return{damage:i,texts:r}}(e,a,r.defenderSide),h=function(e,t,a,i,r){var s=0,o=[];r.hasWeather("Sun","Harsh Sunshine")?a.hasAbility("Dry Skin","Solar Power")&&(s-=Math.floor(a.maxHP()/8),o.push(a.ability+" damage")):r.hasWeather("Rain","Heavy Rain")?a.hasAbility("Dry Skin")?(s+=Math.floor(a.maxHP()/8),o.push("Dry Skin recovery")):a.hasAbility("Rain Dish")&&(s+=Math.floor(a.maxHP()/16),o.push("Rain Dish recovery")):r.hasWeather("Sand")?a.hasType("Rock","Ground","Steel")||a.hasAbility("Magic Guard","Overcoat","Sand Force","Sand Rush","Sand Veil")||a.hasItem("Safety Goggles")||(s-=Math.floor(a.maxHP()/(2===e.num?8:16)),o.push("sandstorm damage")):r.hasWeather("Hail")&&(a.hasAbility("Ice Body")?(s+=Math.floor(a.maxHP()/16),o.push("Ice Body recovery")):a.hasType("Ice")||a.hasAbility("Magic Guard","Overcoat","Snow Cloak")||a.hasItem("Safety Goggles")||(s-=Math.floor(a.maxHP()/16),o.push("hail damage")));var n=i.named("Knock Off")&&!a.hasAbility("Sticky Hold");a.hasItem("Leftovers")&&!n?(s+=Math.floor(a.maxHP()/16),o.push("Leftovers recovery")):a.hasItem("Black Sludge")&&!n?a.hasType("Poison")?(s+=Math.floor(a.maxHP()/16),o.push("Black Sludge recovery")):a.hasAbility("Magic Guard","Klutz")||(s-=Math.floor(a.maxHP()/8),o.push("Black Sludge damage")):a.hasItem("Sticky Barb")&&(s-=Math.floor(a.maxHP()/8),o.push("Sticky Barb damage"));r.defenderSide.isSeeded&&(a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(e.num>=2?8:16)),o.push("Leech Seed damage")));r.attackerSide.isSeeded&&!t.hasAbility("Magic Guard")&&(t.hasAbility("Liquid Ooze")?(s-=Math.floor(t.maxHP()/(e.num>=2?8:16)),o.push("Liquid Ooze damage")):(s+=Math.floor(t.maxHP()/(e.num>=2?8:16)),o.push("Leech Seed recovery")));r.hasTerrain("Grassy")&&Q.isGrounded(a,r)&&(s+=Math.floor(a.maxHP()/16),o.push("Grassy Terrain recovery"));a.hasStatus("psn")?a.hasAbility("Poison Heal")?(s+=Math.floor(a.maxHP()/8),o.push("Poison Heal")):a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(1===e.num?16:8)),o.push("poison damage")):a.hasStatus("tox")?a.hasAbility("Poison Heal")?(s+=Math.floor(a.maxHP()/8),o.push("Poison Heal")):a.hasAbility("Magic Guard")||o.push("toxic damage"):a.hasStatus("brn")?a.hasAbility("Heatproof")?(s-=Math.floor(a.maxHP()/(e.num>6?32:16)),o.push("reduced burn damage")):a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(1===e.num||e.num>6?16:8)),o.push("burn damage")):(a.hasStatus("slp")||a.hasAbility("Comatose"))&&t.hasAbility("isBadDreams")&&!a.hasAbility("Magic Guard")&&(s-=Math.floor(a.maxHP()/8),o.push("Bad Dreams"));!a.hasAbility("Magic Guard")&&ee.includes(i.name)&&(t.hasItem("Binding Band")?(s-=e.num>5?Math.floor(a.maxHP()/6):Math.floor(a.maxHP()/8),o.push("trapping damage")):(s-=e.num>5?Math.floor(a.maxHP()/8):Math.floor(a.maxHP()/16),o.push("trapping damage")));a.hasType("Fire")||a.hasAbility("Magic Guard")||!i.named("Fire Pledge (Grass Pledge Boosted)","Grass Pledge (Fire Pledge Boosted)")||(s-=Math.floor(a.maxHP()/8),o.push("Sea of Fire damage"));a.hasAbility("Magic Guard")||a.hasType("Fire")||!r.defenderSide.wildfire&&!i.named("G-Max Wildfire")||(s-=Math.floor(a.maxHP()/6),o.push("Wildfire damage"));a.hasAbility("Magic Guard")||a.hasType("Rock")||!r.defenderSide.volcalith&&!i.named("G-Max Volcalith")||(s-=Math.floor(a.maxHP()/6),o.push("Volcalith damage"));return{damage:s,texts:o}}(e,t,a,i,r),c=a.hasStatus("tox")&&!a.hasAbility("Magic Guard")?a.toxicCounter:0,d="";i.hits>1&&(d="approx. ",s=function(e,t,a,i){void 0===i&&(i=!0);if(1===t.length)return[t[0]*a];if(1===e.num){for(var r=[],s=0;s<t.length;s++)r[s]=t[s]*a;return r}if(16===t.length)switch(a){case 2:return[2*t[0],t[2]+t[3],t[4]+t[4],t[4]+t[5],t[5]+t[6],t[6]+t[6],t[6]+t[7],t[7]+t[7],t[8]+t[8],t[8]+t[9],t[9]+t[9],t[9]+t[10],t[10]+t[11],t[11]+t[11],t[12]+t[13],2*t[15]];case 3:return[3*t[0],t[3]+t[3]+t[4],t[4]+t[4]+t[5],t[5]+t[5]+t[6],t[5]+t[6]+t[6],t[6]+t[6]+t[7],t[6]+t[7]+t[7],t[7]+t[7]+t[8],t[7]+t[8]+t[8],t[8]+t[8]+t[9],t[8]+t[9]+t[9],t[9]+t[9]+t[10],t[9]+t[10]+t[10],t[10]+t[11]+t[11],t[11]+t[12]+t[12],3*t[15]];case 4:return[4*t[0],4*t[4],t[4]+t[5]+t[5]+t[5],t[5]+t[5]+t[6]+t[6],4*t[6],t[6]+t[6]+t[7]+t[7],4*t[7],t[7]+t[7]+t[7]+t[8],t[7]+t[8]+t[8]+t[8],4*t[8],t[8]+t[8]+t[9]+t[9],4*t[9],t[9]+t[9]+t[10]+t[10],t[10]+t[10]+t[10]+t[11],4*t[11],4*t[15]];case 5:return[5*t[0],t[4]+t[4]+t[4]+t[5]+t[5],t[5]+t[5]+t[5]+t[5]+t[6],t[5]+t[6]+t[6]+t[6]+t[6],t[6]+t[6]+t[6]+t[6]+t[7],t[6]+t[6]+t[7]+t[7]+t[7],5*t[7],t[7]+t[7]+t[7]+t[8]+t[8],t[7]+t[7]+t[8]+t[8]+t[8],5*t[8],t[8]+t[8]+t[8]+t[9]+t[9],t[8]+t[9]+t[9]+t[9]+t[9],t[9]+t[9]+t[9]+t[9]+t[10],t[9]+t[10]+t[10]+t[10]+t[10],t[10]+t[10]+t[11]+t[11]+t[11],5*t[15]];default:return n.error(i,"Unexpected # of hits: "+a),t}else{if(39!==t.length){if(256===t.length){a>1&&n.error(i,"Unexpected # of hits for Parental Bond: "+a);for(r=[],s=0;s<16;s++){for(var o=0,l=0;l<16;l++)o+=t[s+l];r[s]=Math.round(o/16)}return r}return n.error(i,"Unexpected # of possible damage values: "+t.length),t}switch(a){case 2:return[2*t[0],2*t[7],2*t[10],2*t[12],2*t[14],t[15]+t[16],2*t[17],t[18]+t[19],t[19]+t[20],2*t[21],t[22]+t[23],2*t[24],2*t[26],2*t[28],2*t[31],2*t[38]];case 3:return[3*t[0],3*t[9],3*t[12],3*t[13],3*t[15],3*t[16],3*t[17],3*t[18],3*t[20],3*t[21],3*t[22],3*t[23],3*t[25],3*t[26],3*t[29],3*t[38]];case 4:return[4*t[0],2*t[10]+2*t[11],4*t[13],4*t[14],2*t[15]+2*t[16],2*t[16]+2*t[17],2*t[17]+2*t[18],2*t[18]+2*t[19],2*t[19]+2*t[20],2*t[20]+2*t[21],2*t[21]+2*t[22],2*t[22]+2*t[23],4*t[24],4*t[25],2*t[27]+2*t[28],4*t[38]];case 5:return[5*t[0],5*t[11],5*t[13],5*t[15],5*t[16],5*t[17],5*t[18],5*t[19],5*t[19],5*t[20],5*t[21],5*t[22],5*t[23],5*t[25],5*t[27],5*t[38]];default:return n.error(i,"Unexpected # of hits: "+a),t}}}(e,s,i.hits,o));var u,y=l.texts.length>0?" after "+ie(l.texts):"",m=l.texts.length>0||h.texts.length>0?" after "+ie(l.texts.concat(h.texts)):"";if(!(1===i.timesUsed&&1===i.timesUsedWithMetronome||i.isZ))return 1===(u=te(s,a.maxHP()-l.damage,h.damage,i.hits||1,i.timesUsed||1,a.maxHP(),c))?{chance:u,n:i.timesUsed,text:(d||"guaranteed ")+"KO in "+i.timesUsed+" turns"+m}:u>0?{chance:u,n:i.timesUsed,text:d+Math.round(1e3*u)/10+"% chance to "+i.timesUsed+"HKO"+m}:ae(s[0],h.damage,i.hits,i.timesUsed,c,a.maxHP())>=a.curHP()-l.damage?{chance:1,n:i.timesUsed,text:(d||"guaranteed ")+"KO in "+i.timesUsed+" turns"+m}:ae(s[s.length-1],h.damage,i.hits,i.timesUsed,c,a.maxHP())>=a.curHP()-l.damage?{n:i.timesUsed,text:d+"possible KO in "+i.timesUsed+" turns"+m}:{n:i.timesUsed,text:d+"not a KO"};if(1===(u=te(s,a.curHP()-l.damage,0,1,1,a.maxHP(),c)))return{chance:u,n:1,text:"guaranteed OHKO"+y};if(u>0)return{chance:u,n:1,text:d+Math.round(1e3*u)/10+"% chance to OHKO"+y};256===s.length&&(d="approx. ");for(var p=2;p<=4;p++){var f=te(s,a.curHP()-l.damage,h.damage,p,1,a.maxHP(),c);if(1===f)return{chance:f,n:p,text:""+(d||"guaranteed ")+p+"HKO"+m};if(f>0)return{chance:f,n:p,text:d+Math.round(1e3*f)/10+"% chance to "+p+"HKO"+m}}for(p=5;p<=9;p++){if(ae(s[0],h.damage,p,1,c,a.maxHP())>=a.curHP()-l.damage)return{chance:1,n:p,text:""+(d||"guaranteed ")+p+"HKO"+m};if(ae(s[s.length-1],h.damage,p,1,c,a.maxHP())>=a.curHP()-l.damage)return{n:p,text:d+"possible "+p+"HKO"+m}}return{chance:0,n:0,text:""}}e.display=function(e,t,a,i,r,s,o,n,l){void 0===n&&(n="%"),void 0===l&&(l=!0);var h=A(J.damageRange(s),2),c=h[0],d=h[1],u=("number"==typeof c?c:c[0]+c[1])*i.hits,y=("number"==typeof d?d:d[0]+d[1])*i.hits,m=se(n,u,a.maxHP()),p=se(n,y,a.maxHP()),f=function(e,t,a){var i=A(function(e,t){if(e.level!==t.level)return[100===e.level?"":"Lvl "+e.level,100===t.level?"":"Lvl "+t.level];var a=[100,50,5].includes(e.level)?"":"Lvl "+e.level;return[a,a]}(t,a),2),r=i[0],s=i[1],o="";e.attackBoost&&(e.attackBoost>0&&(o+="+"),o+=e.attackBoost+" ");o=re(o,r),o=re(o,e.attackEVs),o=re(o,e.attackerItem),o=re(o,e.attackerAbility),o=re(o,e.rivalry),e.isBurned&&(o+="burned ");o+=e.attackerName+" ",e.isHelpingHand&&(o+="Helping Hand ");e.isBattery&&(o+=" Battery boosted ");e.isSwitching&&(o+=" switching boosted ");o+=e.moveName+" ",e.moveBP&&e.moveType?o+="("+e.moveBP+" BP "+e.moveType+") ":e.moveBP?o+="("+e.moveBP+" BP) ":e.moveType&&(o+="("+e.moveType+") ");e.hits&&(o+="("+e.hits+" hits) ");o=re(o,e.moveTurns),o+="vs. ",e.defenseBoost&&(e.defenseBoost>0&&(o+="+"),o+=e.defenseBoost+" ");o=re(o,s),o=re(o,e.HPEVs),e.defenseEVs&&(o+="/ "+e.defenseEVs+" ");o=re(o,e.defenderItem),o=re(o,e.defenderAbility),e.isProtected&&(o+="protected ");e.isDefenderDynamaxed&&(o+="Dynamax ");o+=e.defenderName,e.weather&&e.terrain||(e.weather?o+=" in "+e.weather:e.terrain&&(o+=" in "+e.terrain+" Terrain"));e.isReflect?o+=" through Reflect":e.isLightScreen&&(o+=" through Light Screen");e.isFriendGuard&&(o+=" with an ally's Friend Guard");e.isAuroraVeil&&(o+=" with an ally's Aurora Veil");e.isCritical&&(o+=" on a critical hit");return o}(o,t,a),b=u+"-"+y+" ("+m+" - "+p+n+")";if("Status"===i.category&&!i.named("Nature Power"))return f+": "+b;var g=$(e,t,a,i,r,s,l).text;return g?f+": "+b+" -- "+g:f+": "+b},e.displayMove=function(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h=("number"==typeof n?n:n[0]+n[1])*i.hits,c=("number"==typeof l?l:l[0]+l[1])*i.hits,d=se(s,h,a.maxHP()),u=se(s,c,a.maxHP()),y=q(e,t,a,i,r,s).text,m=X(e,t,a,i,r,s).text;return d+" - "+u+s+(y&&" ("+y+")")+(m&&" ("+m+")")},e.getRecovery=q,e.getRecoil=X,e.getKOChance=$;var ee=["Bind","Clamp","Fire Spin","Infestation","Magma Storm","Sand Tomb","Whirlpool","Wrap","G-Max Sandblast","G-Max Centiferno"];function te(e,t,a,i,r,s,o){var n=e.length;if(1===i)for(var l=0;l<n;l++){if(e[n-1]<t)return 0;if(e[l]>=t)return(n-l)/n}var h=0;o>0&&(h=Math.floor(o*s/16),o++);var c=0,d=0;for(l=0;l<n;l++){var u=void 0;if(1===(u=0===l||e[l]!==e[l-1]?te(e,t-e[l]+a-h,a,i-1,r,s,o):d)){c+=n-l;break}c+=u,d=u}return c/n}function ae(e,t,a,i,r,s){var o=0;if(r>0)for(var n=0;n<a-1;n++)o+=Math.floor((r+n)*s/16);return a>1&&1===i?e*a-t*(a-1)+o:e-t*(a-1)+o}function ie(e){if(0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];for(var t="",a=0;a<e.length-1;a++)t+=e[a]+", ";return t+"and "+e[e.length-1]}function re(e,t){return t?""+e+t+" ":e}function se(e,t,a,i){return void 0===i&&(i=1),"%"===e?Math.floor(t*(1e3/i)/a)/10:Math.floor(t*(48/i)/a)}var oe=e,ne=e;function le(e,t){var a=Math.min(6,Math.max(-6,2*t));return a>0?Math.floor(e*(2+a)/2):a<0?Math.floor(2*e/(2-a)):e}e.calculateSMSS=function e(t,a,i,r,s){var o;Q.checkAirLock(a,s),Q.checkAirLock(i,s),Q.checkForecast(a,s.weather),Q.checkForecast(i,s.weather),Q.checkKlutz(a),Q.checkKlutz(i),Q.checkSeedBoost(a,s),Q.checkSeedBoost(i,s),Q.computeFinalStats(t,a,i,s,"def","spd","spe"),Q.checkIntimidate(t,a,i),Q.checkIntimidate(t,i,a),Q.checkDownload(a,i),Q.checkDownload(i,a),Q.checkIntrepidSword(a),Q.checkIntrepidSword(i),Q.checkDauntlessShield(a),Q.checkDauntlessShield(i),Q.computeFinalStats(t,a,i,s,"atk","spa"),Q.checkInfiltrator(a,s.defenderSide),Q.checkInfiltrator(i,s.attackerSide);var l={attackerName:a.name,moveName:r.name,defenderName:i.name,isDefenderDynamaxed:i.isDynamaxed},h=new J.Result(t,a,i,r,s,0,l);if("Status"===r.category&&!r.named("Nature Power"))return h;var c=r.breaksProtect||r.isZ||a.isDynamaxed||a.hasAbility("Unseen Fist")&&r.flags.contact;if(s.defenderSide.isProtected&&!c)return l.isProtected=!0,h;var d=i.hasAbility("Full Metal Body","Neutralizing Gas","Prism Armor","Shadow Shield"),u=a.hasAbility("Mold Breaker","Teravolt","Turboblaze"),y=r.named("Light That Burns the Sky","Menacing Moonraze Maelstrom","Moongeist Beam","Photon Geyser","Searing Sunraze Smash","Sunsteel Strike");d||(u&&(i.ability="",l.attackerAbility=a.ability),y&&(i.ability=""));var m=!i.hasAbility("Battle Armor","Shell Armor")&&(r.isCrit||a.hasAbility("Merciless")&&i.hasStatus("psn","tox"))&&1===r.timesUsed;if(r.named("Weather Ball"))r.type=s.hasWeather("Sun","Harsh Sunshine")?"Fire":s.hasWeather("Rain","Heavy Rain")?"Water":s.hasWeather("Sand")?"Rock":s.hasWeather("Hail")?"Ice":"Normal",l.weather=s.weather,l.moveType=r.type;else if(r.named("Judgment")&&a.item&&a.item.includes("Plate"))r.type=ne.getItemBoostType(a.item);else if(r.named("Techno Blast")&&a.item&&a.item.includes("Drive"))r.type=ne.getTechnoBlast(a.item);else if(r.named("Multi-Attack")&&a.item&&a.item.includes("Memory"))r.type=ne.getMultiAttack(a.item);else if(r.named("Natural Gift")&&a.item&&a.item.includes("Berry")){var p=ne.getNaturalGift(t,a.item);r.type=p.t,r.bp=p.p,l.attackerItem=a.item,l.moveBP=r.bp,l.moveType=r.type}else r.named("Nature Power")?r.type=s.hasTerrain("Electric")?"Electric":s.hasTerrain("Grassy")?"Grass":s.hasTerrain("Misty")?"Fairy":s.hasTerrain("Psychic")?"Psychic":"Normal":r.named("Revelation Dance")?r.type=a.types[0]:r.named("Aura Wheel")&&(a.named("Morpeko")?r.type="Electric":a.named("Morpeko-Hangry")?r.type="Dark":r.named("Terrain Pulse")&&(r.type=s.hasTerrain("Electric")?"Electric":s.hasTerrain("Grassy")?"Grass":s.hasTerrain("Misty")?"Fairy":s.hasTerrain("Psychic")?"Psychic":"Normal"));var f=!1,b=!1,g=!1,S=!1,v=!1,k=!1,A=r.named("Revelation Dance","Judgment","Nature Power","Techo Blast","Multi Attack","Natural Gift","Weather Ball");if(!r.isZ&&!A){var P=r.hasType("Normal");(f=a.hasAbility("Aerilate")&&P)?r.type="Flying":(S=a.hasAbility("Galvanize")&&P)?r.type="Electric":(v=a.hasAbility("Liquid Voice")&&!!r.flags.sound)?r.type="Water":(b=a.hasAbility("Pixilate")&&P)?r.type="Fairy":(g=a.hasAbility("Refrigerate")&&P)?r.type="Ice":(k=a.hasAbility("Normalize"))&&(r.type="Normal"),(S||v||b||g||f||k)&&(l.attackerAbility=a.ability)}(a.hasAbility("Triage")&&r.drain||a.hasAbility("Gale Wings")&&r.hasType("Flying")&&a.curHP()===a.maxHP())&&(r.priority=1,l.attackerAbility=a.ability);var M=a.hasAbility("Scrappy")||s.defenderSide.isForesight,T=Q.getMoveEffectiveness(t,r,i.types[0],M,s.isGravity),w=i.types[1]?Q.getMoveEffectiveness(t,r,i.types[1],M,s.isGravity):1,B=T*w,x=!i.item||i.named("Giratina-Origin")&&i.hasItem("Griseous Orb")||i.name.includes("Arceus")&&i.item.includes("Plate")||i.name.includes("Genesect")&&i.item.includes("Drive")||i.named("Groudon","Groudon-Primal")&&i.hasItem("Red Orb")||i.named("Kyogre","Kyogre-Primal")&&i.hasItem("Blue Orb")||i.name.includes("Silvally")&&i.item.includes("Memory")||i.item.includes(" Z")||i.named("Zacian")&&i.hasItem("Rusted Sword");if(!x&&i.item){var F=t.items.get(n.toID(i.item));x=!!F.megaEvolves&&i.name.includes(F.megaEvolves)}if(0===B&&r.named("Thousand Arrows"))B=1;else if(0===B&&i.hasItem("Ring Target")){var R=t.types.get(n.toID(r.type)).effectiveness;0===R[i.types[0]]?B=w:i.types[1]&&0===R[i.types[1]]&&(B=T)}if(0===B)return h;if(r.named("Sky Drop")&&(i.hasType("Flying")||i.weightkg>=200||s.isGravity)||r.named("Synchronoise")&&!i.hasType(a.types[0])&&(!a.types[1]||!i.hasType(a.types[1]))||r.named("Dream Eater")&&!i.hasStatus("slp")&&!i.hasAbility("Comatose"))return h;if(i.hasAbility("Wonder Guard")&&B<=1||r.hasType("Grass")&&i.hasAbility("Sap Sipper")||r.hasType("Fire")&&i.hasAbility("Flash Fire")||r.hasType("Water")&&i.hasAbility("Dry Skin","Storm Drain","Water Absorb")||r.hasType("Electric")&&i.hasAbility("Lightning Rod","Motor Drive","Volt Absorb")||r.hasType("Ground")&&!s.isGravity&&!r.named("Thousand Arrows")&&i.hasAbility("Levitate")||r.flags.bullet&&i.hasAbility("Bulletproof")||r.flags.sound&&i.hasAbility("Soundproof")||r.priority>0&&i.hasAbility("Queenly Majesty","Dazzling"))return l.defenderAbility=i.ability,h;if(s.hasWeather("Strong Winds")&&i.hasType("Flying")&&t.types.get(n.toID(r.type)).effectiveness.Flying>1&&(B/=2,l.weather=s.weather),r.hasType("Ground")&&!r.named("Thousand Arrows")&&!s.isGravity&&i.hasItem("Air Balloon"))return l.defenderItem=i.item,h;if(r.priority>0&&s.hasTerrain("Psychic")&&Q.isGrounded(i,s))return l.terrain=s.terrain,h;l.HPEVs=i.evs.hp+" HP";var G=Q.handleFixedDamageMoves(a,r);if(G)return a.hasAbility("Parental Bond")?(h.damage=[G,G],l.attackerAbility=a.ability):h.damage=G,h;if(r.named("Final Gambit"))return h.damage=a.curHP(),h;if(r.named("Guardian of Alola")){var I=Math.floor(3*i.curHP()/4);return s.defenderSide.isProtected&&a.item&&a.item.includes(" Z")&&(I=Math.ceil(I/4-.5)),h.damage=I,h}if(r.named("Nature's Madness")){var H=s.defenderSide.isProtected?0:Math.floor(i.curHP()/2);return h.damage=H,h}if(r.named("Spectral Thief")){var D=void 0;for(D in i.boosts)i.boosts[D]&&(a.boosts[D]+=a.hasAbility("Contrary")?-i.boosts[D]:i.boosts[D],a.stats[D]=Q.getModifiedStat(a.rawStats[D],a.boosts[D]))}r.hits>1&&(l.hits=r.hits);var W,C=a.stats.spe>i.stats.spe?"first":"last";switch(r.name){case"Payback":W="last"===C?100:50,l.moveBP=W;break;case"Bolt Beak":case"Fishious Rend":W=r.bp*("last"!==C?2:1),l.moveBP=W;break;case"Electro Ball":var O=Math.floor(a.stats.spe/i.stats.spe);W=O>=4?150:O>=3?120:O>=2?80:O>=1?60:40,l.moveBP=W;break;case"Expanding Force":W=r.bp*(Q.isGrounded(a,s)&&s.hasTerrain("Psychic")?2:1),r.target=Q.isGrounded(a,s)&&s.hasTerrain("Psychic")?"allAdjacentFoes":"normal",l.moveBP=W;break;case"Misty Explosion":W=r.bp*(s.hasTerrain("Misty")?2:1),l.moveBP=W;break;case"Rising Voltage":W=r.bp*(s.hasTerrain("Electric")?2:1),l.moveBP=W;break;case"Gyro Ball":W=Math.min(150,Math.floor(25*i.stats.spe/a.stats.spe)),l.moveBP=W;break;case"Poltergeist":W=r.bp*(i.hasItem?1:0),l.moveBP=W;break;case"Punishment":W=Math.min(200,60+20*Q.countBoosts(t,i.boosts)),l.moveBP=W;break;case"Low Kick":case"Grass Knot":var E=i.weightkg*Q.getWeightFactor(i);W=E>=200?120:E>=100?100:E>=50?80:E>=25?60:E>=10?40:20,l.moveBP=W;break;case"Hex":W=r.bp*(i.status||i.hasAbility("Comatose")?2:1),l.moveBP=W;break;case"Heavy Slam":case"Heat Crash":var L=a.weightkg*Q.getWeightFactor(a)/(i.weightkg*Q.getWeightFactor(i));W=L>=5?120:L>=4?100:L>=3?80:L>=2?60:40,l.moveBP=W;break;case"Stored Power":case"Power Trip":W=20+20*Q.countBoosts(t,a.boosts),l.moveBP=W;break;case"Acrobatics":W=a.hasItem("Flying Gem")||!a.item?110:55,l.moveBP=W;break;case"Grav Apple":W=r.bp*(s.isGravity?1.5:1),l.moveBP=W;break;case"Steel Roller":W=r.bp*(s.terrain?1:0),l.moveBP=W;break;case"Assurance":W=r.bp*(i.hasAbility("Parental Bond (Child)")?2:1);break;case"Wake-Up Slap":W=r.bp*(i.hasStatus("slp")?2:1),l.moveBP=W;break;case"Weather Ball":W=s.weather&&!s.hasWeather("Strong Winds")?100:50,l.moveBP=W;break;case"Terrain Pulse":W=s.terrain?100:50,l.moveBP=W;break;case"Fling":W=ne.getFlingPower(a.item),l.moveBP=W,l.attackerItem=a.item;break;case"Eruption":case"Water Spout":W=Math.max(1,Math.floor(150*a.curHP()/a.maxHP())),l.moveBP=W;break;case"Flail":case"Reversal":var N=Math.floor(48*a.curHP()/a.maxHP());W=N<=1?200:N<=4?150:N<=9?100:N<=16?80:N<=32?40:20,l.moveBP=W;break;case"Nature Power":W=s.terrain&&s.hasTerrain("Electric","Grassy","Psychic")?90:s.hasTerrain("Misty")?95:80;break;case"Water Shuriken":W=a.named("Greninja-Ash")&&a.hasAbility("Battle Bond")?20:15,l.moveBP=W;break;case"Lash Out":W=r.bp*(Q.countBoosts(t,a.boosts)<0?2:1),l.moveBP=W;break;case"Crush Grip":case"Wring Out":W=100*Math.floor(4096*i.curHP()/i.maxHP()),W=Math.floor(Math.floor((120*W+2048-1)/4096)/100)||1,l.moveBP=W;break;default:W=r.bp}if(0===W)return h;var V=[];8===t.num&&a.hasAbility("Technician")&&W<=60&&(V.push(6144),l.attackerAbility=a.ability);var U=r.type+" Aura",z=a.hasAbility(U),K=i.hasAbility(U),Z=z||K,j=a.hasAbility("Aura Break")||i.hasAbility("Aura Break");if(Z&&j&&(V.push(3072),l.attackerAbility=a.ability,l.defenderAbility=i.ability),a.hasAbility("Rivalry")&&![a.gender,i.gender].includes("N")&&(a.gender===i.gender?(V.push(3072),l.rivalry="buffed"):(V.push(3277),l.rivalry="nerfed"),l.attackerAbility=a.ability),r.isZ||r.isMax||!(f||b||g||S||k)?(a.hasAbility("Reckless")&&(r.recoil||r.hasCrashDamage)||a.hasAbility("Iron Fist")&&r.flags.punch)&&(V.push(4915),l.attackerAbility=a.ability):(V.push(4915),l.attackerAbility=a.ability),s.attackerSide.isBattery&&"Special"===r.category&&(V.push(5325),l.isBattery=!0),a.hasAbility("Sheer Force")&&r.secondaries&&!r.isMax?(V.push(5325),l.attackerAbility=a.ability):a.hasAbility("Sand Force")&&s.hasWeather("Sand")&&r.hasType("Rock","Ground","Steel")?(V.push(5325),l.attackerAbility=a.ability,l.weather=s.weather):(a.hasAbility("Analytic")&&"first"!==C||a.hasAbility("Tough Claws")&&r.flags.contact)&&(V.push(5325),l.attackerAbility=a.ability),Z&&!j&&(V.push(5448),z&&(l.attackerAbility=a.ability),K&&(l.defenderAbility=i.ability)),a.hasAbility("Steely Spirit")&&r.hasType("Steel")&&(V.push(6144),l.attackerAbility=a.ability),7===t.num){var _=Q.pokeRound(W*Q.chainMods(V)/4096);a.hasAbility("Technician")&&_<=60&&(V.push(6144),l.attackerAbility=a.ability)}(a.hasAbility("Flare Boost")&&a.hasStatus("brn")&&"Special"===r.category||a.hasAbility("Toxic Boost")&&a.hasStatus("psn","tox")&&"Physical"===r.category||a.hasAbility("Mega Launcher")&&r.flags.pulse||a.hasAbility("Strong Jaw")&&r.flags.bite)&&(V.push(6144),l.attackerAbility=a.ability),i.hasAbility("Heatproof")&&r.hasType("Fire")?(V.push(2048),l.defenderAbility=i.ability):i.hasAbility("Dry Skin")&&r.hasType("Fire")&&(V.push(5120),l.defenderAbility=i.ability),a.item&&r.hasType(ne.getItemBoostType(a.item))?(V.push(4915),l.attackerItem=a.item):a.hasItem("Muscle Band")&&"Physical"===r.category||a.hasItem("Wise Glasses")&&"Special"===r.category?(V.push(4505),l.attackerItem=a.item):a.hasItem("Adamant Orb")&&a.named("Dialga")&&r.hasType("Steel","Dragon")||a.hasItem("Lustrous Orb")&&a.named("Palkia")&&r.hasType("Water","Dragon")||a.hasItem("Griseous Orb")&&a.named("Giratina-Origin")&&r.hasType("Ghost","Dragon")||a.hasItem("Soul Dew")&&a.named("Latios","Latias","Latios-Mega","Latias-Mega")&&r.hasType("Psychic","Dragon")?(V.push(4915),l.attackerItem=a.item):a.hasItem(r.type+" Gem")&&(V.push(5325),l.attackerItem=a.item),r.named("Solar Beam","Solar Blade")&&s.hasWeather("Rain","Heavy Rain","Sand","Hail")?(V.push(2048),l.moveBP=W/2,l.weather=s.weather):r.named("Knock Off")&&!x&&(V.push(6144),l.moveBP=1.5*W),s.attackerSide.isHelpingHand&&(V.push(6144),l.isHelpingHand=!0),(r.named("Facade")&&a.hasStatus("brn","par","psn","tox")||r.named("Brine")&&i.curHP()<=i.maxHP()/2||r.named("Venoshock")&&i.hasStatus("psn","tox"))&&(V.push(8192),l.moveBP=2*W);var Y,q=t.num>7?5325:6144;Q.isGrounded(a,s)&&(s.hasTerrain("Electric")&&r.hasType("Electric")||s.hasTerrain("Grassy")&&r.hasType("Grass")||s.hasTerrain("Psychic")&&r.hasType("Psychic"))&&(V.push(q),l.terrain=s.terrain),Q.isGrounded(i,s)&&(s.hasTerrain("Misty")&&r.hasType("Dragon")||s.hasTerrain("Grassy")&&r.named("Bulldoze","Earthquake"))&&(V.push(2048),l.terrain=s.terrain),r.named("Breakneck Blitz","Bloom Doom","Inferno Overdrive","Hydro Vortex","Gigavolt Havoc","Subzero Slammer","Supersonic Skystrike","Savage Spin-Out","Acid Downpour","Tectonic Rage","Continental Crush","All-Out Pummeling","Shattered Psyche","Never-Ending Nightmare","Devastating Drake","Black Hole Eclipse","Corkscrew Crash","Twinkle Tackle")&&(l.moveBP=r.bp),W=Q.OF16(Math.max(1,Q.pokeRound(W*Q.chainMods(V)/4096)));var X=r.named("Foul Play")?i:a;r.named("Photon Geyser","Light That Burns The Sky")&&(r.category=X.stats.atk>X.stats.spa?"Physical":"Special");var $=r.named("Shell Side Arm")&&i.stats.def<i.stats.spd?"atk":r.named("Body Press")?"def":"Special"===r.category?"spa":"atk";l.attackEVs=r.named("Foul Play")?Q.getEVDescriptionText(t,i,$,i.nature):Q.getEVDescriptionText(t,a,$,a.nature),0===X.boosts[$]||m&&X.boosts[$]<0?Y=X.rawStats[$]:i.hasAbility("Unaware")?(Y=X.rawStats[$],l.defenderAbility=i.ability):(Y=X.stats[$],l.attackBoost=X.boosts[$]),a.hasAbility("Hustle")&&"Physical"===r.category&&(Y=Q.pokeRound(3*Y/2),l.attackerAbility=a.ability);var ee,te=[];a.hasAbility("Slow Start")&&a.abilityOn&&("Physical"===r.category||"Special"===r.category&&r.isZ)||a.hasAbility("Defeatist")&&a.curHP()<=a.maxHP()/2?(te.push(2048),l.attackerAbility=a.ability):a.hasAbility("Solar Power")&&s.hasWeather("Sun","Harsh Sunshine")&&"Special"===r.category||a.named("Cherrim")&&a.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&"Physical"===r.category||a.hasAbility("Gorilla Tactics")&&"Physical"===r.category&&!a.isDynamaxed?(te.push(6144),l.attackerAbility=a.ability,l.weather=s.weather):a.hasAbility("Guts")&&a.status&&"Physical"===r.category||a.curHP()<=a.maxHP()/3&&(a.hasAbility("Overgrow")&&r.hasType("Grass")||a.hasAbility("Blaze")&&r.hasType("Fire")||a.hasAbility("Torrent")&&r.hasType("Water")||a.hasAbility("Swarm")&&r.hasType("Bug"))||"Special"===r.category&&a.abilityOn&&a.hasAbility("Plus","Minus")?(te.push(6144),l.attackerAbility=a.ability):a.hasAbility("Flash Fire")&&a.abilityOn&&r.hasType("Fire")?(te.push(6144),l.attackerAbility="Flash Fire"):a.hasAbility("Steelworker")&&r.hasType("Steel")?(te.push(6144),l.attackerAbility=a.ability):(a.hasAbility("Stakeout")&&a.abilityOn||a.hasAbility("Water Bubble")&&r.hasType("Water")||a.hasAbility("Huge Power","Pure Power")&&"Physical"===r.category)&&(te.push(8192),l.attackerAbility=a.ability),(i.hasAbility("Thick Fat")&&r.hasType("Fire","Ice")||i.hasAbility("Water Bubble")&&r.hasType("Fire"))&&(te.push(2048),l.defenderAbility=i.ability),r.named("Pursuit")&&"out"===s.defenderSide.isSwitching&&(a.hasAbility("Technician")?te.push(4096):(te.push(8192),l.isSwitching="out")),a.hasItem("Thick Club")&&a.named("Cubone","Marowak","Marowak-Alola")&&"Physical"===r.category||a.hasItem("Deep Sea Tooth")&&a.named("Clamperl")&&"Special"===r.category||a.hasItem("Light Ball")&&a.named("Pikachu")&&!r.isZ?(te.push(8192),l.attackerItem=a.item):r.isZ||r.isMax||!(a.hasItem("Choice Band")&&"Physical"===r.category||a.hasItem("Choice Specs")&&"Special"===r.category)||(te.push(6144),l.attackerItem=a.item),Y=Q.OF16(Math.max(1,Q.pokeRound(Y*Q.chainMods(te)/4096)));var ae="Physical"===r.defensiveCategory||r.named("Shell Side Arm")&&i.stats.def<i.stats.spd,ie=ae?"def":"spd";l.defenseEVs=Q.getEVDescriptionText(t,i,ie,i.nature),0===i.boosts[ie]||m&&i.boosts[ie]>0||r.ignoreDefensive?ee=i.rawStats[ie]:a.hasAbility("Unaware")?(ee=i.rawStats[ie],l.attackerAbility=a.ability):(ee=i.stats[ie],l.defenseBoost=i.boosts[ie]),s.hasWeather("Sand")&&i.hasType("Rock")&&!ae&&(ee=Q.pokeRound(3*ee/2),l.weather=s.weather);var re=[];i.hasAbility("Marvel Scale")&&i.status&&ae?(re.push(6144),l.defenderAbility=i.ability):i.named("Cherrim")&&i.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&!ae?(re.push(6144),l.defenderAbility=i.ability,l.weather=s.weather):i.hasAbility("Grass Pelt","Dauntless Shield")&&s.hasTerrain("Grassy")&&ae?(re.push(6144),l.defenderAbility=i.ability):i.hasAbility("Fur Coat")&&ae&&(re.push(8192),l.defenderAbility=i.ability),i.hasItem("Eviolite")&&(null===(o=t.species.get(n.toID(i.name)))||void 0===o?void 0:o.nfe)||!ae&&i.hasItem("Assault Vest")?(re.push(6144),l.defenderItem=i.item):(i.hasItem("Metal Powder")&&i.named("Ditto")&&ae||i.hasItem("Deep Sea Scale")&&i.named("Clamperl")&&!ae)&&(re.push(8192),l.defenderItem=i.item),ee=Q.OF16(Math.max(1,Q.pokeRound(ee*Q.chainMods(re)/4096)));var se=Q.getBaseDamage(a.level,W,Y,ee),oe="Singles"!==s.gameType&&["allAdjacent","allAdjacentFoes"].includes(r.target);if(oe&&(se=Q.pokeRound(Q.OF32(3072*se)/4096)),a.hasAbility("Parental Bond (Child)")&&(se=Q.pokeRound(Q.OF32(1024*se)/4096)),s.hasWeather("Sun","Harsh Sunshine")&&r.hasType("Fire")||s.hasWeather("Rain","Heavy Rain")&&r.hasType("Water"))se=Q.pokeRound(Q.OF32(6144*se)/4096),l.weather=s.weather;else if(s.hasWeather("Sun")&&r.hasType("Water")||s.hasWeather("Rain")&&r.hasType("Fire"))se=Q.pokeRound(Q.OF32(2048*se)/4096),l.weather=s.weather;else if(s.hasWeather("Harsh Sunshine")&&r.hasType("Water")||s.hasWeather("Heavy Rain")&&r.hasType("Fire"))return h;i.hasItem("Electric Seed","Misty Seed","Grassy Seed","Psychic Seed")&&s.hasTerrain(i.item.substring(0,i.item.indexOf(" ")))&&ne.SEED_BOOSTED_STAT[i.item]===ie&&(l.defenderItem=i.item),m&&(se=Math.floor(Q.OF32(1.5*se)),l.isCritical=m);var le=4096;a.hasType(r.type)?a.hasAbility("Adaptability")?(le=8192,l.attackerAbility=a.ability):le=6144:a.hasAbility("Protean","Libero")&&(le=6144,l.attackerAbility=a.ability);var he=a.hasStatus("brn")&&"Physical"===r.category&&!a.hasAbility("Guts")&&!r.named("Facade");l.isBurned=he;var ce=[];if(!s.defenderSide.isReflect||"Physical"!==r.category||m||s.defenderSide.isAuroraVeil?!s.defenderSide.isLightScreen||"Special"!==r.category||m||s.defenderSide.isAuroraVeil||(ce.push("Singles"!==s.gameType?2732:2048),l.isLightScreen=!0):(ce.push("Singles"!==s.gameType?2732:2048),l.isReflect=!0),s.defenderSide.isAuroraVeil&&!m&&(ce.push("Singles"!==s.gameType?2732:2048),l.isAuroraVeil=!0),a.hasAbility("Neuroforce")&&B>1?(V.push(5120),l.attackerAbility=a.ability):a.hasAbility("Sniper")&&m?(ce.push(6144),l.attackerAbility=a.ability):a.hasAbility("Tinted Lens")&&B<1&&(ce.push(8192),l.attackerAbility=a.ability),i.isDynamaxed&&r.named("Dynamax Cannon","Behemoth Blade","Behemoth Bash")&&ce.push(8192),!i.hasAbility("Multiscale","Shadow Shield")||i.curHP()!==i.maxHP()||s.defenderSide.isSR||s.defenderSide.spikes&&!i.hasType("Flying")||a.hasAbility("Parental Bond (Child)")||(ce.push(2048),l.defenderAbility=i.ability),(i.hasAbility("Fluffy")&&r.flags.contact&&!a.hasAbility("Long Reach")||i.hasAbility("Punk Rock")&&r.flags.sound||i.hasAbility("Ice Scales")&&"Special"===r.category)&&(ce.push(2048),l.defenderAbility=i.ability),r.flags.sound&&a.hasAbility("Punk Rock")&&(ce.push(5325),l.attackerAbility=a.ability),i.hasAbility("Solid Rock","Filter","Prism Armor")&&B>1&&(ce.push(3072),l.defenderAbility=i.ability),s.defenderSide.isFriendGuard&&(ce.push(3072),l.isFriendGuard=!0),i.hasAbility("Fluffy")&&r.hasType("Fire")&&(ce.push(8192),l.defenderAbility=i.ability),a.hasItem("Expert Belt")&&B>1&&!r.isZ)ce.push(4915),l.attackerItem=a.item;else if(a.hasItem("Life Orb"))ce.push(5324),l.attackerItem=a.item;else if(a.hasItem("Metronome")&&r.timesUsedWithMetronome>=1){var de=Math.floor(r.timesUsedWithMetronome);de<=4?ce.push(4096+819*de):ce.push(8192),l.attackerItem=a.item}r.hasType(ne.getBerryResistType(i.item))&&(B>1||r.hasType("Normal"))&&!a.hasAbility("Unnerve")&&(ce.push(2048),l.defenderItem=i.item);var ue=!1;s.defenderSide.isProtected&&(a.isDynamaxed||r.isZ&&a.item&&a.item.includes(" Z"))&&(ue=!0,l.isProtected=!0);var ye,me=Q.chainMods(ce);if(a.hasAbility("Parental Bond")&&1===r.hits&&!oe){var pe=a.clone();pe.ability="Parental Bond (Child)",Q.checkMultihitBoost(t,pe,i,r,s,l),ye=e(t,pe,i,r,s).damage,l.attackerAbility=a.ability}for(var fe=[],be=0;be<16;be++)fe[be]=Q.getFinalDamage(se,be,B,he,le,me,ue);if(r.dropsStats&&r.timesUsed>1){var ge=a.hasAbility("Simple")?2:1;l.moveTurns="over "+r.timesUsed+" turns";for(var Se=a.hasItem("White Herb"),ve=!1,ke=a.boosts[$],Ae=function(e){var t=Q.getModifiedStat(Y,ke),i=0;fe=fe.map((function(r){if(e){var s=Q.getBaseDamage(a.level,W,t,ee),o=Q.getFinalDamage(s,i,B,he,le,me,ue);return i++,r+o}return r})),a.hasAbility("Contrary")?(ke=Math.min(6,ke+r.dropsStats),l.attackerAbility=a.ability):(ke=Math.max(-6,ke-r.dropsStats*ge),a.hasAbility("Simple")&&(l.attackerAbility=a.ability)),Se&&a.boosts[$]<0&&!ve&&(ke+=r.dropsStats*ge,ve=!0,l.attackerItem=a.item)},Pe=0;Pe<r.timesUsed;Pe++)Ae(Pe)}return l.attackBoost=r.named("Foul Play")?i.boosts[$]:a.boosts[$],h.damage=ye?[fe,ye]:fe,h},e.calculateBWXY=function e(t,a,i,r,s){var o;Q.checkAirLock(a,s),Q.checkAirLock(i,s),Q.checkForecast(a,s.weather),Q.checkForecast(i,s.weather),Q.checkKlutz(a),Q.checkKlutz(i),Q.checkSeedBoost(a,s),Q.checkSeedBoost(i,s),Q.computeFinalStats(t,a,i,s,"def","spd","spe"),Q.checkIntimidate(t,a,i),Q.checkIntimidate(t,i,a),Q.checkDownload(a,i),Q.checkDownload(i,a),Q.computeFinalStats(t,a,i,s,"atk","spa"),Q.checkInfiltrator(a,s.defenderSide),Q.checkInfiltrator(i,s.attackerSide);var l={attackerName:a.name,moveName:r.name,defenderName:i.name},h=new J.Result(t,a,i,r,s,0,l);if("Status"===r.category&&!r.named("Nature Power"))return h;if(s.defenderSide.isProtected&&!r.breaksProtect)return l.isProtected=!0,h;a.hasAbility("Mold Breaker","Teravolt","Turboblaze")&&(i.ability="",l.attackerAbility=a.ability);var c=r.isCrit&&!i.hasAbility("Battle Armor","Shell Armor")&&1===r.timesUsed;if(r.named("Weather Ball"))r.type=s.hasWeather("Sun","Harsh Sunshine")?"Fire":s.hasWeather("Rain","Heavy Rain")?"Water":s.hasWeather("Sand")?"Rock":s.hasWeather("Hail")?"Ice":"Normal",l.weather=s.weather,l.moveType=r.type;else if(r.named("Judgment")&&a.item&&a.item.includes("Plate"))r.type=ne.getItemBoostType(a.item);else if(r.named("Techno Blast")&&a.item&&a.item.includes("Drive"))r.type=ne.getTechnoBlast(a.item);else if(r.named("Natural Gift")&&a.item&&a.item.includes("Berry")){var d=ne.getNaturalGift(t,a.item);r.type=d.t,r.bp=d.p,l.attackerItem=a.item,l.moveBP=r.bp,l.moveType=r.type}else r.named("Nature Power")&&(r.type=s.hasTerrain("Electric")?"Electric":s.hasTerrain("Grassy")?"Grass":s.hasTerrain("Misty")?"Fairy":s.hasTerrain("Psychic")?"Psychic":"Normal");var u=!1,y=!1,m=!1,p=!1,f=r.named("Judgment","Nature Power","Techo Blast","Natural Gift","Weather Ball");if(!r.isZ&&!f){var b=r.hasType("Normal");(u=a.hasAbility("Aerilate")&&b)?r.type="Flying":(y=a.hasAbility("Pixilate")&&b)?r.type="Fairy":(m=a.hasAbility("Refrigerate")&&b)?r.type="Ice":(p=a.hasAbility("Normalize"))&&(r.type="Normal"),(y||m||u||p)&&(l.attackerAbility=a.ability)}a.hasAbility("Gale Wings")&&r.hasType("Flying")&&(r.priority=1,l.attackerAbility=a.ability);var g=a.hasAbility("Scrappy")||s.defenderSide.isForesight,S=Q.getMoveEffectiveness(t,r,i.types[0],g,s.isGravity),v=i.types[1]?Q.getMoveEffectiveness(t,r,i.types[1],g,s.isGravity):1,k=S*v,A=!i.item||i.named("Giratina-Origin")&&i.hasItem("Griseous Orb")||i.name.includes("Arceus")&&i.item.includes("Plate")||i.name.includes("Genesect")&&i.item.includes("Drive")||i.named("Groudon","Groudon-Primal")&&i.hasItem("Red Orb")||i.named("Kyogre","Kyogre-Primal")&&i.hasItem("Blue Orb");if(!A&&i.item){var P=t.items.get(n.toID(i.item));A=!(!P.megaEvolves||!i.name.includes(P.megaEvolves))}if(0===k&&r.named("Thousand Arrows"))k=1;else if(0===k&&i.hasItem("Ring Target")){var M=t.types.get(n.toID(r.type)).effectiveness;0===M[i.types[0]]?k=v:i.types[1]&&0===M[i.types[1]]&&(k=S)}if(0===k)return h;if(r.named("Sky Drop")&&(i.hasType("Flying")||i.weightkg>=200||s.isGravity)||r.named("Synchronoise")&&!i.hasType(a.types[0])&&(!a.types[1]||!i.hasType(a.types[1]))||r.named("Dream Eater")&&!i.hasStatus("slp"))return h;if(i.hasAbility("Wonder Guard")&&k<=1||r.hasType("Grass")&&i.hasAbility("Sap Sipper")||r.hasType("Fire")&&i.hasAbility("Flash Fire")||r.hasType("Water")&&i.hasAbility("Dry Skin","Storm Drain","Water Absorb")||r.hasType("Electric")&&i.hasAbility("Lightning Rod","Motor Drive","Volt Absorb")||r.hasType("Ground")&&!s.isGravity&&!r.named("Thousand Arrows")&&i.hasAbility("Levitate")||r.flags.bullet&&i.hasAbility("Bulletproof")||r.flags.sound&&i.hasAbility("Soundproof"))return l.defenderAbility=i.ability,h;if(s.hasWeather("Strong Winds")&&i.hasType("Flying")&&t.types.get(n.toID(r.type)).effectiveness.Flying>1&&(k/=2,l.weather=s.weather),r.hasType("Ground")&&!r.named("Thousand Arrows")&&!s.isGravity&&i.hasItem("Air Balloon"))return l.defenderItem=i.item,h;if(r.priority>0&&s.hasTerrain("Psychic")&&Q.isGrounded(i,s))return l.terrain=s.terrain,h;l.HPEVs=i.evs.hp+" HP";var T=Q.handleFixedDamageMoves(a,r);if(T)return a.hasAbility("Parental Bond")?(h.damage=[T,T],l.attackerAbility=a.ability):h.damage=T,h;if(r.named("Final Gambit"))return h.damage=a.curHP(),h;r.hits>1&&(l.hits=r.hits);var w,B=a.stats.spe>i.stats.spe?"first":"last";switch(r.name){case"Payback":w="last"===B?100:50,l.moveBP=w;break;case"Electro Ball":var x=Math.floor(a.stats.spe/i.stats.spe);w=x>=4?150:x>=3?120:x>=2?80:x>=1?60:40,l.moveBP=w;break;case"Gyro Ball":w=Math.min(150,Math.floor(25*i.stats.spe/a.stats.spe)),l.moveBP=w;break;case"Punishment":w=Math.min(200,60+20*Q.countBoosts(t,i.boosts)),l.moveBP=w;break;case"Low Kick":case"Grass Knot":var F=i.weightkg*Q.getWeightFactor(i);w=F>=200?120:F>=100?100:F>=50?80:F>=25?60:F>=10?40:20,l.moveBP=w;break;case"Hex":w=r.bp*(i.status?2:1),l.moveBP=w;break;case"Heavy Slam":case"Heat Crash":var R=a.weightkg*Q.getWeightFactor(a)/(i.weightkg*Q.getWeightFactor(i));w=R>=5?120:R>=4?100:R>=3?80:R>=2?60:40,l.moveBP=w;break;case"Stored Power":case"Power Trip":w=20+20*Q.countBoosts(t,a.boosts),l.moveBP=w;break;case"Acrobatics":w=a.hasItem("Flying Gem")||!a.item?110:55,l.moveBP=w;break;case"Assurance":w=r.bp*(i.hasAbility("Parental Bond (Child)")?2:1);break;case"Wake-Up Slap":w=r.bp*(i.hasStatus("slp")?2:1),l.moveBP=w;break;case"Weather Ball":w=s.weather&&!s.hasWeather("Strong Winds")?100:50,l.moveBP=w;break;case"Fling":w=ne.getFlingPower(a.item),l.moveBP=w,l.attackerItem=a.item;break;case"Eruption":case"Water Spout":w=Math.max(1,Math.floor(150*a.curHP()/a.maxHP())),l.moveBP=w;break;case"Flail":case"Reversal":var G=Math.floor(48*a.curHP()/a.maxHP());w=G<=1?200:G<=4?150:G<=9?100:G<=16?80:G<=32?40:20,l.moveBP=w;break;case"Nature Power":w=s.terrain&&s.hasTerrain("Electric","Grassy","Psychic")?90:s.hasTerrain("Misty")?95:80;break;case"Water Shuriken":w=a.named("Greninja-Ash")&&a.hasAbility("Battle Bond")?20:15,l.moveBP=w;break;case"Crush Grip":case"Wring Out":w=100*Math.floor(4096*i.curHP()/i.maxHP()),w=Math.floor(Math.floor((120*w+2048-1)/4096)/100)||1,l.moveBP=w;break;default:w=r.bp}if(0===w)return h;var I=[];a.hasAbility("Technician")&&w<=60||a.hasAbility("Flare Boost")&&a.hasStatus("brn")&&"Special"===r.category||a.hasAbility("Toxic Boost")&&a.hasStatus("psn","tox")&&"Physical"===r.category?(I.push(6144),l.attackerAbility=a.ability):a.hasAbility("Analytic")&&"first"!==B?(I.push(5325),l.attackerAbility=a.ability):a.hasAbility("Sand Force")&&s.hasWeather("Sand")&&r.hasType("Rock","Ground","Steel")?(I.push(5325),l.attackerAbility=a.ability,l.weather=s.weather):(a.hasAbility("Reckless")&&(r.recoil||r.hasCrashDamage)||a.hasAbility("Iron Fist")&&r.flags.punch)&&(I.push(4915),l.attackerAbility=a.ability),i.hasAbility("Heatproof")&&r.hasType("Fire")?(I.push(2048),l.defenderAbility=i.ability):i.hasAbility("Dry Skin")&&r.hasType("Fire")&&(I.push(5120),l.defenderAbility=i.ability),a.hasAbility("Sheer Force")&&r.secondaries&&(I.push(5325),l.attackerAbility=a.ability),a.hasAbility("Rivalry")&&![a.gender,i.gender].includes("N")&&(a.gender===i.gender?(I.push(5120),l.rivalry="buffed"):(I.push(3277),l.rivalry="nerfed"),l.attackerAbility=a.ability),a.item&&ne.getItemBoostType(a.item)===r.type?(I.push(4915),l.attackerItem=a.item):a.hasItem("Muscle Band")&&"Physical"===r.category||a.hasItem("Wise Glasses")&&"Special"===r.category?(I.push(4505),l.attackerItem=a.item):a.hasItem("Adamant Orb")&&a.named("Dialga")&&r.hasType("Steel","Dragon")||a.hasItem("Lustrous Orb")&&a.named("Palkia")&&r.hasType("Water","Dragon")||a.hasItem("Griseous Orb")&&a.named("Giratina-Origin")&&r.hasType("Ghost","Dragon")?(I.push(4915),l.attackerItem=a.item):a.hasItem(r.type+" Gem")&&(I.push(t.num>5?5325:6144),l.attackerItem=a.item),r.named("Facade")&&a.hasStatus("brn","par","psn","tox")||r.named("Brine")&&i.curHP()<=i.maxHP()/2||r.named("Venoshock")&&i.hasStatus("psn","tox")?(I.push(8192),l.moveBP=2*w):r.named("Solar Beam")&&s.hasWeather("Rain","Heavy Rain","Sand","Hail")?(I.push(2048),l.moveBP=w/2,l.weather=s.weather):t.num>5&&r.named("Knock Off")&&!A&&(I.push(6144),l.moveBP=1.5*w),s.attackerSide.isHelpingHand&&(I.push(6144),l.isHelpingHand=!0),s.attackerSide.isBattery&&"Special"===r.category&&(I.push(5324),l.isBattery=!0),u||y||m||p?(I.push(5325),l.attackerAbility=a.ability):a.hasAbility("Mega Launcher")&&r.flags.pulse||a.hasAbility("Strong Jaw")&&r.flags.bite?(I.push(6144),l.attackerAbility=a.ability):a.hasAbility("Tough Claws")&&r.flags.contact&&(I.push(5325),l.attackerAbility=a.ability);var H,D=r.type+" Aura",W=a.hasAbility(D),C=i.hasAbility(D);(W||C)&&(a.hasAbility("Aura Break")||i.hasAbility("Aura Break")?(I.push(3072),l.attackerAbility=a.ability,l.defenderAbility=i.ability):(I.push(5447),W&&(l.attackerAbility=a.ability),C&&(l.defenderAbility=i.ability))),Q.isGrounded(a,s)&&(s.hasTerrain("Electric")&&r.hasType("Electric")||s.hasTerrain("Grassy")&&r.hasType("Grass")||s.hasTerrain("Psychic")&&r.hasType("Psychic"))&&(I.push(6144),l.terrain=s.terrain),Q.isGrounded(i,s)&&(s.hasTerrain("Misty")&&r.hasType("Dragon")||s.hasTerrain("Grassy")&&r.named("Bulldoze","Earthquake"))&&(I.push(2048),l.terrain=s.terrain),w=Q.OF16(Math.max(1,Q.pokeRound(w*Q.chainMods(I)/4096)));var O=r.named("Foul Play")?i:a,E="Special"===r.category?"spa":"atk";l.attackEVs=r.named("Foul Play")?Q.getEVDescriptionText(t,i,E,i.nature):Q.getEVDescriptionText(t,a,E,a.nature),0===O.boosts[E]||c&&O.boosts[E]<0?H=O.rawStats[E]:i.hasAbility("Unaware")?(H=O.rawStats[E],l.defenderAbility=i.ability):(H=O.stats[E],l.attackBoost=O.boosts[E]),a.hasAbility("Hustle")&&"Physical"===r.category&&(H=Q.pokeRound(3*H/2),l.attackerAbility=a.ability);var L,N=[];i.hasAbility("Thick Fat")&&r.hasType("Fire","Ice")&&(N.push(2048),l.defenderAbility=i.ability),r.named("Pursuit")&&"out"===s.defenderSide.isSwitching&&(a.hasAbility("Technician")?N.push(4096):(N.push(8192),l.isSwitching="out")),a.hasAbility("Guts")&&a.status&&"Physical"===r.category||a.curHP()<=a.maxHP()/3&&(a.hasAbility("Overgrow")&&r.hasType("Grass")||a.hasAbility("Blaze")&&r.hasType("Fire")||a.hasAbility("Torrent")&&r.hasType("Water")||a.hasAbility("Swarm")&&r.hasType("Bug"))||"Special"===r.category&&a.abilityOn&&a.hasAbility("Plus","Minus")?(N.push(6144),l.attackerAbility=a.ability):a.hasAbility("Flash Fire")&&a.abilityOn&&r.hasType("Fire")?(N.push(6144),l.attackerAbility="Flash Fire"):a.hasAbility("Solar Power")&&s.hasWeather("Sun","Harsh Sunshine")&&"Special"===r.category||a.named("Cherrim")&&a.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&"Physical"===r.category?(N.push(6144),l.attackerAbility=a.ability,l.weather=s.weather):a.hasAbility("Defeatist")&&a.curHP()<=a.maxHP()/2||a.hasAbility("Slow Start")&&a.abilityOn&&"Physical"===r.category?(N.push(2048),l.attackerAbility=a.ability):a.hasAbility("Huge Power","Pure Power")&&"Physical"===r.category&&(N.push(8192),l.attackerAbility=a.ability),a.hasItem("Thick Club")&&a.named("Cubone","Marowak","Marowak-Alola")&&"Physical"===r.category||a.hasItem("Deep Sea Tooth")&&a.named("Clamperl")&&"Special"===r.category||a.hasItem("Light Ball")&&a.named("Pikachu")&&!r.isZ?(N.push(8192),l.attackerItem=a.item):(a.hasItem("Soul Dew")&&a.named("Latios","Latias","Latios-Mega","Latias-Mega")&&"Special"===r.category||a.hasItem("Choice Band")&&"Physical"===r.category||a.hasItem("Choice Specs")&&"Special"===r.category)&&(N.push(6144),l.attackerItem=a.item),H=Q.OF16(Math.max(1,Q.pokeRound(H*Q.chainMods(N)/4096)));var V="Physical"===r.defensiveCategory,U=V?"def":"spd";l.defenseEVs=Q.getEVDescriptionText(t,i,U,i.nature),0===i.boosts[U]||c&&i.boosts[U]>0||r.ignoreDefensive?L=i.rawStats[U]:a.hasAbility("Unaware")?(L=i.rawStats[U],l.attackerAbility=a.ability):(L=i.stats[U],l.defenseBoost=i.boosts[U]),s.hasWeather("Sand")&&i.hasType("Rock")&&!V&&(L=Q.pokeRound(3*L/2),l.weather=s.weather);var z=[];i.hasAbility("Marvel Scale")&&i.status&&V?(z.push(6144),l.defenderAbility=i.ability):i.named("Cherrim")&&i.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&!V&&(z.push(6144),l.defenderAbility=i.ability,l.weather=s.weather),s.hasTerrain("Grassy")&&i.hasAbility("Grass Pelt")&&V&&(z.push(6144),l.defenderAbility=i.ability),(!V&&i.hasItem("Soul Dew")&&i.named("Latios","Latias","Latios-Mega","Latias-Mega")||i.hasItem("Eviolite")&&(null===(o=t.species.get(n.toID(i.name)))||void 0===o?void 0:o.nfe)||!V&&i.hasItem("Assault Vest"))&&(z.push(6144),l.defenderItem=i.item),(i.hasItem("Metal Powder")&&i.named("Ditto")&&V||i.hasItem("Deep Sea Scale")&&i.named("Clamperl")&&!V)&&(z.push(8192),l.defenderItem=i.item),i.hasAbility("Fur Coat")&&V&&(z.push(8192),l.defenderAbility=i.ability),L=Q.OF16(Math.max(1,Q.pokeRound(L*Q.chainMods(z)/4096)));var K=Q.getBaseDamage(a.level,w,H,L),Z="Singles"!==s.gameType&&["allAdjacent","allAdjacentFoes"].includes(r.target);if(Z&&(K=Q.pokeRound(Q.OF32(3072*K)/4096)),a.hasAbility("Parental Bond (Child)")&&(K=Q.pokeRound(Q.OF32(2048*K)/4096)),s.hasWeather("Sun","Harsh Sunshine")&&r.hasType("Fire")||s.hasWeather("Rain","Heavy Rain")&&r.hasType("Water"))K=Q.pokeRound(Q.OF32(6144*K)/4096),l.weather=s.weather;else if(s.hasWeather("Sun")&&r.hasType("Water")||s.hasWeather("Rain")&&r.hasType("Fire"))K=Q.pokeRound(Q.OF32(2048*K)/4096),l.weather=s.weather;else if(s.hasWeather("Harsh Sunshine")&&r.hasType("Water")||s.hasWeather("Heavy Rain")&&r.hasType("Fire"))return h;c&&(K=Math.floor(Q.OF32(K*(t.num>5?1.5:2))),l.isCritical=c);var j=4096;a.hasType(r.type)?a.hasAbility("Adaptability")?(j=8192,l.attackerAbility=a.ability):j=6144:a.hasAbility("Protean")&&(j=6144,l.attackerAbility=a.ability);var _=a.hasStatus("brn")&&"Physical"===r.category&&!a.hasAbility("Guts")&&!(r.named("Facade")&&6===t.num);l.isBurned=_;var Y=[];if(s.defenderSide.isReflect&&"Physical"===r.category&&!c?(Y.push("Singles"!==s.gameType?t.num>5?2732:2703:2048),l.isReflect=!0):s.defenderSide.isLightScreen&&"Special"===r.category&&!c&&(Y.push("Singles"!==s.gameType?t.num>5?2732:2703:2048),l.isLightScreen=!0),!i.hasAbility("Multiscale")||i.curHP()!==i.maxHP()||s.defenderSide.isSR||s.defenderSide.spikes&&!i.hasType("Flying")||a.hasAbility("Parental Bond (Child)")||(Y.push(2048),l.defenderAbility=i.ability),a.hasAbility("Tinted Lens")&&k<1&&(Y.push(8192),l.attackerAbility=a.ability),s.defenderSide.isFriendGuard&&(Y.push(3072),l.isFriendGuard=!0),a.hasAbility("Sniper")&&c&&(Y.push(6144),l.attackerAbility=a.ability),i.hasAbility("Solid Rock","Filter")&&k>1&&(Y.push(3072),l.defenderAbility=i.ability),a.hasItem("Metronome")&&r.timesUsedWithMetronome>=1){var q=Math.floor(r.timesUsedWithMetronome);q<=4?Y.push(4096+819*q):Y.push(8192),l.attackerItem=a.item}a.hasItem("Expert Belt")&&k>1&&!r.isZ?(Y.push(4915),l.attackerItem=a.item):a.hasItem("Life Orb")&&(Y.push(5324),l.attackerItem=a.item),r.hasType(ne.getBerryResistType(i.item))&&(k>1||r.hasType("Normal"))&&!a.hasAbility("Unnerve")&&(Y.push(2048),l.defenderItem=i.item),s.defenderSide.isProtected&&r.isZ&&a.item&&a.item.includes(" Z")&&(Y.push(1024),l.isProtected=!0);var X,$=Q.chainMods(Y);if(a.hasAbility("Parental Bond")&&1===r.hits&&!Z){var ee=a.clone();ee.ability="Parental Bond (Child)",Q.checkMultihitBoost(t,ee,i,r,s,l),X=e(t,ee,i,r,s).damage,l.attackerAbility=a.ability}for(var te=[],ae=0;ae<16;ae++)te[ae]=Q.getFinalDamage(K,ae,k,_,j,$);if(r.dropsStats&&(r.timesUsed||0)>1){var ie=a.hasAbility("Simple")?2:1;l.moveTurns="over "+r.timesUsed+" turns";for(var re=a.hasItem("White Herb"),se=!1,oe=a.boosts[E],le=function(e){var t=Q.getModifiedStat(H,oe),i=0;te=te.map((function(r){if(e){var s=Q.getBaseDamage(a.level,w,t,L),o=Q.getFinalDamage(s,i,k,_,j,$);return i++,r+o}return r})),a.hasAbility("Contrary")?(oe=Math.min(6,oe+r.dropsStats),l.attackerAbility=a.ability):(oe=Math.max(-6,oe-r.dropsStats*ie),a.hasAbility("Simple")&&(l.attackerAbility=a.ability)),re&&a.boosts[E]<0&&!se&&(oe+=r.dropsStats*ie,se=!0,l.attackerItem=a.item)},he=0;he<r.timesUsed;he++)le(he)}return l.attackBoost=r.named("Foul Play")?i.boosts[E]:a.boosts[E],h.damage=X?[te,X]:te,h},e.calculateDPP=function(e,t,a,i,r){n.checkAirLock(t,r),n.checkAirLock(a,r),n.checkForecast(t,r.weather),n.checkForecast(a,r.weather),n.checkKlutz(t),n.checkKlutz(a),n.checkIntimidate(e,t,a),n.checkIntimidate(e,a,t),n.checkDownload(t,a),n.checkDownload(a,t),t.stats.spe=n.getFinalSpeed(e,t,r,r.attackerSide),a.stats.spe=n.getFinalSpeed(e,a,r,r.defenderSide);var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category&&!i.named("Nature Power"))return o;if(r.defenderSide.isProtected&&!i.breaksProtect)return s.isProtected=!0,o;t.hasAbility("Mold Breaker")&&(a.ability="",s.attackerAbility=t.ability);var l=i.isCrit&&!a.hasAbility("Battle Armor","Shell Armor"),h=i.bp;if(i.named("Weather Ball"))r.hasWeather("Sun")?(i.type="Fire",h*=2):r.hasWeather("Rain")?(i.type="Water",h*=2):r.hasWeather("Sand")?(i.type="Rock",h*=2):r.hasWeather("Hail")?(i.type="Ice",h*=2):i.type="Normal",s.weather=r.weather,s.moveType=i.type,s.moveBP=h;else if(i.named("Judgment")&&t.item&&t.item.includes("Plate"))i.type=ne.getItemBoostType(t.item);else if(i.named("Natural Gift")&&t.item&&t.item.includes("Berry")){var c=ne.getNaturalGift(e,t.item);i.type=c.t,i.bp=c.p,s.attackerItem=t.item,s.moveBP=i.bp,s.moveType=i.type}t.hasAbility("Normalize")&&(i.type="Normal",s.attackerAbility=t.ability);var d=t.hasAbility("Scrappy")||r.defenderSide.isForesight,u=n.getMoveEffectiveness(e,i,a.types[0],d,r.isGravity),y=a.types[1]?n.getMoveEffectiveness(e,i,a.types[1],d,r.isGravity):1,m=u*y;if(0===m)return o;if(!(i.hasType("???")||i.named("Fire Fang"))&&a.hasAbility("Wonder Guard")&&m<=1||i.hasType("Fire")&&a.hasAbility("Flash Fire")||i.hasType("Water")&&a.hasAbility("Dry Skin","Water Absorb")||i.hasType("Electric")&&a.hasAbility("Motor Drive","Volt Absorb")||i.hasType("Ground")&&!r.isGravity&&a.hasAbility("Levitate")||i.flags.sound&&a.hasAbility("Soundproof"))return s.defenderAbility=a.ability,o;s.HPEVs=a.evs.hp+" HP";var p=n.handleFixedDamageMoves(t,i);if(p)return o.damage=p,o;i.hits>1&&(s.hits=i.hits);var f=t.stats.spe>a.stats.spe?"first":"last";switch(i.name){case"Brine":a.curHP()<=a.maxHP()/2&&(h*=2,s.moveBP=h);break;case"Eruption":case"Water Spout":h=Math.max(1,Math.floor(h*t.curHP()/t.maxHP())),s.moveBP=h;break;case"Facade":t.hasStatus("par","psn","tox","brn")&&(h=2*i.bp,s.moveBP=h);break;case"Flail":case"Reversal":var b=Math.floor(48*t.curHP()/t.maxHP());h=b<=1?200:b<=4?150:b<=9?100:b<=16?80:b<=32?40:20,s.moveBP=h;break;case"Fling":h=ne.getFlingPower(t.item),s.moveBP=h,s.attackerItem=t.item;break;case"Grass Knot":case"Low Kick":var g=a.weightkg;h=g>=200?120:g>=100?100:g>=50?80:g>=25?60:g>=10?40:20,s.moveBP=h;break;case"Gyro Ball":h=Math.min(150,Math.floor(25*a.stats.spe/t.stats.spe)),s.moveBP=h;break;case"Payback":"first"!==f&&(h*=2,s.moveBP=h);break;case"Punishment":var S=n.countBoosts(e,a.boosts);S>0&&(h=Math.min(200,h+20*S),s.moveBP=h);break;case"Wake-Up Slap":a.hasStatus("slp")&&(h*=2,s.moveBP=h);break;case"Crush Grip":case"Wring Out":h=Math.floor(120*a.curHP()/a.maxHP())+1,s.moveBP=h;break;default:h=i.bp}if(0===h)return o;r.attackerSide.isHelpingHand&&(h=Math.floor(1.5*h),s.isHelpingHand=!0);var v="Physical"===i.category;t.hasItem("Muscle Band")&&v||t.hasItem("Wise Glasses")&&!v?(h=Math.floor(1.1*h),s.attackerItem=t.item):(i.hasType(ne.getItemBoostType(t.item))||t.hasItem("Adamant Orb")&&t.named("Dialga")&&i.hasType("Steel","Dragon")||t.hasItem("Lustrous Orb")&&t.named("Palkia")&&i.hasType("Water","Dragon")||t.hasItem("Griseous Orb")&&t.named("Giratina-Origin")&&i.hasType("Ghost","Dragon"))&&(h=Math.floor(1.2*h),s.attackerItem=t.item),t.hasAbility("Reckless")&&(i.recoil||i.hasCrashDamage)||t.hasAbility("Iron Fist")&&i.flags.punch?(h=Math.floor(1.2*h),s.attackerAbility=t.ability):(t.curHP()<=t.maxHP()/3&&(t.hasAbility("Overgrow")&&i.hasType("Grass")||t.hasAbility("Blaze")&&i.hasType("Fire")||t.hasAbility("Torrent")&&i.hasType("Water")||t.hasAbility("Swarm")&&i.hasType("Bug"))||t.hasAbility("Technician")&&h<=60)&&(h=Math.floor(1.5*h),s.attackerAbility=t.ability),a.hasAbility("Heatproof")&&i.hasType("Fire")||a.hasAbility("Thick Fat")&&i.hasType("Fire","Ice")?(h=Math.floor(.5*h),s.defenderAbility=a.ability):a.hasAbility("Dry Skin")&&i.hasType("Fire")&&(h=Math.floor(1.25*h),s.defenderAbility=a.ability);var k,A=v?"atk":"spa";s.attackEVs=n.getEVDescriptionText(e,t,A,t.nature);var P=t.boosts[A],M=t.rawStats[A];0===P||l&&P<0?k=M:a.hasAbility("Unaware")?(k=M,s.defenderAbility=a.ability):t.hasAbility("Simple")?(k=le(M,P),s.attackerAbility=t.ability,s.attackBoost=P):(k=n.getModifiedStat(M,P),s.attackBoost=P),v&&t.hasAbility("Pure Power","Huge Power")?(k*=2,s.attackerAbility=t.ability):r.hasWeather("Sun")&&t.hasAbility(v?"Flower Gift":"Solar Power")?(k=Math.floor(1.5*k),s.attackerAbility=t.ability,s.weather=r.weather):v&&(t.hasAbility("Hustle")||t.hasAbility("Guts")&&t.status)||!v&&t.abilityOn&&t.hasAbility("Plus","Minus")?(k=Math.floor(1.5*k),s.attackerAbility=t.ability):v&&t.hasAbility("Slow Start")&&t.abilityOn&&(k=Math.floor(k/2),s.attackerAbility=t.ability),(v?t.hasItem("Choice Band"):t.hasItem("Choice Specs"))||!v&&t.hasItem("Soul Dew")&&t.named("Latios","Latias")?(k=Math.floor(1.5*k),s.attackerItem=t.item):(t.hasItem("Light Ball")&&t.named("Pikachu")||t.hasItem("Thick Club")&&t.named("Cubone","Marowak")&&v||t.hasItem("Deep Sea Tooth")&&t.named("Clamperl")&&!v)&&(k*=2,s.attackerItem=t.item);var T,w=v?"def":"spd";s.defenseEVs=n.getEVDescriptionText(e,a,w,a.nature);var B=a.boosts[w],x=a.rawStats[w];0===B||l&&B>0?T=x:t.hasAbility("Unaware")?(T=x,s.attackerAbility=t.ability):a.hasAbility("Simple")?(T=le(x,B),s.defenderAbility=a.ability,s.defenseBoost=B):(T=n.getModifiedStat(x,B),s.defenseBoost=B),a.hasAbility("Marvel Scale")&&a.status&&v?(T=Math.floor(1.5*T),s.defenderAbility=a.ability):a.hasAbility("Flower Gift")&&r.hasWeather("Sun")&&!v&&(T=Math.floor(1.5*T),s.defenderAbility=a.ability,s.weather=r.weather),a.hasItem("Soul Dew")&&a.named("Latios","Latias")&&!v?(T=Math.floor(1.5*T),s.defenderItem=a.item):(a.hasItem("Deep Sea Scale")&&a.named("Clamperl")&&!v||a.hasItem("Metal Powder")&&a.named("Ditto")&&v)&&(T*=2,s.defenderItem=a.item),r.hasWeather("Sand")&&a.hasType("Rock")&&!v&&(T=Math.floor(1.5*T),s.weather=r.weather),(i.named("Explosion")||i.named("Self-Destruct"))&&(T=Math.floor(.5*T)),T<1&&(T=1);var F=Math.floor(Math.floor(Math.floor(2*t.level/5+2)*h*k/50)/T);if(t.hasStatus("brn")&&v&&!t.hasAbility("Guts")&&(F=Math.floor(.5*F),s.isBurned=!0),!l){var R="Singles"!==r.gameType?2/3:.5;v&&r.defenderSide.isReflect?(F=Math.floor(F*R),s.isReflect=!0):!v&&r.defenderSide.isLightScreen&&(F=Math.floor(F*R),s.isLightScreen=!0)}"Singles"!==r.gameType&&["allAdjacent","allAdjacentFoes"].includes(i.target)&&(F=Math.floor(3*F/4)),r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(F=Math.floor(1.5*F),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&i.hasType("Fire")||i.named("Solar Beam")&&r.hasWeather("Rain","Sand","Hail"))&&(F=Math.floor(.5*F),s.weather=r.weather),t.hasAbility("Flash Fire")&&t.abilityOn&&i.hasType("Fire")&&(F=Math.floor(1.5*F),s.attackerAbility="Flash Fire"),F+=2,l&&(t.hasAbility("Sniper")?(F*=3,s.attackerAbility=t.ability):F*=2,s.isCritical=l),t.hasItem("Life Orb")&&(F=Math.floor(1.3*F),s.attackerItem=t.item),i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(t.hasAbility("Technician")?F=Math.floor(1*F):(F=Math.floor(2*F),s.isSwitching="out"));var G=1;i.hasType.apply(i,N(t.types))&&(t.hasAbility("Adaptability")?(G=2,s.attackerAbility=t.ability):G=1.5);var I=1;a.hasAbility("Filter","Solid Rock")&&m>1&&(I=.75,s.defenderAbility=a.ability);var H=1;t.hasItem("Expert Belt")&&m>1&&(H=1.2,s.attackerItem=t.item);var D=1;t.hasAbility("Tinted Lens")&&m<1&&(D=2,s.attackerAbility=t.ability);var W=1;i.hasType(ne.getBerryResistType(a.item))&&(m>1||i.hasType("Normal"))&&(W=.5,s.defenderItem=a.item);for(var C=[],O=0;O<16;O++)C[O]=Math.floor(F*(85+O)/100),C[O]=Math.floor(C[O]*G),C[O]=Math.floor(C[O]*u),C[O]=Math.floor(C[O]*y),C[O]=Math.floor(C[O]*I),C[O]=Math.floor(C[O]*H),C[O]=Math.floor(C[O]*D),C[O]=Math.floor(C[O]*W),C[O]=Math.max(1,C[O]);return o.damage=C,o},e.calculateADV=function(e,t,a,i,r){Q.checkAirLock(t,r),Q.checkAirLock(a,r),Q.checkForecast(t,r.weather),Q.checkForecast(a,r.weather),Q.checkIntimidate(e,t,a),Q.checkIntimidate(e,a,t),t.stats.spe=Q.getFinalSpeed(e,t,r,r.attackerSide),a.stats.spe=Q.getFinalSpeed(e,a,r,r.defenderSide);var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category&&!i.named("Nature Power"))return o;if(r.defenderSide.isProtected)return s.isProtected=!0,o;i.named("Weather Ball")&&(i.type=r.hasWeather("Sun")?"Fire":r.hasWeather("Rain")?"Water":r.hasWeather("Sand")?"Rock":r.hasWeather("Hail")?"Ice":"Normal",i.category="Rock"===i.type?"Physical":"Special",s.weather=r.weather,s.moveType=i.type,s.moveBP=i.bp);var n=Q.getMoveEffectiveness(e,i,a.types[0],r.defenderSide.isForesight)*(a.types[1]?Q.getMoveEffectiveness(e,i,a.types[1],r.defenderSide.isForesight):1);if(0===n)return o;if(a.hasAbility("Flash Fire")&&i.hasType("Fire")||a.hasAbility("Levitate")&&i.hasType("Ground")||a.hasAbility("Volt Absorb")&&i.hasType("Electric")||a.hasAbility("Water Absorb")&&i.hasType("Water")||a.hasAbility("Wonder Guard")&&!i.hasType("???")&&n<=1||a.hasAbility("Soundproof")&&i.flags.sound)return s.defenderAbility=a.ability,o;s.HPEVs=a.evs.hp+" HP";var l,h=Q.handleFixedDamageMoves(t,i);if(h)return o.damage=h,o;switch(i.hits>1&&(s.hits=i.hits),i.name){case"Flail":case"Reversal":var c=Math.floor(48*t.curHP()/t.maxHP());l=c<=1?200:c<=4?150:c<=9?100:c<=16?80:c<=32?40:20,s.moveBP=l;break;case"Eruption":case"Water Spout":l=Math.max(1,Math.floor(150*t.curHP()/t.maxHP())),s.moveBP=l;break;case"Low Kick":var d=a.weightkg;l=d>=200?120:d>=100?100:d>=50?80:d>=25?60:d>=10?40:20,s.moveBP=l;break;default:l=i.bp}if(0===l)return o;var u="Physical"===i.category,y=u?"atk":"spa";s.attackEVs=Q.getEVDescriptionText(e,t,y,t.nature);var m=u?"def":"spd";s.defenseEVs=Q.getEVDescriptionText(e,a,m,a.nature);var p=t.rawStats[y],f=a.rawStats[m];u&&t.hasAbility("Huge Power","Pure Power")&&(p*=2,s.attackerAbility=t.ability),!t.hasItem("Sea Incense")&&i.hasType(ne.getItemBoostType(t.item))?(p=Math.floor(1.1*p),s.attackerItem=t.item):t.hasItem("Sea Incense")&&i.hasType("Water")?(p=Math.floor(1.05*p),s.attackerItem=t.item):u&&t.hasItem("Choice Band")||!u&&t.hasItem("Soul Dew")&&t.named("Latios","Latias")?(p=Math.floor(1.5*p),s.attackerItem=t.item):(!u&&t.hasItem("Deep Sea Tooth")&&t.named("Clamperl")||!u&&t.hasItem("Light Ball")&&t.named("Pikachu")||u&&t.hasItem("Thick Club")&&t.named("Cubone","Marowak"))&&(p*=2,s.attackerItem=t.item),!u&&a.hasItem("Soul Dew")&&a.named("Latios","Latias")?(f=Math.floor(1.5*f),s.defenderItem=a.item):(!u&&a.hasItem("Deep Sea Scale")&&a.named("Clamperl")||u&&a.hasItem("Metal Powder")&&a.named("Ditto"))&&(f*=2,s.defenderItem=a.item),a.hasAbility("Thick Fat")&&i.hasType("Fire","Ice")?(p=Math.floor(p/2),s.defenderAbility=a.ability):u&&a.hasAbility("Marvel Scale")&&a.status&&(f=Math.floor(1.5*f),s.defenderAbility=a.ability),u&&(t.hasAbility("Hustle")||t.hasAbility("Guts")&&t.status)||!u&&t.abilityOn&&t.hasAbility("Plus","Minus")?(p=Math.floor(1.5*p),s.attackerAbility=t.ability):t.curHP()<=t.maxHP()/3&&(t.hasAbility("Overgrow")&&i.hasType("Grass")||t.hasAbility("Blaze")&&i.hasType("Fire")||t.hasAbility("Torrent")&&i.hasType("Water")||t.hasAbility("Swarm")&&i.hasType("Bug"))&&(l=Math.floor(1.5*l),s.attackerAbility=t.ability),i.named("Explosion","Self-Destruct")&&(f=Math.floor(f/2));var b=i.isCrit&&!a.hasAbility("Battle Armor","Shell Armor"),g=t.boosts[y],S=a.boosts[m];(g>0||!b&&g<0)&&(p=Q.getModifiedStat(p,g),s.attackBoost=g),(S<0||!b&&S>0)&&(f=Q.getModifiedStat(f,S),s.defenseBoost=S);var v=t.level,k=Math.floor(Math.floor(Math.floor(2*v/5+2)*p*l/f)/50);if(t.hasStatus("brn")&&u&&!t.hasAbility("Guts")&&(k=Math.floor(k/2),s.isBurned=!0),!b){var A="Singles"!==r.gameType?2/3:.5;u&&r.defenderSide.isReflect?(k=Math.floor(k*A),s.isReflect=!0):!u&&r.defenderSide.isLightScreen&&(k=Math.floor(k*A),s.isLightScreen=!0)}i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(k=Math.floor(2*k),s.isSwitching="out"),"Singles"!==r.gameType&&"allAdjacentFoes"===i.target&&(k=Math.floor(k/2)),r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(k=Math.floor(1.5*k),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&i.hasType("Fire")||i.named("Solar Beam")&&r.hasWeather("Rain","Sand","Hail"))&&(k=Math.floor(k/2),s.weather=r.weather),t.hasAbility("Flash Fire")&&t.abilityOn&&i.hasType("Fire")&&(k=Math.floor(1.5*k),s.attackerAbility="Flash Fire"),k=("Physical"===i.category?Math.max(1,k):k)+2,b&&(k*=2,s.isCritical=!0),i.named("Weather Ball")&&r.weather&&(k*=2,s.moveBP=2*l),r.attackerSide.isHelpingHand&&(k=Math.floor(1.5*k),s.isHelpingHand=!0),i.hasType.apply(i,N(t.types))&&(k=Math.floor(1.5*k)),k=Math.floor(k*n),o.damage=[];for(var P=85;P<=100;P++)o.damage[P-85]=Math.max(1,Math.floor(k*P/100));return o},e.calculateRBYGSC=function(e,t,a,i,r){Q.computeFinalStats(e,t,a,r,"atk","def","spa","spd","spe");var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category)return o;if(r.defenderSide.isProtected)return s.isProtected=!0,o;if(1===e.num&&(n=Q.handleFixedDamageMoves(t,i)))return o.damage=n,o;var n,l=Q.getMoveEffectiveness(e,i,a.types[0],r.defenderSide.isForesight)*(a.types[1]?Q.getMoveEffectiveness(e,i,a.types[1],r.defenderSide.isForesight):1);if(0===l)return o;if(2===e.num&&(n=Q.handleFixedDamageMoves(t,i)))return o.damage=n,o;if(i.hits>1&&(s.hits=i.hits),i.named("Flail","Reversal")){i.isCrit=!1;var h=Math.floor(48*t.curHP()/t.maxHP());i.bp=h<=1?200:h<=4?150:h<=9?100:h<=16?80:h<=32?40:20,s.moveBP=i.bp}else i.named("Present")&&!i.bp&&(i.bp=40);if(0===i.bp)return o;var c="Physical"===i.category,d=c?"atk":"spa",u=c?"def":"spd",y=t.stats[d],m=a.stats[u],p=i.isCrit&&(1===e.num||2===e.num&&t.boosts[d]<=a.boosts[u]),f=t.level;if(p?(y=t.rawStats[d],m=a.rawStats[u],1===e.num&&(f*=2,s.isCritical=!0)):(0!==t.boosts[d]&&(s.attackBoost=t.boosts[d]),0!==a.boosts[u]&&(s.defenseBoost=a.boosts[u]),c&&t.hasStatus("brn")&&(y=Math.floor(y/2),s.isBurned=!0)),i.named("Explosion","Self-Destruct")&&(m=Math.floor(m/2)),p||(c&&r.defenderSide.isReflect?(m*=2,s.isReflect=!0):!c&&r.defenderSide.isLightScreen&&(m*=2,s.isLightScreen=!0)),(t.named("Pikachu")&&t.hasItem("Light Ball")&&!c||t.named("Cubone","Marowak")&&t.hasItem("Thick Club")&&c)&&(y*=2,s.attackerItem=t.item),(y>255||m>255)&&(y=Math.floor(y/4)%256,m=Math.floor(m/4)%256),i.named("Present")){var b={Normal:0,Fighting:1,Flying:2,Poison:3,Ground:4,Rock:5,Bug:7,Ghost:8,Steel:9,"???":19,Fire:20,Water:21,Grass:22,Electric:23,Psychic:24,Ice:25,Dragon:26,Dark:27};y=10,m=Math.max(b[t.types[1]?t.types[1]:t.types[0]],1),f=Math.max(b[a.types[1]?a.types[1]:a.types[0]],1)}a.named("Ditto")&&a.hasItem("Metal Powder")&&(m=Math.floor(1.5*m),s.defenderItem=a.item);var g=Math.floor(Math.floor(Math.floor(2*f/5+2)*Math.max(1,y)*i.bp/Math.max(1,m))/50);2===e.num&&i.isCrit&&(g*=2,s.isCritical=!0),i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(g=Math.floor(2*g),s.isSwitching="out");var S=t.hasItem("Dragon Fang")?void 0:ne.getItemBoostType(t.hasItem("Dragon Scale")?"Dragon Fang":t.item);if(i.hasType(S)&&(g=Math.floor(1.1*g),s.attackerItem=t.item),g=Math.min(997,g)+2,r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(g=Math.floor(1.5*g),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&(i.hasType("Fire")||i.named("Solar Beam")))&&(g=Math.floor(g/2),s.weather=r.weather),i.hasType.apply(i,N(t.types))&&(g=Math.floor(1.5*g)),g=Math.floor(g*l),i.named("Flail","Reversal"))return o.damage=g,o;o.damage=[];for(var v=217;v<=255;v++)o.damage[v-217]=Math.floor(g*v/255);return o};var he=e,ce=e,de=e,ue=e,ye=e,me=e,pe=[function(){},ce.calculateRBYGSC,ce.calculateRBYGSC,de.calculateADV,ue.calculateDPP,ye.calculateBWXY,ye.calculateBWXY,me.calculateSMSS,me.calculateSMSS];e.calculate=function(e,t,a,i,r){return pe[e.num](e,t.clone(),a.clone(),i.clone(),r?r.clone():new he.Field)},window.calc=Object.assign(window.calc||{},{Field:e.Field,Side:e.Side,Pokemon:e.Pokemon,Move:e.Move,calculate:e.calculate,Result:e.Result,toID:e.toID,STATS:e.STATS,Stats:e.Stats})}();
\ No newline at end of file
+var _this=this;!function(){"use strict";var e={};e.toID=function(e){return(""+e).toLowerCase().replace(/[^a-z0-9]+/g,"")},e.error=function(e,t){if(e)throw new Error(t);console.log(t)},e.assignWithout=function(e,t,a){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!a.has(i)&&(e[i]=t[i])};var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"},a=t.toString,i=t.hasOwnProperty;function r(e){return"function"===s(e)}function s(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?t[a.call(e)]||"object":typeof e}function o(e){if("object"!==s(e)||e.nodeType||function(e){return null!=e&&e===e.window}(e))return!1;try{if(e.constructor&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0}e.extend=function e(){for(var t,a,i,s,n,l,h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];var d=h[0]||{},u=1,y=!1,m=h.length;for("boolean"==typeof d&&(y=d,d=h[1]||{},u=2),"object"==typeof d||r(d)||(d={}),m===u&&(d=this,--u);u<m;u++)if(null!=(t=h[u]))for(a in t)i=d[a],d!==(s=t[a])&&(y&&s&&(o(s)||(n=Array.isArray(s)))?(n?(n=!1,l=i&&Array.isArray(i)?i:[]):l=i&&o(i)?i:{},d[a]=e(y,l,s)):void 0!==s&&(d[a]=s));return d};var n=e,l=["hp","atk","def","spa","spd","spe"],h=l,c=l,d=l,u=l,y=l,m=l;e.STATS=[[],["hp","atk","def","spc","spe"],l,h,c,d,u,y,m];var p=["Fighting","Flying","Poison","Ground","Rock","Bug","Ghost","Steel","Fire","Water","Grass","Electric","Psychic","Ice","Dragon","Dark"],f={Bug:{ivs:{atk:30,def:30,spd:30},dvs:{atk:13,def:13}},Dark:{ivs:{},dvs:{}},Dragon:{ivs:{atk:30},dvs:{def:14}},Electric:{ivs:{spa:30},dvs:{atk:14}},Fighting:{ivs:{def:30,spa:30,spd:30,spe:30},dvs:{atk:12,def:12}},Fire:{ivs:{atk:30,spa:30,spe:30},dvs:{atk:14,def:12}},Flying:{ivs:{hp:30,atk:30,def:30,spa:30,spd:30},dvs:{atk:12,def:13}},Ghost:{ivs:{def:30,spd:30},dvs:{atk:13,def:14}},Grass:{ivs:{atk:30,spa:30},dvs:{atk:14,def:14}},Ground:{ivs:{spa:30,spd:30},dvs:{atk:12}},Ice:{ivs:{atk:30,def:30},dvs:{def:13}},Poison:{ivs:{def:30,spa:30,spd:30},dvs:{atk:12,def:14}},Psychic:{ivs:{atk:30,spe:30},dvs:{def:12}},Rock:{ivs:{def:30,spd:30,spe:30},dvs:{atk:13,def:12}},Steel:{ivs:{spd:30},dvs:{atk:13}},Water:{ivs:{atk:30,def:30,spa:30},dvs:{atk:14,def:13}}};e.Stats=new(function(){function t(){}return t.prototype.displayStat=function(e){switch(e){case"hp":return"HP";case"atk":return"Atk";case"def":return"Def";case"spa":return"SpA";case"spd":return"SpD";case"spe":return"Spe";case"spc":return"Spc";default:throw new Error("unknown stat "+e)}},t.prototype.shortForm=function(e){switch(e){case"hp":return"hp";case"atk":return"at";case"def":return"df";case"spa":return"sa";case"spd":return"sd";case"spe":return"sp";case"spc":return"sl"}},t.prototype.getHPDV=function(e){return this.IVToDV(e.atk)%2*8+this.IVToDV(e.def)%2*4+this.IVToDV(e.spe)%2*2+this.IVToDV(e.spc)%2},t.prototype.IVToDV=function(e){return Math.floor(e/2)},t.prototype.DVToIV=function(e){return 2*e},t.prototype.DVsToIVs=function(t){var a,i={};for(a in t)i[a]=e.Stats.DVToIV(t[a]);return i},t.prototype.calcStat=function(e,t,a,i,r,s,o){if(e.num<1||e.num>8)throw new Error("Invalid generation "+e.num);return e.num<3?this.calcStatRBY(t,a,i,s):this.calcStatADV(e.natures,t,a,i,r,s,o)},t.prototype.calcStatADV=function(e,t,a,i,r,s,o){if("hp"===t)return 1===a?a:Math.floor((2*a+i+Math.floor(r/4))*s/100)+s+10;var l=[void 0,void 0];if(o){var h=e.get(n.toID(o));l=[null==h?void 0:h.plus,null==h?void 0:h.minus]}var c=l[0]===t&&l[1]===t?1:l[0]===t?1.1:l[1]===t?.9:1;return Math.floor((Math.floor((2*a+i+Math.floor(r/4))*s/100)+5)*c)},t.prototype.calcStatRBY=function(e,t,a,i){return this.calcStatRBYFromDV(e,t,this.IVToDV(a),i)},t.prototype.calcStatRBYFromDV=function(e,t,a,i){return"hp"===e?Math.floor((2*(t+a)+63)*i/100)+i+10:Math.floor((2*(t+a)+63)*i/100)+5},t.prototype.getHiddenPowerIVs=function(t,a){var i=f[a];if(i)return 2===t.num?e.Stats.DVsToIVs(i.dvs):i.ivs},t.prototype.getHiddenPower=function(e,t){var a=function(e,t){return void 0===t&&(t=0),t?(e>>>0)%Math.pow(2,t):e>>>0};if(e.num<=2){var i=a(t.atk/2),r=a(t.def/2),s=a(t.spe/2),o=a(t.spa/2);return{type:p[i%4*4+r%4],power:a((5*((o>>3)+2*(s>>3)+4*(r>>3)+8*(i>>3))+o%4)/2+31)}}var n=0,l=0,h=1;for(var c in{hp:31,atk:31,def:31,spe:31,spa:31,spd:31})n+=h*(t[c]%2),l+=h*(a(t[c]/2)%2),h*=2;return{type:p[a(15*n/63)],power:e.num&&e.num<6?a(40*l/63)+30:60}},t}());var b=e,g=_this&&_this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],i=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},S=["hp","atk","def","spa","spd","spe"],v=new Set(["spc"]),k=function(){function e(t,a,i){var r,s,o;void 0===i&&(i={}),this.species=n.extend(!0,{},t.species.get(n.toID(a)),i.overrides),this.gen=t,this.name=i.name||a,this.types=this.species.types,this.weightkg=this.species.weightkg,this.level=i.level||100,this.gender=i.gender||this.species.gender||"M",this.ability=i.ability||(null===(o=this.species.abilities)||void 0===o?void 0:o[0])||void 0,this.abilityOn=!!i.abilityOn,this.isDynamaxed=!!i.isDynamaxed,this.item=i.item,this.nature=i.nature||"Serious",this.ivs=e.withDefault(t,i.ivs,31),this.evs=e.withDefault(t,i.evs,t.num>=3?0:252),this.boosts=e.withDefault(t,i.boosts,0,!1),t.num<3&&(this.ivs.hp=b.Stats.DVToIV(b.Stats.getHPDV({atk:this.ivs.atk,def:this.ivs.def,spe:this.ivs.spe,spc:this.ivs.spa}))),this.rawStats={},this.stats={};try{for(var l=g(S),h=l.next();!h.done;h=l.next()){var c=h.value,d=this.calcStat(t,c);this.rawStats[c]=d,this.stats[c]=d}}catch(e){r={error:e}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}var u=i.curHP||i.originalCurHP;this.originalCurHP=u&&u<=this.rawStats.hp?u:this.rawStats.hp,this.status=i.status||"",this.toxicCounter=i.toxicCounter||0,this.moves=i.moves||[]}return e.prototype.maxHP=function(e){return void 0===e&&(e=!1),!e&&this.isDynamaxed&&1!==this.species.baseStats.hp?2*this.rawStats.hp:this.rawStats.hp},e.prototype.curHP=function(e){return void 0===e&&(e=!1),!e&&this.isDynamaxed&&1!==this.species.baseStats.hp?2*this.originalCurHP:this.originalCurHP},e.prototype.hasAbility=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.ability||!e.includes(this.ability))},e.prototype.hasItem=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.item||!e.includes(this.item))},e.prototype.hasStatus=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.status||!e.includes(this.status))},e.prototype.hasType=function(){for(var e,t,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];try{for(var r=g(a),s=r.next();!s.done;s=r.next()){var o=s.value;if(this.types.includes(o))return!0}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!1},e.prototype.named=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.name)},e.prototype.clone=function(){return new e(this.gen,this.name,{level:this.level,ability:this.ability,abilityOn:this.abilityOn,isDynamaxed:this.isDynamaxed,item:this.item,gender:this.gender,nature:this.nature,ivs:n.extend(!0,{},this.ivs),evs:n.extend(!0,{},this.evs),boosts:n.extend(!0,{},this.boosts),originalCurHP:this.originalCurHP,status:this.status,toxicCounter:this.toxicCounter,moves:this.moves.slice(),overrides:this.species})},e.prototype.calcStat=function(e,t){return b.Stats.calcStat(e,t,this.species.baseStats[t],this.ivs[t],this.evs[t],this.level,this.nature)},e.getForme=function(e,t,a,i){var r=e.species.get(n.toID(t));if(!r||!r.otherFormes)return t;var s=0;return a&&(a.includes("ite")&&!a.includes("ite Y")||"Groudon"===t&&"Red Orb"===a||"Kyogre"===t&&"Blue Orb"===a)||i&&"Meloetta"===t&&"Relic Song"===i||"Rayquaza"===t&&"Dragon Ascent"===i?s=1:(null==a?void 0:a.includes("ite Y"))&&(s=2),s?r.otherFormes[s-1]:r.name},e.withDefault=function(e,t,a,i){void 0===i&&(i=!0);var r={};if(t&&(n.assignWithout(r,t,v),t.spc&&(r.spa=t.spc,r.spd=t.spc),i&&e.num<=2&&t.spa!==t.spd))throw new Error("Special Attack and Special Defense must match before Gen 3");return Object.assign({hp:a,atk:a,def:a,spa:a,spd:a,spe:a},r)},e}();e.Pokemon=k;var A=_this&&_this.__read||function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var i,r,s=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return o};e.__esModule=!0;var P=function(){function e(e){void 0===e&&(e={}),this.gameType=e.gameType||"Singles",this.terrain=e.terrain,this.weather=e.weather,this.isGravity=!!e.isGravity,this.attackerSide=new M(e.attackerSide||{}),this.defenderSide=new M(e.defenderSide||{})}return e.prototype.hasWeather=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.weather||!e.includes(this.weather))},e.prototype.hasTerrain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!(!this.terrain||!e.includes(this.terrain))},e.prototype.swap=function(){var e;return e=A([this.defenderSide,this.attackerSide],2),this.attackerSide=e[0],this.defenderSide=e[1],this},e.prototype.clone=function(){return new e({gameType:this.gameType,weather:this.weather,terrain:this.terrain,isGravity:this.isGravity,attackerSide:this.attackerSide,defenderSide:this.defenderSide})},e}();e.Field=P;var M=function(){function e(e){void 0===e&&(e={}),this.spikes=e.spikes||0,this.steelsurge=!!e.steelsurge,this.wildfire=!!e.wildfire,this.volcalith=!!e.volcalith,this.isSR=!!e.isSR,this.isReflect=!!e.isReflect,this.isLightScreen=!!e.isLightScreen,this.isProtected=!!e.isProtected,this.isSeeded=!!e.isSeeded,this.isForesight=!!e.isForesight,this.isTailwind=!!e.isTailwind,this.isHelpingHand=!!e.isHelpingHand,this.isFriendGuard=!!e.isFriendGuard,this.isAuroraVeil=!!e.isAuroraVeil,this.isBattery=!!e.isBattery,this.isSwitching=e.isSwitching}return e.prototype.clone=function(){return new e(this)},e}();e.Side=M;var T=["Fire","Water","Grass","Electric","Ice","Psychic","Dark","Dragon"],w=function(){function e(e,t,a){var i,r;void 0===a&&(a={}),t=a.name||t,this.originalName=t;var s=n.extend(!0,{name:t},e.moves.get(n.toID(t)),a.overrides);if(this.hits=1,a.useMax&&s.maxMove){var o=F(s.type,a.species,!("Status"!==s.category)),l=e.moves.get(n.toID(o));s=n.extend(!0,{},l,{name:o,basePower:10===l.basePower||"Max Flare"===o?s.maxMove.basePower:l.basePower,category:s.category})}if(a.useZ&&(null===(i=s.zMove)||void 0===i?void 0:i.basePower)){var h=B(s.name,s.type,a.item),c=e.moves.get(n.toID(h));s=n.extend(!0,{},c,{name:h,basePower:1===c.basePower?s.zMove.basePower:c.basePower,category:s.category})}else s.multihit&&("number"==typeof s.multihit?this.hits=s.multihit:a.hits?this.hits=a.hits:this.hits="Skill Link"===a.ability||"Grip Claw"===a.item?s.multihit[1]:s.multihit[0]+1),this.timesUsedWithMetronome=a.timesUsedWithMetronome;this.gen=e,this.name=s.name,this.ability=a.ability,this.item=a.item,this.useZ=a.useZ,this.useMax=a.useMax,this.overrides=a.overrides,this.species=a.species,this.bp=s.basePower;var d=e.num>=2&&e.num<=4&&["futuresight","doomdesire","struggle"].includes(s.id);this.type=d?"???":s.type,this.category=s.category||(e.num<4?T.includes(s.type)?"Special":"Physical":"Status");var u="Special"===this.category?"spa":"atk";(null===(r=s.self)||void 0===r?void 0:r.boosts)&&s.self.boosts[u]&&s.self.boosts[u]<0&&(this.dropsStats=Math.abs(s.self.boosts[u])),this.timesUsed=this.dropsStats&&a.timesUsed||1,this.secondaries=s.secondaries,this.target=s.target||"any",this.recoil=s.recoil,this.hasCrashDamage=!!s.hasCrashDamage,this.mindBlownRecoil=!!s.mindBlownRecoil,this.struggleRecoil=!!s.struggleRecoil,this.isCrit=!!a.isCrit||!!s.willCrit||1===e.num&&["crabhammer","razorleaf","slash"].includes(s.id),this.drain=s.drain,this.flags=s.flags,this.priority=s.priority||0,this.ignoreDefensive=!!s.ignoreDefensive,this.defensiveCategory=s.defensiveCategory||this.category,this.breaksProtect=!!s.breaksProtect,this.isZ=!!s.isZ,this.isMax=!!s.isMax,this.bp||(["return","frustration","pikapapow","veeveevolley"].includes(s.id)?this.bp=102:"naturepower"===s.id&&(this.bp=80,e.num>=5&&(this.secondaries=!0)))}return e.prototype.named=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.name)},e.prototype.hasType=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.includes(this.type)},e.prototype.clone=function(){return new e(this.gen,this.originalName,{ability:this.ability,item:this.item,species:this.species,useZ:this.useZ,useMax:this.useMax,isCrit:this.isCrit,hits:this.hits,timesUsed:this.timesUsed,timesUsedWithMetronome:this.timesUsedWithMetronome,overrides:this.overrides})},e}();function B(e,t,a){if(a=a||"",e.includes("Hidden Power"))return"Breakneck Blitz";if("Clanging Scales"===e&&"Kommonium Z"===a)return"Clangorous Soulblaze";if("Darkest Lariat"===e&&"Incinium Z"===a)return"Malicious Moonsault";if("Giga Impact"===e&&"Snorlium Z"===a)return"Pulverizing Pancake";if("Moongeist Beam"===e&&"Lunalium Z"===a)return"Menacing Moonraze Maelstrom";if("Photon Geyser"===e&&"Ultranecrozium Z"===a)return"Light That Burns the Sky";if("Play Rough"===e&&"Mimikium Z"===a)return"Let's Snuggle Forever";if("Psychic"===e&&"Mewnium Z"===a)return"Genesis Supernova";if("Sparkling Aria"===e&&"Primarium Z"===a)return"Oceanic Operetta";if("Spectral Thief"===e&&"Marshadium Z"===a)return"Soul-Stealing 7-Star Strike";if("Spirit Shackle"===e&&"Decidium Z"===a)return"Sinister Arrow Raid";if("Stone Edge"===e&&"Lycanium Z"===a)return"Splintered Stormshards";if("Sunsteel Strike"===e&&"Solganium Z"===a)return"Searing Sunraze Smash";if("Volt Tackle"===e&&"Pikanium Z"===a)return"Catastropika";if("Nature's Madness"===e&&"Tapunium Z"===a)return"Guardian of Alola";if("Thunderbolt"===e){if("Aloraichium Z"===a)return"Stoked Sparksurfer";if("Pikashunium Z"===a)return"10,000,000 Volt Thunderbolt"}return x[t]}e.Move=w,e.getZMoveName=B;var x={Bug:"Savage Spin-Out",Dark:"Black Hole Eclipse",Dragon:"Devastating Drake",Electric:"Gigavolt Havoc",Fairy:"Twinkle Tackle",Fighting:"All-Out Pummeling",Fire:"Inferno Overdrive",Flying:"Supersonic Skystrike",Ghost:"Never-Ending Nightmare",Grass:"Bloom Doom",Ground:"Tectonic Rage",Ice:"Subzero Slammer",Normal:"Breakneck Blitz",Poison:"Acid Downpour",Psychic:"Shattered Psyche",Rock:"Continental Crush",Steel:"Corkscrew Crash",Water:"Hydro Vortex"};function F(e,t,a){if(a)return"Max Guard";if("Fire"===e){if("Charizard-Gmax"===t)return"G-Max Wildfire";if("Centiskorch-Gmax"===t)return"G-Max Centiferno"}if("Normal"===e){if("Eevee-Gmax"===t)return"G-Max Cuddle";if("Meowth-Gmax"===t)return"G-Max Gold Rush";if("Snorlax-Gmax"===t)return"G-Max Replenish"}if("Fairy"===e){if("Alcremie-Gmax"===t)return"G-Max Finale";if("Hatterene-Gmax"===t)return"G-Max Smite"}if("Steel"===e){if("Copperajah-Gmax"===t)return"G-Max Steelsurge";if("Melmetal-Gmax"===t)return"G-Max Meltdown"}if("Electric"===e){if("Pikachu-Gmax"===t)return"G-Max Volt Crash";if("Toxtricity-Gmax"===t)return"G-Max Stun Shock"}if("Grass"===e){if("Appletun-Gmax"===t)return"G-Max Sweetness";if("Flapple-Gmax"===t)return"G-Max Tartness"}if("Water"===e){if("Drednaw-Gmax"===t)return"G-Max Stonesurge";if("Kingler-Gmax"===t)return"G-Max Foam Burst"}return"Poison"===e&&"Garbodor-Gmax"===t?"G-Max Malodor":"Fighting"===e&&"Machamp-Gmax"===t?"G-Max Chi Strike":"Ghost"===e&&"Gengar-Gmax"===t?"G-Max Terror":"Ice"===e&&"Lapras-Gmax"===t?"G-Max Resonance":"Flying"===e&&"Corviknight-Gmax"===t?"G-Max Wind Rage":"Dragon"===e&&"Duraludon-Gmax"===t?"G-Max Depletion":"Psychic"===e&&"Orbeetle-Gmax"===t?"G-Max Gravitas":"Rock"===e&&"Coalossal-Gmax"===t?"G-Max Volcalith":"Ground"===e&&"Sandaconda-Gmax"===t?"G-Max Sandblast":"Dark"===e&&"Grimmsnarl-Gmax"===t?"G-Max Snooze":"Max "+R[e]}e.getMaxMoveName=F;var R={Bug:"Flutterby",Dark:"Darkness",Dragon:"Wyrmwind",Electric:"Lightning",Fairy:"Starfall",Fighting:"Knuckle",Fire:"Flare",Flying:"Airstream",Ghost:"Phantasm",Grass:"Overgrowth",Ground:"Quake",Ice:"Hailstorm",Normal:"Strike",Poison:"Ooze",Psychic:"Mindstorm",Rock:"Rockfall",Steel:"Steelspike",Water:"Geyser"};e.SEED_BOOSTED_STAT={"Electric Seed":"def","Grassy Seed":"def","Misty Seed":"spd","Psychic Seed":"spd"},e.getItemBoostType=function(e){switch(e){case"Draco Plate":case"Dragon Fang":return"Dragon";case"Dread Plate":case"Black Glasses":return"Dark";case"Earth Plate":case"Soft Sand":return"Ground";case"Fist Plate":case"Black Belt":return"Fighting";case"Flame Plate":case"Charcoal":return"Fire";case"Icicle Plate":case"Never-Melt Ice":return"Ice";case"Insect Plate":case"SilverPowder":return"Bug";case"Iron Plate":case"Metal Coat":return"Steel";case"Meadow Plate":case"Rose Incense":case"Miracle Seed":return"Grass";case"Mind Plate":case"Odd Incense":case"Twisted Spoon":return"Psychic";case"Pixie Plate":return"Fairy";case"Sky Plate":case"Sharp Beak":return"Flying";case"Splash Plate":case"Sea Incense":case"Wave Incense":case"Mystic Water":return"Water";case"Spooky Plate":case"Spell Tag":return"Ghost";case"Stone Plate":case"Rock Incense":case"Hard Stone":return"Rock";case"Toxic Plate":case"Poison Barb":return"Poison";case"Zap Plate":case"Magnet":return"Electric";case"Silk Scarf":case"Pink Bow":case"Polkadot Bow":return"Normal";default:return}},e.getBerryResistType=function(e){switch(e){case"Chilan Berry":return"Normal";case"Occa Berry":return"Fire";case"Passho Berry":return"Water";case"Wacan Berry":return"Electric";case"Rindo Berry":return"Grass";case"Yache Berry":return"Ice";case"Chople Berry":return"Fighting";case"Kebia Berry":return"Poison";case"Shuca Berry":return"Ground";case"Coba Berry":return"Flying";case"Payapa Berry":return"Psychic";case"Tanga Berry":return"Bug";case"Charti Berry":return"Rock";case"Kasib Berry":return"Ghost";case"Haban Berry":return"Dragon";case"Colbur Berry":return"Dark";case"Babiri Berry":return"Steel";case"Roseli Berry":return"Fairy";default:return}};var I=new Set(["TR24","TR28","TR34","TR39","TR53","TR55","TR64","TR66","TR72","TR73"]),G=new Set(["Hard Stone","Room Service","Claw Fossil","Dome Fossil","Helix Fossil","Old Amber","Root Fossil","Armor Fossil","Old Amber","Fossilized Bird","Fossilized Dino","Fossilized Drake","Fossilized Fish","Plume Fossil","Jaw Fossil","Cover Fossil","Sail Fossil","Rare Bone","Skull Fossil","TR10","TR31","TR75"]),H=new Set(["Deep Sea Tooth","Thick Club","TR02","TR04","TR05","TR08","TR11","TR22","TR35","TR42","TR45","TR50","TR61","TR65","TR67","TR86","TR90","TR96"]),D=new Set(["TR01","TR41","TR62","TR93","TR97","TR98"]),W=new Set(["Assault Vest","Blunder Policy","Chipped Pot","Cracked Pot","Heavy-Duty Boots","Weakness Policy","Quick Claw","Dawn Stone","Dusk Stone","Electirizer","Magmarizer","Oval Stone","Protector","Sachet","Whipped Dream","Razor Claw","Shiny Stone","TR16","TR18","TR19","TR25","TR32","TR33","TR47","TR56","TR57","TR58","TR59","TR60","TR63","TR69","TR70","TR74","TR84","TR87","TR92","TR95","TR99"]),C=new Set(["Poison Barb","Dragon Fang","Power Anklet","Power Band","Power Belt","Power Bracer","Power Lens","Power Weight"]),O=new Set(["Adamant Orb","Damp Rock","Heat Rock","Leek","Lustrous Orb","Macho Brace","Rocky Helmet","Stick","Utility Umbrella","Terrain Extender"]),E=new Set(["Absorb Bulb","Black Belt","Black Sludge","Black Glasses","Cell Battery","Charcoal","Deep Sea Scale","Flame Orb","King's Rock","Life Orb","Light Ball","Light Clay","Magnet","Metal Coat","Miracle Seed","Mystic Water","Never-Melt Ice","Razor Fang","Scope Lens","Soul Dew","Spell Tag","Sweet Apple","Tart Apple","Throat Spray","Toxic Orb","Twisted Spoon","Dragon Scale","Energy Powder","Fire Stone","Leaf Stone","Moon Stone","Sun Stone","Thunder Stone","Up-Grade","Water Stone","Berry Juice","Black Sludge","Prism Scale","Ice Stone","Gold Bottle Cap","Luminous Moss","Eject Button","Snowball","Bottle Cap"]),L=new Set(["Air Balloon","Berry Sweet","Choice Band","Choice Scarf","Choice Specs","Clover Sweet","Destiny Knot","Electric Seed","Expert Belt","Flower Sweet","Focus Band","Focus Sash","Full Incense","Grassy Seed","Lagging Tail","Lax Incense","Leftovers","Love Sweet","Mental Herb","Metal Powder","Mint Berry","Miracle Berry","Misty Seed","Muscle Band","Power Herb","Psychic Seed","Odd Incense","Quick Powder","Reaper Cloth","Red Card","Ribbon Sweet","Ring Target","Rock Incense","Rose Incense","Sea Incense","Shed Shell","Silk Scarf","Silver Powder","Smooth Rock","Soft Sand","Soothe Bell","Star Sweet","Strawberry Sweet","Wave Incense","White Herb","Wide Lens","Wise Glasses","Zoom Lens","SilverPowder","Power Herb","TR00","TR07","TR12","TR13","TR14","TR17","TR20","TR21","TR23","TR26","TR27","TR29","TR30","TR37","TR38","TR40","TR44","TR46","TR48","TR49","TR51","TR52","TR54","TR68","TR76","TR77","TR79","TR80","TR83","TR85","TR88","TR91"]);e.getFlingPower=function(e){return e?["Iron Ball","TR43","TR71"].includes(e)?130:I.has(e)?85:["TR03","TR06","TR09","TR15","TR89"].includes(e)?110:G.has(e)?100:["TR36","TR78","TR81","TR94"].includes(e)?95:e.includes("Plate")||H.has(e)?90:D.has(e)?85:W.has(e)?80:C.has(e)?70:O.has(e)?60:["Eject Pack","Sharp Beak","Dubious Disc"].includes(e)?50:["Icy Rock","Eviolite","Lucky Punch"].includes(e)?40:E.has(e)?30:"TR82"===e?20:e.includes("Berry")||L.has(e)?10:0:0},e.getNaturalGift=function(e,t){var a,i=null===(a=e.items.get(n.toID(t)))||void 0===a?void 0:a.naturalGift;return i?{t:i.type,p:i.basePower}:{t:"Normal",p:1}},e.getTechnoBlast=function(e){switch(e){case"Burn Drive":return"Fire";case"Chill Drive":return"Ice";case"Douse Drive":return"Water";case"Shock Drive":return"Electric";default:return}},e.getMultiAttack=function(e){if(e.includes("Memory"))return e.substring(0,e.indexOf(" "))};var N=_this&&_this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e},V=["Macho Brace","Power Anklet","Power Band","Power Belt","Power Bracer","Power Lens","Power Weight"];function U(e,t,a){var i=[1,1.5,2,2.5,3,3.5,4];if(a&&a.num<3){if(t>=0)e=Math.floor(e*i[t]);else{e=Math.floor(e*[100,66,50,40,33,28,25][-t]/100)}return Math.min(999,Math.max(1,e))}return e=t>=0?Math.floor(e*i[t]):Math.floor(e/i[-t])}function z(e,t,a,i){var r=a.weather||"",s=a.terrain,o=U(t.rawStats.spe,t.boosts.spe,e),n=1;return t.hasItem("Choice Scarf")?n*=1.5:t.hasItem.apply(t,N(["Iron Ball"],V))?n*=.5:t.hasItem("Quick Powder")&&t.named("Ditto")&&(n*=2),t.hasAbility("Unburden")&&t.abilityOn||t.hasAbility("Chlorophyll")&&r.includes("Sun")||t.hasAbility("Sand Rush")&&"Sand"===r||t.hasAbility("Swift Swim")&&r.includes("Rain")||t.hasAbility("Slush Rush")&&"Hail"===r||t.hasAbility("Surge Surfer")&&"Electric"===s?o*=2:t.hasAbility("Quick Feet")&&t.status?n*=1.5:t.hasAbility("Slow Start")&&t.abilityOn&&(n*=.5),i.isTailwind&&(n*=2),o=K(o*n),t.hasStatus("par")&&!t.hasAbility("Quick Feet")&&(o=Math.floor(o*(e.num<7?.25:.5))),o=Math.min(e.num<=2?999:1e4,o),Math.max(1,o)}function K(e){return e%1>.5?Math.ceil(e):Math.floor(e)}function Z(e){return e>65535?e%65536:e}function j(e){return e>4294967295?e%4294967296:e}e.isGrounded=function(e,t){return t.isGravity||!e.hasType("Flying")&&!e.hasAbility("Levitate")&&!e.hasItem("Air Balloon")},e.getModifiedStat=U,e.computeFinalStats=function(e,t,a,i){for(var r,s,o,n,l=[],h=4;h<arguments.length;h++)l[h-4]=arguments[h];var c=[[t,i.attackerSide],[a,i.defenderSide]];try{for(var d=g(c),u=d.next();!u.done;u=d.next()){var y=A(u.value,2),m=y[0],p=y[1];try{for(var f=(o=void 0,g(l)),b=f.next();!b.done;b=f.next()){var S=b.value;"spe"===S?m.stats.spe=z(e,m,i,p):m.stats[S]=U(m.rawStats[S],m.boosts[S],e)}}catch(e){o={error:e}}finally{try{b&&!b.done&&(n=f.return)&&n.call(f)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}},e.getFinalSpeed=z,e.getMoveEffectiveness=function(e,t,a,i,r){return i&&"Ghost"===a&&t.hasType("Normal","Fighting")||r&&"Flying"===a&&t.hasType("Ground")?1:t.named("Freeze-Dry")&&"Water"===a?2:t.named("Flying Press")?e.types.get("fighting").effectiveness[a]*e.types.get("flying").effectiveness[a]:e.types.get(n.toID(t.type)).effectiveness[a]},e.checkAirLock=function(e,t){e.hasAbility("Air Lock","Cloud Nine")&&(t.weather=void 0)},e.checkForecast=function(e,t){if(e.hasAbility("Forecast")&&e.named("Castform"))switch(t){case"Sun":case"Harsh Sunshine":e.types=["Fire"];break;case"Rain":case"Heavy Rain":e.types=["Water"];break;case"Hail":e.types=["Ice"];break;default:e.types=["Normal"]}},e.checkKlutz=function(e){e.hasAbility("Klutz")&&!V.includes(e.item)&&(e.item="")},e.checkIntimidate=function(e,t,a){var i=a.hasAbility("Clear Body","White Smoke","Hyper Cutter","Full Metal Body")||8===e.num&&a.hasAbility("Inner Focus","Own Tempo","Oblivious","Scrappy");t.hasAbility("Intimidate")&&t.abilityOn&&!i&&(a.hasAbility("Contrary","Defiant")?a.boosts.atk=Math.min(6,a.boosts.atk+1):a.hasAbility("Simple")?a.boosts.atk=Math.max(-6,a.boosts.atk-2):a.boosts.atk=Math.max(-6,a.boosts.atk-1))},e.checkDownload=function(e,t){e.hasAbility("Download")&&(t.stats.spd<=t.stats.def?e.boosts.spa=Math.min(6,e.boosts.spa+1):e.boosts.atk=Math.min(6,e.boosts.atk+1))},e.checkIntrepidSword=function(e){e.hasAbility("Intrepid Sword")&&(e.boosts.atk=Math.min(6,e.boosts.atk+1))},e.checkDauntlessShield=function(e){e.hasAbility("Dauntless Shield")&&(e.boosts.def=Math.min(6,e.boosts.def+1))},e.checkInfiltrator=function(e,t){e.hasAbility("Infiltrator")&&(t.isReflect=!1,t.isLightScreen=!1,t.isAuroraVeil=!1)},e.checkSeedBoost=function(e,t){if(e.item&&t.terrain&&e.item.includes("Seed")){var a=e.item.substring(0,e.item.indexOf(" "));t.hasTerrain(a)&&("Grassy"===a||"Electric"===a?e.boosts.def=e.hasAbility("Contrary")?Math.max(-6,e.boosts.def-1):Math.min(6,e.boosts.def+1):e.boosts.spd=e.hasAbility("Contrary")?Math.max(-6,e.boosts.spd-1):Math.min(6,e.boosts.spd+1))}},e.checkMultihitBoost=function(e,t,a,i,r,s,o){void 0===o&&(o=!1),i.named("Gyro Ball","Electro Ball")&&a.hasAbility("Gooey","Tangling Hair")?t.hasItem("White Herb")&&!o?(s.attackerItem=t.item,o=!0):(t.boosts.spe=Math.max(t.boosts.spe-1,-6),t.stats.spe=z(e,t,r,r.attackerSide),s.defenderAbility=a.ability):i.named("Power-Up Punch")&&(t.boosts.atk=Math.min(t.boosts.atk+1,6),t.stats.atk=U(t.rawStats.atk,t.boosts.atk,e)),a.hasAbility("Stamina")?t.hasAbility("Unaware")?s.attackerAbility=t.ability:(a.boosts.def=Math.min(a.boosts.def+1,6),a.stats.def=U(a.rawStats.def,a.boosts.def,e),s.defenderAbility=a.ability):a.hasAbility("Weak Armor")&&(t.hasAbility("Unaware")?s.attackerAbility=t.ability:a.hasItem("White Herb")&&!o?(s.defenderItem=a.item,o=!0):(a.boosts.def=Math.max(a.boosts.def-1,-6),a.stats.def=U(a.rawStats.def,a.boosts.def,e)),a.boosts.spe+=Math.min(a.boosts.spe+2,6),a.stats.spe=z(e,a,r,r.defenderSide),s.defenderAbility=a.ability);var n=t.hasAbility("Simple")?2:1;if(i.dropsStats)if(t.hasAbility("Unaware"))s.attackerAbility=t.ability;else{var l="Special"===i.category?"spa":"atk",h=t.boosts[l];t.hasAbility("Contrary")?(h=Math.min(6,h+i.dropsStats),s.attackerAbility=t.ability):(h=Math.max(-6,h-i.dropsStats*n),n>1&&(s.attackerAbility=t.ability)),t.hasItem("White Herb")&&t.boosts[l]<0&&!o&&(h+=i.dropsStats*n,s.attackerItem=t.item,o=!0),t.boosts[l]=h,t.stats[l]=U(t.rawStats[l],a.boosts[l],e)}return o},e.chainMods=function(e){var t,a,i=4096;try{for(var r=g(e),s=r.next();!s.done;s=r.next()){var o=s.value;4096!==o&&(i=i*o+2048>>12)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(a=r.return)&&a.call(r)}finally{if(t)throw t.error}}return i},e.getBaseDamage=function(e,t,a,i){return Math.floor(j(Math.floor(j(j(Math.floor(2*e/5+2)*t)*a)/i)/50+2))},e.getFinalDamage=function(e,t,a,i,r,s,o){var n=Math.floor(j(e*(85+t))/100);return 4096!==r&&(n=j(n*r)/4096),n=Math.floor(j(K(n)*a)),i&&(n=Math.floor(n/2)),o&&(n=K(j(1024*n)/4096)),Z(K(Math.max(1,j(n*s)/4096)))},e.getWeightFactor=function(e){return e.hasAbility("Heavy Metal")?2:e.hasAbility("Light Metal")?.5:1},e.countBoosts=function(e,t){var a,i,r=0,s=1===e.num?["atk","def","spa","spe"]:["atk","def","spa","spd","spe"];try{for(var o=g(s),n=o.next();!n.done;n=o.next()){var l=t[n.value];l&&l>0&&(r+=l)}}catch(e){a={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(a)throw a.error}}return r},e.getEVDescriptionText=function(e,t,a,i){var r=e.natures.get(n.toID(i));return t.evs[a]+(r.plus===r.minus?"":r.plus===a?"+":r.minus===a?"-":"")+" "+b.Stats.displayStat(a)},e.handleFixedDamageMoves=function(e,t){return t.named("Seismic Toss","Night Shade")?e.level:t.named("Dragon Rage")?40:t.named("Sonic Boom")?20:0},e.pokeRound=K,e.OF16=Z,e.OF32=j;var _=function(){function e(e,t,a,i,r,s,o){this.gen=e,this.attacker=t,this.defender=a,this.move=i,this.field=r,this.damage=s,this.rawDesc=o}return e.prototype.desc=function(){return this.fullDesc()},e.prototype.range=function(){var e=Y(this.damage);if("number"==typeof e[0])return e;var t=e;return[t[0][0]+t[0][1],t[1][0]+t[1][1]]},e.prototype.fullDesc=function(e,t){return void 0===e&&(e="%"),void 0===t&&(t=!0),oe.display(this.gen,this.attacker,this.defender,this.move,this.field,this.damage,this.rawDesc,e,t)},e.prototype.moveDesc=function(e){return void 0===e&&(e="%"),oe.displayMove(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.recovery=function(e){return void 0===e&&(e="%"),oe.getRecovery(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.recoil=function(e){return void 0===e&&(e="%"),oe.getRecoil(this.gen,this.attacker,this.defender,this.move,this.damage,e)},e.prototype.kochance=function(e){return void 0===e&&(e=!0),oe.getKOChance(this.gen,this.attacker,this.defender,this.move,this.field,this.damage,e)},e}();function Y(e){if("number"==typeof e)return[e,e];if(e.length>2){var t=e;return t[0]>t[t.length-1]?[Math.min.apply(Math,N(t)),Math.max.apply(Math,N(t))]:[t[0],t[t.length-1]]}if("number"==typeof e[0]&&"number"==typeof e[1])return[[e[0],e[1]],[e[0],e[1]]];var a=e;return a[0][0]>a[0][a[0].length-1]&&(a[0]=a[0].slice().sort()),a[1][0]>a[1][a[1].length-1]&&(a[1]=a[1].slice().sort()),[[a[0][0],a[1][0]],[a[0][a[0].length-1],a[1][a[1].length-1]]]}e.Result=_,e.damageRange=Y;var J=e,Q=e;function q(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h="number"==typeof n?[n]:n,c="number"==typeof l?[l]:l,d=[0,0],u="",y=3===e.num&&i.named("Doom Desire","Future Sight");if(t.hasItem("Shell Bell")&&!y)for(var m=Math.round(a.maxHP()/8),p=0;p<h.length;p++)d[0]+=Math.min(Math.round(h[p]*i.hits/8),m),d[1]+=Math.min(Math.round(c[p]*i.hits/8),m);if(i.named("G-Max Finale")&&(d[0]=d[1]=Math.round(t.maxHP()/6)),i.drain){var f=i.drain[0]/i.drain[1];for(m=Math.round(a.maxHP()*f),p=0;p<h.length;p++)d[0]+=Math.min(Math.round(h[p]*i.hits*f),m),d[1]+=Math.min(Math.round(c[p]*i.hits*f),m)}return 0===d[1]?{recovery:d,text:u}:{recovery:d,text:u=se(s,d[0],t.maxHP())+" - "+se(s,d[1],t.maxHP())+s+" recovered"}}function X(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h=("number"==typeof n?n:n[0]+n[1])*i.hits,c=("number"==typeof l?l:l[0]+l[1])*i.hits,d=[0,0],u="",y=n>a.curHP()||l>a.curHP();if(i.recoil){var m=i.recoil[0]/i.recoil[1]*100,p=void 0,f=void 0;y?(p=se(s,a.curHP()*m,t.maxHP(),100),f=se(s,a.curHP()*m,t.maxHP(),100)):(p=se(s,Math.min(h,a.curHP())*m,t.maxHP(),100),f=se(s,Math.min(c,a.curHP())*m,t.maxHP(),100)),t.hasAbility("Rock Head")||(d=[p,f],u=p+" - "+f+s+" recoil damage")}else if(i.hasCrashDamage){var b=2===e.num?12.5:e.num>=3?50:1;p=void 0,f=void 0;switch(y&&2!==e.num?(p=se(s,a.curHP()*b,t.maxHP(),100),f=se(s,a.curHP()*b,t.maxHP(),100)):(p=se(s,Math.min(h,a.maxHP())*b,t.maxHP(),100),f=se(s,Math.min(c,a.maxHP())*b,t.maxHP(),100)),d=[p,f],e.num){case 1:d=se(s,1,t.maxHP()),u="1hp damage on miss";break;case 2:case 3:case 4:if(a.hasType("Ghost"))if(4===e.num){var g=Math.floor(.5*a.maxHP()/t.maxHP()*100);d="%"===s?g:Math.floor(g/100*48),u=g+"% crash damage"}else d=0,u="no crash damage on Ghost types";else u=p+" - "+f+s+" crash damage on miss";break;default:d="%"===s?24:50,u="50% crash damage"}}else i.struggleRecoil?(d="%"===s?12:25,u="25% struggle damage",4===e.num&&(u+=" (rounded down)")):i.mindBlownRecoil&&(d="%"===s?24:50,u="50% recoil damage");return{recoil:d,text:u}}function $(e,t,a,i,r,s,o){if(void 0===o&&(o=!0),s=function(e){if("number"==typeof e)return[e];if(e.length>2)return e[0]>e[e.length-1]&&(e=e.slice().sort()),e;if("number"==typeof e[0]&&"number"==typeof e[1])return[e[0]+e[1]];for(var t=e,a=[],i=0;i<t[0].length;i++)for(var r=0;r<t[1].length;r++)a.push(t[0][i]+t[1][r]);return a.sort()}(s),isNaN(s[0]))return n.error(o,"damage[0] must be a number."),{chance:0,n:0,text:""};if(0===s[s.length-1])return n.error(o,"damage[damage.length - 1] === 0."),{chance:0,n:0,text:""};if(void 0===i.timesUsed&&(i.timesUsed=1),void 0===i.timesUsedWithMetronome&&(i.timesUsedWithMetronome=1),s[0]>=a.maxHP()&&1===i.timesUsed&&1===i.timesUsedWithMetronome)return{chance:1,n:1,text:"guaranteed OHKO"};var l=function(e,t,a){var i=0,r=[];if(t.hasItem("Heavy-Duty Boots"))return{damage:i,texts:r};if(a.isSR&&!t.hasAbility("Magic Guard","Mountaineer")){var s=e.types.get("rock"),o=s.effectiveness[t.types[0]]*(t.types[1]?s.effectiveness[t.types[1]]:1);i+=Math.floor(o*t.maxHP()/8),r.push("Stealth Rock")}if(a.steelsurge&&!t.hasAbility("Magic Guard","Mountaineer")){var n=e.types.get("steel");o=n.effectiveness[t.types[0]]*(t.types[1]?n.effectiveness[t.types[1]]:1);i+=Math.floor(o*t.maxHP()/8),r.push("Steelsurge")}t.hasType("Flying")||t.hasAbility("Magic Guard","Levitate")||t.hasItem("Air Balloon")||(1===a.spikes?(i+=Math.floor(t.maxHP()/8),2===e.num?r.push("Spikes"):r.push("1 layer of Spikes")):2===a.spikes?(i+=Math.floor(t.maxHP()/6),r.push("2 layers of Spikes")):3===a.spikes&&(i+=Math.floor(t.maxHP()/4),r.push("3 layers of Spikes")));isNaN(i)&&(i=0);return{damage:i,texts:r}}(e,a,r.defenderSide),h=function(e,t,a,i,r){var s=0,o=[];r.hasWeather("Sun","Harsh Sunshine")?a.hasAbility("Dry Skin","Solar Power")&&(s-=Math.floor(a.maxHP()/8),o.push(a.ability+" damage")):r.hasWeather("Rain","Heavy Rain")?a.hasAbility("Dry Skin")?(s+=Math.floor(a.maxHP()/8),o.push("Dry Skin recovery")):a.hasAbility("Rain Dish")&&(s+=Math.floor(a.maxHP()/16),o.push("Rain Dish recovery")):r.hasWeather("Sand")?a.hasType("Rock","Ground","Steel")||a.hasAbility("Magic Guard","Overcoat","Sand Force","Sand Rush","Sand Veil")||a.hasItem("Safety Goggles")||(s-=Math.floor(a.maxHP()/(2===e.num?8:16)),o.push("sandstorm damage")):r.hasWeather("Hail")&&(a.hasAbility("Ice Body")?(s+=Math.floor(a.maxHP()/16),o.push("Ice Body recovery")):a.hasType("Ice")||a.hasAbility("Magic Guard","Overcoat","Snow Cloak")||a.hasItem("Safety Goggles")||(s-=Math.floor(a.maxHP()/16),o.push("hail damage")));var n=i.named("Knock Off")&&!a.hasAbility("Sticky Hold");a.hasItem("Leftovers")&&!n?(s+=Math.floor(a.maxHP()/16),o.push("Leftovers recovery")):a.hasItem("Black Sludge")&&!n?a.hasType("Poison")?(s+=Math.floor(a.maxHP()/16),o.push("Black Sludge recovery")):a.hasAbility("Magic Guard","Klutz")||(s-=Math.floor(a.maxHP()/8),o.push("Black Sludge damage")):a.hasItem("Sticky Barb")&&(s-=Math.floor(a.maxHP()/8),o.push("Sticky Barb damage"));r.defenderSide.isSeeded&&(a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(e.num>=2?8:16)),o.push("Leech Seed damage")));r.attackerSide.isSeeded&&!t.hasAbility("Magic Guard")&&(t.hasAbility("Liquid Ooze")?(s-=Math.floor(t.maxHP()/(e.num>=2?8:16)),o.push("Liquid Ooze damage")):(s+=Math.floor(t.maxHP()/(e.num>=2?8:16)),o.push("Leech Seed recovery")));r.hasTerrain("Grassy")&&Q.isGrounded(a,r)&&(s+=Math.floor(a.maxHP()/16),o.push("Grassy Terrain recovery"));a.hasStatus("psn")?a.hasAbility("Poison Heal")?(s+=Math.floor(a.maxHP()/8),o.push("Poison Heal")):a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(1===e.num?16:8)),o.push("poison damage")):a.hasStatus("tox")?a.hasAbility("Poison Heal")?(s+=Math.floor(a.maxHP()/8),o.push("Poison Heal")):a.hasAbility("Magic Guard")||o.push("toxic damage"):a.hasStatus("brn")?a.hasAbility("Heatproof")?(s-=Math.floor(a.maxHP()/(e.num>6?32:16)),o.push("reduced burn damage")):a.hasAbility("Magic Guard")||(s-=Math.floor(a.maxHP()/(1===e.num||e.num>6?16:8)),o.push("burn damage")):(a.hasStatus("slp")||a.hasAbility("Comatose"))&&t.hasAbility("isBadDreams")&&!a.hasAbility("Magic Guard")&&(s-=Math.floor(a.maxHP()/8),o.push("Bad Dreams"));!a.hasAbility("Magic Guard")&&ee.includes(i.name)&&(t.hasItem("Binding Band")?(s-=e.num>5?Math.floor(a.maxHP()/6):Math.floor(a.maxHP()/8),o.push("trapping damage")):(s-=e.num>5?Math.floor(a.maxHP()/8):Math.floor(a.maxHP()/16),o.push("trapping damage")));a.hasType("Fire")||a.hasAbility("Magic Guard")||!i.named("Fire Pledge (Grass Pledge Boosted)","Grass Pledge (Fire Pledge Boosted)")||(s-=Math.floor(a.maxHP()/8),o.push("Sea of Fire damage"));a.hasAbility("Magic Guard")||a.hasType("Fire")||!r.defenderSide.wildfire&&!i.named("G-Max Wildfire")||(s-=Math.floor(a.maxHP()/6),o.push("Wildfire damage"));a.hasAbility("Magic Guard")||a.hasType("Rock")||!r.defenderSide.volcalith&&!i.named("G-Max Volcalith")||(s-=Math.floor(a.maxHP()/6),o.push("Volcalith damage"));return{damage:s,texts:o}}(e,t,a,i,r),c=a.hasStatus("tox")&&!a.hasAbility("Magic Guard")?a.toxicCounter:0,d="";i.hits>1&&(d="approx. ",s=function(e,t,a,i){void 0===i&&(i=!0);if(1===t.length)return[t[0]*a];if(1===e.num){for(var r=[],s=0;s<t.length;s++)r[s]=t[s]*a;return r}if(16===t.length)switch(a){case 2:return[2*t[0],t[2]+t[3],t[4]+t[4],t[4]+t[5],t[5]+t[6],t[6]+t[6],t[6]+t[7],t[7]+t[7],t[8]+t[8],t[8]+t[9],t[9]+t[9],t[9]+t[10],t[10]+t[11],t[11]+t[11],t[12]+t[13],2*t[15]];case 3:return[3*t[0],t[3]+t[3]+t[4],t[4]+t[4]+t[5],t[5]+t[5]+t[6],t[5]+t[6]+t[6],t[6]+t[6]+t[7],t[6]+t[7]+t[7],t[7]+t[7]+t[8],t[7]+t[8]+t[8],t[8]+t[8]+t[9],t[8]+t[9]+t[9],t[9]+t[9]+t[10],t[9]+t[10]+t[10],t[10]+t[11]+t[11],t[11]+t[12]+t[12],3*t[15]];case 4:return[4*t[0],4*t[4],t[4]+t[5]+t[5]+t[5],t[5]+t[5]+t[6]+t[6],4*t[6],t[6]+t[6]+t[7]+t[7],4*t[7],t[7]+t[7]+t[7]+t[8],t[7]+t[8]+t[8]+t[8],4*t[8],t[8]+t[8]+t[9]+t[9],4*t[9],t[9]+t[9]+t[10]+t[10],t[10]+t[10]+t[10]+t[11],4*t[11],4*t[15]];case 5:return[5*t[0],t[4]+t[4]+t[4]+t[5]+t[5],t[5]+t[5]+t[5]+t[5]+t[6],t[5]+t[6]+t[6]+t[6]+t[6],t[6]+t[6]+t[6]+t[6]+t[7],t[6]+t[6]+t[7]+t[7]+t[7],5*t[7],t[7]+t[7]+t[7]+t[8]+t[8],t[7]+t[7]+t[8]+t[8]+t[8],5*t[8],t[8]+t[8]+t[8]+t[9]+t[9],t[8]+t[9]+t[9]+t[9]+t[9],t[9]+t[9]+t[9]+t[9]+t[10],t[9]+t[10]+t[10]+t[10]+t[10],t[10]+t[10]+t[11]+t[11]+t[11],5*t[15]];default:return n.error(i,"Unexpected # of hits: "+a),t}else{if(39!==t.length){if(256===t.length){a>1&&n.error(i,"Unexpected # of hits for Parental Bond: "+a);for(r=[],s=0;s<16;s++){for(var o=0,l=0;l<16;l++)o+=t[s+l];r[s]=Math.round(o/16)}return r}return n.error(i,"Unexpected # of possible damage values: "+t.length),t}switch(a){case 2:return[2*t[0],2*t[7],2*t[10],2*t[12],2*t[14],t[15]+t[16],2*t[17],t[18]+t[19],t[19]+t[20],2*t[21],t[22]+t[23],2*t[24],2*t[26],2*t[28],2*t[31],2*t[38]];case 3:return[3*t[0],3*t[9],3*t[12],3*t[13],3*t[15],3*t[16],3*t[17],3*t[18],3*t[20],3*t[21],3*t[22],3*t[23],3*t[25],3*t[26],3*t[29],3*t[38]];case 4:return[4*t[0],2*t[10]+2*t[11],4*t[13],4*t[14],2*t[15]+2*t[16],2*t[16]+2*t[17],2*t[17]+2*t[18],2*t[18]+2*t[19],2*t[19]+2*t[20],2*t[20]+2*t[21],2*t[21]+2*t[22],2*t[22]+2*t[23],4*t[24],4*t[25],2*t[27]+2*t[28],4*t[38]];case 5:return[5*t[0],5*t[11],5*t[13],5*t[15],5*t[16],5*t[17],5*t[18],5*t[19],5*t[19],5*t[20],5*t[21],5*t[22],5*t[23],5*t[25],5*t[27],5*t[38]];default:return n.error(i,"Unexpected # of hits: "+a),t}}}(e,s,i.hits,o));var u,y=l.texts.length>0?" after "+ie(l.texts):"",m=l.texts.length>0||h.texts.length>0?" after "+ie(l.texts.concat(h.texts)):"";if(!(1===i.timesUsed&&1===i.timesUsedWithMetronome||i.isZ))return 1===(u=te(s,a.maxHP()-l.damage,h.damage,i.hits||1,i.timesUsed||1,a.maxHP(),c))?{chance:u,n:i.timesUsed,text:(d||"guaranteed ")+"KO in "+i.timesUsed+" turns"+m}:u>0?{chance:u,n:i.timesUsed,text:d+Math.round(1e3*u)/10+"% chance to "+i.timesUsed+"HKO"+m}:ae(s[0],h.damage,i.hits,i.timesUsed,c,a.maxHP())>=a.curHP()-l.damage?{chance:1,n:i.timesUsed,text:(d||"guaranteed ")+"KO in "+i.timesUsed+" turns"+m}:ae(s[s.length-1],h.damage,i.hits,i.timesUsed,c,a.maxHP())>=a.curHP()-l.damage?{n:i.timesUsed,text:d+"possible KO in "+i.timesUsed+" turns"+m}:{n:i.timesUsed,text:d+"not a KO"};if(1===(u=te(s,a.curHP()-l.damage,0,1,1,a.maxHP(),c)))return{chance:u,n:1,text:"guaranteed OHKO"+y};if(u>0)return{chance:u,n:1,text:d+Math.round(1e3*u)/10+"% chance to OHKO"+y};256===s.length&&(d="approx. ");for(var p=2;p<=4;p++){var f=te(s,a.curHP()-l.damage,h.damage,p,1,a.maxHP(),c);if(1===f)return{chance:f,n:p,text:""+(d||"guaranteed ")+p+"HKO"+m};if(f>0)return{chance:f,n:p,text:d+Math.round(1e3*f)/10+"% chance to "+p+"HKO"+m}}for(p=5;p<=9;p++){if(ae(s[0],h.damage,p,1,c,a.maxHP())>=a.curHP()-l.damage)return{chance:1,n:p,text:""+(d||"guaranteed ")+p+"HKO"+m};if(ae(s[s.length-1],h.damage,p,1,c,a.maxHP())>=a.curHP()-l.damage)return{n:p,text:d+"possible "+p+"HKO"+m}}return{chance:0,n:0,text:""}}e.display=function(e,t,a,i,r,s,o,n,l){void 0===n&&(n="%"),void 0===l&&(l=!0);var h=A(J.damageRange(s),2),c=h[0],d=h[1],u=("number"==typeof c?c:c[0]+c[1])*i.hits,y=("number"==typeof d?d:d[0]+d[1])*i.hits,m=se(n,u,a.maxHP()),p=se(n,y,a.maxHP()),f=function(e,t,a){var i=A(function(e,t){if(e.level!==t.level)return[100===e.level?"":"Lvl "+e.level,100===t.level?"":"Lvl "+t.level];var a=[100,50,5].includes(e.level)?"":"Lvl "+e.level;return[a,a]}(t,a),2),r=i[0],s=i[1],o="";e.attackBoost&&(e.attackBoost>0&&(o+="+"),o+=e.attackBoost+" ");o=re(o,r),o=re(o,e.attackEVs),o=re(o,e.attackerItem),o=re(o,e.attackerAbility),o=re(o,e.rivalry),e.isBurned&&(o+="burned ");o+=e.attackerName+" ",e.isHelpingHand&&(o+="Helping Hand ");e.isBattery&&(o+=" Battery boosted ");e.isSwitching&&(o+=" switching boosted ");o+=e.moveName+" ",e.moveBP&&e.moveType?o+="("+e.moveBP+" BP "+e.moveType+") ":e.moveBP?o+="("+e.moveBP+" BP) ":e.moveType&&(o+="("+e.moveType+") ");e.hits&&(o+="("+e.hits+" hits) ");o=re(o,e.moveTurns),o+="vs. ",e.defenseBoost&&(e.defenseBoost>0&&(o+="+"),o+=e.defenseBoost+" ");o=re(o,s),o=re(o,e.HPEVs),e.defenseEVs&&(o+="/ "+e.defenseEVs+" ");o=re(o,e.defenderItem),o=re(o,e.defenderAbility),e.isProtected&&(o+="protected ");e.isDefenderDynamaxed&&(o+="Dynamax ");o+=e.defenderName,e.weather&&e.terrain||(e.weather?o+=" in "+e.weather:e.terrain&&(o+=" in "+e.terrain+" Terrain"));e.isReflect?o+=" through Reflect":e.isLightScreen&&(o+=" through Light Screen");e.isFriendGuard&&(o+=" with an ally's Friend Guard");e.isAuroraVeil&&(o+=" with an ally's Aurora Veil");e.isCritical&&(o+=" on a critical hit");return o}(o,t,a),b=u+"-"+y+" ("+m+" - "+p+n+")";if("Status"===i.category&&!i.named("Nature Power"))return f+": "+b;var g=$(e,t,a,i,r,s,l).text;return g?f+": "+b+" -- "+g:f+": "+b},e.displayMove=function(e,t,a,i,r,s){void 0===s&&(s="%");var o=A(J.damageRange(r),2),n=o[0],l=o[1],h=("number"==typeof n?n:n[0]+n[1])*i.hits,c=("number"==typeof l?l:l[0]+l[1])*i.hits,d=se(s,h,a.maxHP()),u=se(s,c,a.maxHP()),y=q(e,t,a,i,r,s).text,m=X(e,t,a,i,r,s).text;return d+" - "+u+s+(y&&" ("+y+")")+(m&&" ("+m+")")},e.getRecovery=q,e.getRecoil=X,e.getKOChance=$;var ee=["Bind","Clamp","Fire Spin","Infestation","Magma Storm","Sand Tomb","Whirlpool","Wrap","G-Max Sandblast","G-Max Centiferno"];function te(e,t,a,i,r,s,o){var n=e.length;if(1===i)for(var l=0;l<n;l++){if(e[n-1]<t)return 0;if(e[l]>=t)return(n-l)/n}var h=0;o>0&&(h=Math.floor(o*s/16),o++);var c=0,d=0;for(l=0;l<n;l++){var u=void 0;if(1===(u=0===l||e[l]!==e[l-1]?te(e,t-e[l]+a-h,a,i-1,r,s,o):d)){c+=n-l;break}c+=u,d=u}return c/n}function ae(e,t,a,i,r,s){var o=0;if(r>0)for(var n=0;n<a-1;n++)o+=Math.floor((r+n)*s/16);return a>1&&1===i?e*a-t*(a-1)+o:e-t*(a-1)+o}function ie(e){if(0===e.length)return"";if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];for(var t="",a=0;a<e.length-1;a++)t+=e[a]+", ";return t+"and "+e[e.length-1]}function re(e,t){return t?""+e+t+" ":e}function se(e,t,a,i){return void 0===i&&(i=1),"%"===e?Math.floor(t*(1e3/i)/a)/10:Math.floor(t*(48/i)/a)}var oe=e,ne=e;function le(e,t){var a=Math.min(6,Math.max(-6,2*t));return a>0?Math.floor(e*(2+a)/2):a<0?Math.floor(2*e/(2-a)):e}e.calculateSMSS=function e(t,a,i,r,s){var o;Q.checkAirLock(a,s),Q.checkAirLock(i,s),Q.checkForecast(a,s.weather),Q.checkForecast(i,s.weather),Q.checkKlutz(a),Q.checkKlutz(i),Q.checkSeedBoost(a,s),Q.checkSeedBoost(i,s),Q.computeFinalStats(t,a,i,s,"def","spd","spe"),Q.checkIntimidate(t,a,i),Q.checkIntimidate(t,i,a),Q.checkDownload(a,i),Q.checkDownload(i,a),Q.checkIntrepidSword(a),Q.checkIntrepidSword(i),Q.checkDauntlessShield(a),Q.checkDauntlessShield(i),Q.computeFinalStats(t,a,i,s,"atk","spa"),Q.checkInfiltrator(a,s.defenderSide),Q.checkInfiltrator(i,s.attackerSide);var l={attackerName:a.name,moveName:r.name,defenderName:i.name,isDefenderDynamaxed:i.isDynamaxed},h=new J.Result(t,a,i,r,s,0,l);if("Status"===r.category&&!r.named("Nature Power"))return h;var c=r.breaksProtect||r.isZ||a.isDynamaxed||a.hasAbility("Unseen Fist")&&r.flags.contact;if(s.defenderSide.isProtected&&!c)return l.isProtected=!0,h;var d=i.hasAbility("Full Metal Body","Neutralizing Gas","Prism Armor","Shadow Shield"),u=a.hasAbility("Mold Breaker","Teravolt","Turboblaze"),y=r.named("Light That Burns the Sky","Menacing Moonraze Maelstrom","Moongeist Beam","Photon Geyser","Searing Sunraze Smash","Sunsteel Strike");d||(u&&(i.ability="",l.attackerAbility=a.ability),y&&(i.ability=""));var m=!i.hasAbility("Battle Armor","Shell Armor")&&(r.isCrit||a.hasAbility("Merciless")&&i.hasStatus("psn","tox"))&&1===r.timesUsed;if(r.named("Weather Ball"))r.type=s.hasWeather("Sun","Harsh Sunshine")?"Fire":s.hasWeather("Rain","Heavy Rain")?"Water":s.hasWeather("Sand")?"Rock":s.hasWeather("Hail")?"Ice":"Normal",l.weather=s.weather,l.moveType=r.type;else if(r.named("Judgment")&&a.item&&a.item.includes("Plate"))r.type=ne.getItemBoostType(a.item);else if(r.named("Techno Blast")&&a.item&&a.item.includes("Drive"))r.type=ne.getTechnoBlast(a.item);else if(r.named("Multi-Attack")&&a.item&&a.item.includes("Memory"))r.type=ne.getMultiAttack(a.item);else if(r.named("Natural Gift")&&a.item&&a.item.includes("Berry")){var p=ne.getNaturalGift(t,a.item);r.type=p.t,r.bp=p.p,l.attackerItem=a.item,l.moveBP=r.bp,l.moveType=r.type}else r.named("Nature Power","Terrain Pulse")?r.type=s.hasTerrain("Electric")?"Electric":s.hasTerrain("Grassy")?"Grass":s.hasTerrain("Misty")?"Fairy":s.hasTerrain("Psychic")?"Psychic":"Normal":r.named("Revelation Dance")?r.type=a.types[0]:r.named("Aura Wheel")&&(a.named("Morpeko")?r.type="Electric":a.named("Morpeko-Hangry")&&(r.type="Dark"));var f=!1,b=!1,g=!1,S=!1,v=!1,k=!1,A=r.named("Revelation Dance","Judgment","Nature Power","Techno Blast","Multi Attack","Natural Gift","Weather Ball","Terrain Pulse");if(!r.isZ&&!A){var P=r.hasType("Normal");(f=a.hasAbility("Aerilate")&&P)?r.type="Flying":(S=a.hasAbility("Galvanize")&&P)?r.type="Electric":(v=a.hasAbility("Liquid Voice")&&!!r.flags.sound)?r.type="Water":(b=a.hasAbility("Pixilate")&&P)?r.type="Fairy":(g=a.hasAbility("Refrigerate")&&P)?r.type="Ice":(k=a.hasAbility("Normalize"))&&(r.type="Normal"),(S||v||b||g||f||k)&&(l.attackerAbility=a.ability)}(a.hasAbility("Triage")&&r.drain||a.hasAbility("Gale Wings")&&r.hasType("Flying")&&a.curHP()===a.maxHP())&&(r.priority=1,l.attackerAbility=a.ability);var M=a.hasAbility("Scrappy")||s.defenderSide.isForesight,T=Q.getMoveEffectiveness(t,r,i.types[0],M,s.isGravity),w=i.types[1]?Q.getMoveEffectiveness(t,r,i.types[1],M,s.isGravity):1,B=T*w,x=!i.item||i.named("Giratina-Origin")&&i.hasItem("Griseous Orb")||i.name.includes("Arceus")&&i.item.includes("Plate")||i.name.includes("Genesect")&&i.item.includes("Drive")||i.named("Groudon","Groudon-Primal")&&i.hasItem("Red Orb")||i.named("Kyogre","Kyogre-Primal")&&i.hasItem("Blue Orb")||i.name.includes("Silvally")&&i.item.includes("Memory")||i.item.includes(" Z")||i.named("Zacian")&&i.hasItem("Rusted Sword");if(!x&&i.item){var F=t.items.get(n.toID(i.item));x=!!F.megaEvolves&&i.name.includes(F.megaEvolves)}if(0===B&&r.named("Thousand Arrows"))B=1;else if(0===B&&i.hasItem("Ring Target")){var R=t.types.get(n.toID(r.type)).effectiveness;0===R[i.types[0]]?B=w:i.types[1]&&0===R[i.types[1]]&&(B=T)}if(0===B)return h;if(r.named("Sky Drop")&&(i.hasType("Flying")||i.weightkg>=200||s.isGravity)||r.named("Synchronoise")&&!i.hasType(a.types[0])&&(!a.types[1]||!i.hasType(a.types[1]))||r.named("Dream Eater")&&!i.hasStatus("slp")&&!i.hasAbility("Comatose"))return h;if(i.hasAbility("Wonder Guard")&&B<=1||r.hasType("Grass")&&i.hasAbility("Sap Sipper")||r.hasType("Fire")&&i.hasAbility("Flash Fire")||r.hasType("Water")&&i.hasAbility("Dry Skin","Storm Drain","Water Absorb")||r.hasType("Electric")&&i.hasAbility("Lightning Rod","Motor Drive","Volt Absorb")||r.hasType("Ground")&&!s.isGravity&&!r.named("Thousand Arrows")&&i.hasAbility("Levitate")||r.flags.bullet&&i.hasAbility("Bulletproof")||r.flags.sound&&!r.named("Clangorous Soul")&&i.hasAbility("Soundproof")||r.priority>0&&i.hasAbility("Queenly Majesty","Dazzling"))return l.defenderAbility=i.ability,h;if(s.hasWeather("Strong Winds")&&i.hasType("Flying")&&t.types.get(n.toID(r.type)).effectiveness.Flying>1&&(B/=2,l.weather=s.weather),r.hasType("Ground")&&!r.named("Thousand Arrows")&&!s.isGravity&&i.hasItem("Air Balloon"))return l.defenderItem=i.item,h;if(r.priority>0&&s.hasTerrain("Psychic")&&Q.isGrounded(i,s))return l.terrain=s.terrain,h;l.HPEVs=i.evs.hp+" HP";var I=Q.handleFixedDamageMoves(a,r);if(I)return a.hasAbility("Parental Bond")?(h.damage=[I,I],l.attackerAbility=a.ability):h.damage=I,h;if(r.named("Final Gambit"))return h.damage=a.curHP(),h;if(r.named("Guardian of Alola")){var G=Math.floor(3*i.curHP()/4);return s.defenderSide.isProtected&&a.item&&a.item.includes(" Z")&&(G=Math.ceil(G/4-.5)),h.damage=G,h}if(r.named("Nature's Madness")){var H=s.defenderSide.isProtected?0:Math.floor(i.curHP()/2);return h.damage=H,h}if(r.named("Spectral Thief")){var D=void 0;for(D in i.boosts)i.boosts[D]&&(a.boosts[D]+=a.hasAbility("Contrary")?-i.boosts[D]:i.boosts[D],a.stats[D]=Q.getModifiedStat(a.rawStats[D],a.boosts[D]))}r.hits>1&&(l.hits=r.hits);var W,C=a.stats.spe>i.stats.spe?"first":"last";switch(r.name){case"Payback":W="last"===C?100:50,l.moveBP=W;break;case"Bolt Beak":case"Fishious Rend":W=r.bp*("last"!==C?2:1),l.moveBP=W;break;case"Electro Ball":var O=Math.floor(a.stats.spe/i.stats.spe);W=O>=4?150:O>=3?120:O>=2?80:O>=1?60:40,l.moveBP=W;break;case"Expanding Force":var E=Q.isGrounded(a,s)&&s.hasTerrain("Psychic");W=r.bp*(E?1.5:1),r.target=E?"allAdjacentFoes":"normal",l.moveBP=W;break;case"Misty Explosion":W=r.bp*(s.hasTerrain("Misty")?1.5:1),l.moveBP=W;break;case"Rising Voltage":W=r.bp*(s.hasTerrain("Electric")?2:1),l.moveBP=W;break;case"Gyro Ball":W=Math.min(150,Math.floor(25*i.stats.spe/a.stats.spe)),l.moveBP=W;break;case"Poltergeist":W=r.bp*(i.hasItem?1:0),l.moveBP=W;break;case"Punishment":W=Math.min(200,60+20*Q.countBoosts(t,i.boosts)),l.moveBP=W;break;case"Low Kick":case"Grass Knot":var L=i.weightkg*Q.getWeightFactor(i);W=L>=200?120:L>=100?100:L>=50?80:L>=25?60:L>=10?40:20,l.moveBP=W;break;case"Hex":W=r.bp*(i.status||i.hasAbility("Comatose")?2:1),l.moveBP=W;break;case"Heavy Slam":case"Heat Crash":var N=a.weightkg*Q.getWeightFactor(a)/(i.weightkg*Q.getWeightFactor(i));W=N>=5?120:N>=4?100:N>=3?80:N>=2?60:40,l.moveBP=W;break;case"Stored Power":case"Power Trip":W=20+20*Q.countBoosts(t,a.boosts),l.moveBP=W;break;case"Acrobatics":W=a.hasItem("Flying Gem")||!a.item?110:55,l.moveBP=W;break;case"Grav Apple":W=r.bp*(s.isGravity?1.5:1),l.moveBP=W;break;case"Steel Roller":W=r.bp*(s.terrain?1:0),l.moveBP=W;break;case"Assurance":W=r.bp*(i.hasAbility("Parental Bond (Child)")?2:1);break;case"Wake-Up Slap":W=r.bp*(i.hasStatus("slp")?2:1),l.moveBP=W;break;case"Weather Ball":W=s.weather&&!s.hasWeather("Strong Winds")?100:50,l.moveBP=W;break;case"Terrain Pulse":W=r.bp*(s.terrain?2:1),l.moveBP=W;break;case"Fling":W=ne.getFlingPower(a.item),l.moveBP=W,l.attackerItem=a.item;break;case"Eruption":case"Water Spout":W=Math.max(1,Math.floor(150*a.curHP()/a.maxHP())),l.moveBP=W;break;case"Flail":case"Reversal":var V=Math.floor(48*a.curHP()/a.maxHP());W=V<=1?200:V<=4?150:V<=9?100:V<=16?80:V<=32?40:20,l.moveBP=W;break;case"Nature Power":W=s.terrain&&s.hasTerrain("Electric","Grassy","Psychic")?90:s.hasTerrain("Misty")?95:80;break;case"Water Shuriken":W=a.named("Greninja-Ash")&&a.hasAbility("Battle Bond")?20:15,l.moveBP=W;break;case"Triple Axel":W=2===r.hits?30:3===r.hits?40:20,l.moveBP=W;break;case"Lash Out":W=r.bp*(Q.countBoosts(t,a.boosts)<0?2:1),l.moveBP=W;break;case"Crush Grip":case"Wring Out":W=100*Math.floor(4096*i.curHP()/i.maxHP()),W=Math.floor(Math.floor((120*W+2048-1)/4096)/100)||1,l.moveBP=W;break;default:W=r.bp}if(0===W)return h;var U=[];8===t.num&&a.hasAbility("Technician")&&W<=60&&(U.push(6144),l.attackerAbility=a.ability);var z=r.type+" Aura",K=a.hasAbility(z),Z=i.hasAbility(z),j=K||Z,_=a.hasAbility("Aura Break")||i.hasAbility("Aura Break");j&&_&&(U.push(3072),l.attackerAbility=a.ability,l.defenderAbility=i.ability),a.hasAbility("Rivalry")&&![a.gender,i.gender].includes("N")&&(a.gender===i.gender?(U.push(3072),l.rivalry="buffed"):(U.push(3277),l.rivalry="nerfed"),l.attackerAbility=a.ability),r.isZ||r.isMax||!(f||b||g||S||k)?(a.hasAbility("Reckless")&&(r.recoil||r.hasCrashDamage)||a.hasAbility("Iron Fist")&&r.flags.punch)&&(U.push(4915),l.attackerAbility=a.ability):(U.push(4915),l.attackerAbility=a.ability),s.attackerSide.isBattery&&"Special"===r.category&&(U.push(5325),l.isBattery=!0);var Y=a.hasAbility("Analytic")&&("first"!==C||"out"===s.defenderSide.isSwitching);if(a.hasAbility("Sheer Force")&&r.secondaries&&!r.isMax?(U.push(5325),l.attackerAbility=a.ability):a.hasAbility("Sand Force")&&s.hasWeather("Sand")&&r.hasType("Rock","Ground","Steel")?(U.push(5325),l.attackerAbility=a.ability,l.weather=s.weather):(Y||a.hasAbility("Tough Claws")&&r.flags.contact)&&(U.push(5325),l.attackerAbility=a.ability),j&&!_&&(U.push(5448),K&&(l.attackerAbility=a.ability),Z&&(l.defenderAbility=i.ability)),a.hasAbility("Steely Spirit")&&r.hasType("Steel")&&(U.push(6144),l.attackerAbility=a.ability),7===t.num){var q=Q.pokeRound(W*Q.chainMods(U)/4096);a.hasAbility("Technician")&&q<=60&&(U.push(6144),l.attackerAbility=a.ability)}(a.hasAbility("Flare Boost")&&a.hasStatus("brn")&&"Special"===r.category||a.hasAbility("Toxic Boost")&&a.hasStatus("psn","tox")&&"Physical"===r.category||a.hasAbility("Mega Launcher")&&r.flags.pulse||a.hasAbility("Strong Jaw")&&r.flags.bite)&&(U.push(6144),l.attackerAbility=a.ability),i.hasAbility("Heatproof")&&r.hasType("Fire")?(U.push(2048),l.defenderAbility=i.ability):i.hasAbility("Dry Skin")&&r.hasType("Fire")&&(U.push(5120),l.defenderAbility=i.ability),a.item&&r.hasType(ne.getItemBoostType(a.item))?(U.push(4915),l.attackerItem=a.item):a.hasItem("Muscle Band")&&"Physical"===r.category||a.hasItem("Wise Glasses")&&"Special"===r.category?(U.push(4505),l.attackerItem=a.item):a.hasItem("Adamant Orb")&&a.named("Dialga")&&r.hasType("Steel","Dragon")||a.hasItem("Lustrous Orb")&&a.named("Palkia")&&r.hasType("Water","Dragon")||a.hasItem("Griseous Orb")&&a.named("Giratina-Origin")&&r.hasType("Ghost","Dragon")||a.hasItem("Soul Dew")&&a.named("Latios","Latias","Latios-Mega","Latias-Mega")&&r.hasType("Psychic","Dragon")?(U.push(4915),l.attackerItem=a.item):a.hasItem(r.type+" Gem")&&(U.push(5325),l.attackerItem=a.item),r.named("Solar Beam","Solar Blade")&&s.hasWeather("Rain","Heavy Rain","Sand","Hail")?(U.push(2048),l.moveBP=W/2,l.weather=s.weather):r.named("Knock Off")&&!x&&(U.push(6144),l.moveBP=1.5*W),s.attackerSide.isHelpingHand&&(U.push(6144),l.isHelpingHand=!0),(r.named("Facade")&&a.hasStatus("brn","par","psn","tox")||r.named("Brine")&&i.curHP()<=i.maxHP()/2||r.named("Venoshock")&&i.hasStatus("psn","tox"))&&(U.push(8192),l.moveBP=2*W);var X,$=t.num>7?5325:6144;Q.isGrounded(a,s)&&(s.hasTerrain("Electric")&&r.hasType("Electric")||s.hasTerrain("Grassy")&&r.hasType("Grass")||s.hasTerrain("Psychic")&&r.hasType("Psychic"))&&(U.push($),l.terrain=s.terrain),Q.isGrounded(i,s)&&(s.hasTerrain("Misty")&&r.hasType("Dragon")||s.hasTerrain("Grassy")&&r.named("Bulldoze","Earthquake"))&&(U.push(2048),l.terrain=s.terrain),r.named("Breakneck Blitz","Bloom Doom","Inferno Overdrive","Hydro Vortex","Gigavolt Havoc","Subzero Slammer","Supersonic Skystrike","Savage Spin-Out","Acid Downpour","Tectonic Rage","Continental Crush","All-Out Pummeling","Shattered Psyche","Never-Ending Nightmare","Devastating Drake","Black Hole Eclipse","Corkscrew Crash","Twinkle Tackle")&&(l.moveBP=r.bp),W=Q.OF16(Math.max(1,Q.pokeRound(W*Q.chainMods(U)/4096)));var ee=r.named("Foul Play")?i:a;r.named("Photon Geyser","Light That Burns The Sky")&&(r.category=ee.stats.atk>ee.stats.spa?"Physical":"Special");var te=r.named("Shell Side Arm")&&i.stats.def<i.stats.spd?"atk":r.named("Body Press")?"def":"Special"===r.category?"spa":"atk";l.attackEVs=r.named("Foul Play")?Q.getEVDescriptionText(t,i,te,i.nature):Q.getEVDescriptionText(t,a,te,a.nature),0===ee.boosts[te]||m&&ee.boosts[te]<0?X=ee.rawStats[te]:i.hasAbility("Unaware")?(X=ee.rawStats[te],l.defenderAbility=i.ability):(X=ee.stats[te],l.attackBoost=ee.boosts[te]),a.hasAbility("Hustle")&&"Physical"===r.category&&(X=Q.pokeRound(3*X/2),l.attackerAbility=a.ability);var ae,ie=[];a.hasAbility("Slow Start")&&a.abilityOn&&("Physical"===r.category||"Special"===r.category&&r.isZ)||a.hasAbility("Defeatist")&&a.curHP()<=a.maxHP()/2?(ie.push(2048),l.attackerAbility=a.ability):a.hasAbility("Solar Power")&&s.hasWeather("Sun","Harsh Sunshine")&&"Special"===r.category||a.named("Cherrim")&&a.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&"Physical"===r.category||a.hasAbility("Gorilla Tactics")&&"Physical"===r.category&&!a.isDynamaxed?(ie.push(6144),l.attackerAbility=a.ability,l.weather=s.weather):a.hasAbility("Guts")&&a.status&&"Physical"===r.category||a.curHP()<=a.maxHP()/3&&(a.hasAbility("Overgrow")&&r.hasType("Grass")||a.hasAbility("Blaze")&&r.hasType("Fire")||a.hasAbility("Torrent")&&r.hasType("Water")||a.hasAbility("Swarm")&&r.hasType("Bug"))||"Special"===r.category&&a.abilityOn&&a.hasAbility("Plus","Minus")?(ie.push(6144),l.attackerAbility=a.ability):a.hasAbility("Flash Fire")&&a.abilityOn&&r.hasType("Fire")?(ie.push(6144),l.attackerAbility="Flash Fire"):a.hasAbility("Steelworker")&&r.hasType("Steel")?(ie.push(6144),l.attackerAbility=a.ability):(a.hasAbility("Stakeout")&&a.abilityOn||a.hasAbility("Water Bubble")&&r.hasType("Water")||a.hasAbility("Huge Power","Pure Power")&&"Physical"===r.category)&&(ie.push(8192),l.attackerAbility=a.ability),(i.hasAbility("Thick Fat")&&r.hasType("Fire","Ice")||i.hasAbility("Water Bubble")&&r.hasType("Fire"))&&(ie.push(2048),l.defenderAbility=i.ability),r.named("Pursuit")&&"out"===s.defenderSide.isSwitching&&(a.hasAbility("Technician")?ie.push(4096):(ie.push(8192),l.isSwitching="out")),a.hasItem("Thick Club")&&a.named("Cubone","Marowak","Marowak-Alola")&&"Physical"===r.category||a.hasItem("Deep Sea Tooth")&&a.named("Clamperl")&&"Special"===r.category||a.hasItem("Light Ball")&&a.named("Pikachu")&&!r.isZ?(ie.push(8192),l.attackerItem=a.item):r.isZ||r.isMax||!(a.hasItem("Choice Band")&&"Physical"===r.category||a.hasItem("Choice Specs")&&"Special"===r.category)||(ie.push(6144),l.attackerItem=a.item),X=Q.OF16(Math.max(1,Q.pokeRound(X*Q.chainMods(ie)/4096)));var re="Physical"===r.defensiveCategory||r.named("Shell Side Arm")&&i.stats.def<i.stats.spd,se=re?"def":"spd";l.defenseEVs=Q.getEVDescriptionText(t,i,se,i.nature),0===i.boosts[se]||m&&i.boosts[se]>0||r.ignoreDefensive?ae=i.rawStats[se]:a.hasAbility("Unaware")?(ae=i.rawStats[se],l.attackerAbility=a.ability):(ae=i.stats[se],l.defenseBoost=i.boosts[se]),s.hasWeather("Sand")&&i.hasType("Rock")&&!re&&(ae=Q.pokeRound(3*ae/2),l.weather=s.weather);var oe=[];i.hasAbility("Marvel Scale")&&i.status&&re?(oe.push(6144),l.defenderAbility=i.ability):i.named("Cherrim")&&i.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&!re?(oe.push(6144),l.defenderAbility=i.ability,l.weather=s.weather):i.hasAbility("Grass Pelt","Dauntless Shield")&&s.hasTerrain("Grassy")&&re?(oe.push(6144),l.defenderAbility=i.ability):i.hasAbility("Fur Coat")&&re&&(oe.push(8192),l.defenderAbility=i.ability),i.hasItem("Eviolite")&&(null===(o=t.species.get(n.toID(i.name)))||void 0===o?void 0:o.nfe)||!re&&i.hasItem("Assault Vest")?(oe.push(6144),l.defenderItem=i.item):(i.hasItem("Metal Powder")&&i.named("Ditto")&&re||i.hasItem("Deep Sea Scale")&&i.named("Clamperl")&&!re)&&(oe.push(8192),l.defenderItem=i.item),ae=Q.OF16(Math.max(1,Q.pokeRound(ae*Q.chainMods(oe)/4096)));var le=Q.getBaseDamage(a.level,W,X,ae),he="Singles"!==s.gameType&&["allAdjacent","allAdjacentFoes"].includes(r.target);he&&(le=Q.pokeRound(Q.OF32(3072*le)/4096)),a.hasAbility("Parental Bond (Child)")&&(le=Q.pokeRound(Q.OF32(1024*le)/4096));var ce=i.hasItem("Utility Umbrella");if(!ce&&s.hasWeather("Sun","Harsh Sunshine")&&r.hasType("Fire")||s.hasWeather("Rain","Heavy Rain")&&r.hasType("Water"))le=Q.pokeRound(Q.OF32(6144*le)/4096),l.weather=s.weather;else if(!ce&&s.hasWeather("Sun")&&r.hasType("Water")||s.hasWeather("Rain")&&r.hasType("Fire"))le=Q.pokeRound(Q.OF32(2048*le)/4096),l.weather=s.weather;else if(!ce&&s.hasWeather("Harsh Sunshine")&&r.hasType("Water")||s.hasWeather("Heavy Rain")&&r.hasType("Fire"))return h;i.hasItem("Electric Seed","Misty Seed","Grassy Seed","Psychic Seed")&&s.hasTerrain(i.item.substring(0,i.item.indexOf(" ")))&&ne.SEED_BOOSTED_STAT[i.item]===se&&(l.defenderItem=i.item),m&&(le=Math.floor(Q.OF32(1.5*le)),l.isCritical=m);var de=4096;a.hasType(r.type)?a.hasAbility("Adaptability")?(de=8192,l.attackerAbility=a.ability):de=6144:a.hasAbility("Protean","Libero")&&(de=6144,l.attackerAbility=a.ability);var ue=a.hasStatus("brn")&&"Physical"===r.category&&!a.hasAbility("Guts")&&!r.named("Facade");l.isBurned=ue;var ye=[];if(!s.defenderSide.isReflect||"Physical"!==r.category||m||s.defenderSide.isAuroraVeil?!s.defenderSide.isLightScreen||"Special"!==r.category||m||s.defenderSide.isAuroraVeil||(ye.push("Singles"!==s.gameType?2732:2048),l.isLightScreen=!0):(ye.push("Singles"!==s.gameType?2732:2048),l.isReflect=!0),s.defenderSide.isAuroraVeil&&!m&&(ye.push("Singles"!==s.gameType?2732:2048),l.isAuroraVeil=!0),a.hasAbility("Neuroforce")&&B>1?(U.push(5120),l.attackerAbility=a.ability):a.hasAbility("Sniper")&&m?(ye.push(6144),l.attackerAbility=a.ability):a.hasAbility("Tinted Lens")&&B<1&&(ye.push(8192),l.attackerAbility=a.ability),i.isDynamaxed&&r.named("Dynamax Cannon","Behemoth Blade","Behemoth Bash")&&ye.push(8192),!i.hasAbility("Multiscale","Shadow Shield")||i.curHP()!==i.maxHP()||s.defenderSide.isSR||s.defenderSide.spikes&&!i.hasType("Flying")||a.hasAbility("Parental Bond (Child)")||(ye.push(2048),l.defenderAbility=i.ability),(i.hasAbility("Fluffy")&&r.flags.contact&&!a.hasAbility("Long Reach")||i.hasAbility("Punk Rock")&&r.flags.sound||i.hasAbility("Ice Scales")&&"Special"===r.category)&&(ye.push(2048),l.defenderAbility=i.ability),r.flags.sound&&a.hasAbility("Punk Rock")&&(ye.push(5325),l.attackerAbility=a.ability),i.hasAbility("Solid Rock","Filter","Prism Armor")&&B>1&&(ye.push(3072),l.defenderAbility=i.ability),s.defenderSide.isFriendGuard&&(ye.push(3072),l.isFriendGuard=!0),i.hasAbility("Fluffy")&&r.hasType("Fire")&&(ye.push(8192),l.defenderAbility=i.ability),a.hasItem("Expert Belt")&&B>1&&!r.isZ)ye.push(4915),l.attackerItem=a.item;else if(a.hasItem("Life Orb"))ye.push(5324),l.attackerItem=a.item;else if(a.hasItem("Metronome")&&r.timesUsedWithMetronome>=1){var me=Math.floor(r.timesUsedWithMetronome);me<=4?ye.push(4096+819*me):ye.push(8192),l.attackerItem=a.item}r.hasType(ne.getBerryResistType(i.item))&&(B>1||r.hasType("Normal"))&&!a.hasAbility("Unnerve")&&(ye.push(2048),l.defenderItem=i.item);var pe=!1;s.defenderSide.isProtected&&(a.isDynamaxed||r.isZ&&a.item&&a.item.includes(" Z"))&&(pe=!0,l.isProtected=!0);var fe,be=Q.chainMods(ye);if(a.hasAbility("Parental Bond")&&1===r.hits&&!he){var ge=a.clone();ge.ability="Parental Bond (Child)",Q.checkMultihitBoost(t,ge,i,r,s,l),fe=e(t,ge,i,r,s).damage,l.attackerAbility=a.ability}for(var Se=[],ve=0;ve<16;ve++)Se[ve]=Q.getFinalDamage(le,ve,B,ue,de,be,pe);if(r.dropsStats&&r.timesUsed>1){var ke=a.hasAbility("Simple")?2:1;l.moveTurns="over "+r.timesUsed+" turns";for(var Ae=a.hasItem("White Herb"),Pe=!1,Me=a.boosts[te],Te=function(e){var t=Q.getModifiedStat(X,Me),i=0;Se=Se.map((function(r){if(e){var s=Q.getBaseDamage(a.level,W,t,ae),o=Q.getFinalDamage(s,i,B,ue,de,be,pe);return i++,r+o}return r})),a.hasAbility("Contrary")?(Me=Math.min(6,Me+r.dropsStats),l.attackerAbility=a.ability):(Me=Math.max(-6,Me-r.dropsStats*ke),a.hasAbility("Simple")&&(l.attackerAbility=a.ability)),Ae&&a.boosts[te]<0&&!Pe&&(Me+=r.dropsStats*ke,Pe=!0,l.attackerItem=a.item)},we=0;we<r.timesUsed;we++)Te(we)}return l.attackBoost=r.named("Foul Play")?i.boosts[te]:a.boosts[te],h.damage=fe?[Se,fe]:Se,h},e.calculateBWXY=function e(t,a,i,r,s){var o;Q.checkAirLock(a,s),Q.checkAirLock(i,s),Q.checkForecast(a,s.weather),Q.checkForecast(i,s.weather),Q.checkKlutz(a),Q.checkKlutz(i),Q.checkSeedBoost(a,s),Q.checkSeedBoost(i,s),Q.computeFinalStats(t,a,i,s,"def","spd","spe"),Q.checkIntimidate(t,a,i),Q.checkIntimidate(t,i,a),Q.checkDownload(a,i),Q.checkDownload(i,a),Q.computeFinalStats(t,a,i,s,"atk","spa"),Q.checkInfiltrator(a,s.defenderSide),Q.checkInfiltrator(i,s.attackerSide);var l={attackerName:a.name,moveName:r.name,defenderName:i.name},h=new J.Result(t,a,i,r,s,0,l);if("Status"===r.category&&!r.named("Nature Power"))return h;if(s.defenderSide.isProtected&&!r.breaksProtect)return l.isProtected=!0,h;a.hasAbility("Mold Breaker","Teravolt","Turboblaze")&&(i.ability="",l.attackerAbility=a.ability);var c=r.isCrit&&!i.hasAbility("Battle Armor","Shell Armor")&&1===r.timesUsed;if(r.named("Weather Ball"))r.type=s.hasWeather("Sun","Harsh Sunshine")?"Fire":s.hasWeather("Rain","Heavy Rain")?"Water":s.hasWeather("Sand")?"Rock":s.hasWeather("Hail")?"Ice":"Normal",l.weather=s.weather,l.moveType=r.type;else if(r.named("Judgment")&&a.item&&a.item.includes("Plate"))r.type=ne.getItemBoostType(a.item);else if(r.named("Techno Blast")&&a.item&&a.item.includes("Drive"))r.type=ne.getTechnoBlast(a.item);else if(r.named("Natural Gift")&&a.item&&a.item.includes("Berry")){var d=ne.getNaturalGift(t,a.item);r.type=d.t,r.bp=d.p,l.attackerItem=a.item,l.moveBP=r.bp,l.moveType=r.type}else r.named("Nature Power")&&(r.type=s.hasTerrain("Electric")?"Electric":s.hasTerrain("Grassy")?"Grass":s.hasTerrain("Misty")?"Fairy":s.hasTerrain("Psychic")?"Psychic":"Normal");var u=!1,y=!1,m=!1,p=!1,f=r.named("Judgment","Nature Power","Techo Blast","Natural Gift","Weather Ball");if(!r.isZ&&!f){var b=r.hasType("Normal");(u=a.hasAbility("Aerilate")&&b)?r.type="Flying":(y=a.hasAbility("Pixilate")&&b)?r.type="Fairy":(m=a.hasAbility("Refrigerate")&&b)?r.type="Ice":(p=a.hasAbility("Normalize"))&&(r.type="Normal"),(y||m||u||p)&&(l.attackerAbility=a.ability)}a.hasAbility("Gale Wings")&&r.hasType("Flying")&&(r.priority=1,l.attackerAbility=a.ability);var g=a.hasAbility("Scrappy")||s.defenderSide.isForesight,S=Q.getMoveEffectiveness(t,r,i.types[0],g,s.isGravity),v=i.types[1]?Q.getMoveEffectiveness(t,r,i.types[1],g,s.isGravity):1,k=S*v,A=!i.item||i.named("Giratina-Origin")&&i.hasItem("Griseous Orb")||i.name.includes("Arceus")&&i.item.includes("Plate")||i.name.includes("Genesect")&&i.item.includes("Drive")||i.named("Groudon","Groudon-Primal")&&i.hasItem("Red Orb")||i.named("Kyogre","Kyogre-Primal")&&i.hasItem("Blue Orb");if(!A&&i.item){var P=t.items.get(n.toID(i.item));A=!(!P.megaEvolves||!i.name.includes(P.megaEvolves))}if(0===k&&r.named("Thousand Arrows"))k=1;else if(0===k&&i.hasItem("Ring Target")){var M=t.types.get(n.toID(r.type)).effectiveness;0===M[i.types[0]]?k=v:i.types[1]&&0===M[i.types[1]]&&(k=S)}if(0===k)return h;if(r.named("Sky Drop")&&(i.hasType("Flying")||i.weightkg>=200||s.isGravity)||r.named("Synchronoise")&&!i.hasType(a.types[0])&&(!a.types[1]||!i.hasType(a.types[1]))||r.named("Dream Eater")&&!i.hasStatus("slp"))return h;if(i.hasAbility("Wonder Guard")&&k<=1||r.hasType("Grass")&&i.hasAbility("Sap Sipper")||r.hasType("Fire")&&i.hasAbility("Flash Fire")||r.hasType("Water")&&i.hasAbility("Dry Skin","Storm Drain","Water Absorb")||r.hasType("Electric")&&i.hasAbility("Lightning Rod","Motor Drive","Volt Absorb")||r.hasType("Ground")&&!s.isGravity&&!r.named("Thousand Arrows")&&i.hasAbility("Levitate")||r.flags.bullet&&i.hasAbility("Bulletproof")||r.flags.sound&&i.hasAbility("Soundproof"))return l.defenderAbility=i.ability,h;if(s.hasWeather("Strong Winds")&&i.hasType("Flying")&&t.types.get(n.toID(r.type)).effectiveness.Flying>1&&(k/=2,l.weather=s.weather),r.hasType("Ground")&&!r.named("Thousand Arrows")&&!s.isGravity&&i.hasItem("Air Balloon"))return l.defenderItem=i.item,h;if(r.priority>0&&s.hasTerrain("Psychic")&&Q.isGrounded(i,s))return l.terrain=s.terrain,h;l.HPEVs=i.evs.hp+" HP";var T=Q.handleFixedDamageMoves(a,r);if(T)return a.hasAbility("Parental Bond")?(h.damage=[T,T],l.attackerAbility=a.ability):h.damage=T,h;if(r.named("Final Gambit"))return h.damage=a.curHP(),h;r.hits>1&&(l.hits=r.hits);var w,B=a.stats.spe>i.stats.spe?"first":"last";switch(r.name){case"Payback":w="last"===B?100:50,l.moveBP=w;break;case"Electro Ball":var x=Math.floor(a.stats.spe/i.stats.spe);w=x>=4?150:x>=3?120:x>=2?80:x>=1?60:40,l.moveBP=w;break;case"Gyro Ball":w=Math.min(150,Math.floor(25*i.stats.spe/a.stats.spe)),l.moveBP=w;break;case"Punishment":w=Math.min(200,60+20*Q.countBoosts(t,i.boosts)),l.moveBP=w;break;case"Low Kick":case"Grass Knot":var F=i.weightkg*Q.getWeightFactor(i);w=F>=200?120:F>=100?100:F>=50?80:F>=25?60:F>=10?40:20,l.moveBP=w;break;case"Hex":w=r.bp*(i.status?2:1),l.moveBP=w;break;case"Heavy Slam":case"Heat Crash":var R=a.weightkg*Q.getWeightFactor(a)/(i.weightkg*Q.getWeightFactor(i));w=R>=5?120:R>=4?100:R>=3?80:R>=2?60:40,l.moveBP=w;break;case"Stored Power":case"Power Trip":w=20+20*Q.countBoosts(t,a.boosts),l.moveBP=w;break;case"Acrobatics":w=a.hasItem("Flying Gem")||!a.item?110:55,l.moveBP=w;break;case"Assurance":w=r.bp*(i.hasAbility("Parental Bond (Child)")?2:1);break;case"Wake-Up Slap":w=r.bp*(i.hasStatus("slp")?2:1),l.moveBP=w;break;case"Weather Ball":w=s.weather&&!s.hasWeather("Strong Winds")?100:50,l.moveBP=w;break;case"Fling":w=ne.getFlingPower(a.item),l.moveBP=w,l.attackerItem=a.item;break;case"Eruption":case"Water Spout":w=Math.max(1,Math.floor(150*a.curHP()/a.maxHP())),l.moveBP=w;break;case"Flail":case"Reversal":var I=Math.floor(48*a.curHP()/a.maxHP());w=I<=1?200:I<=4?150:I<=9?100:I<=16?80:I<=32?40:20,l.moveBP=w;break;case"Nature Power":w=s.terrain&&s.hasTerrain("Electric","Grassy","Psychic")?90:s.hasTerrain("Misty")?95:80;break;case"Water Shuriken":w=a.named("Greninja-Ash")&&a.hasAbility("Battle Bond")?20:15,l.moveBP=w;break;case"Crush Grip":case"Wring Out":w=100*Math.floor(4096*i.curHP()/i.maxHP()),w=Math.floor(Math.floor((120*w+2048-1)/4096)/100)||1,l.moveBP=w;break;default:w=r.bp}if(0===w)return h;var G=[];a.hasAbility("Technician")&&w<=60||a.hasAbility("Flare Boost")&&a.hasStatus("brn")&&"Special"===r.category||a.hasAbility("Toxic Boost")&&a.hasStatus("psn","tox")&&"Physical"===r.category?(G.push(6144),l.attackerAbility=a.ability):a.hasAbility("Analytic")&&"first"!==B?(G.push(5325),l.attackerAbility=a.ability):a.hasAbility("Sand Force")&&s.hasWeather("Sand")&&r.hasType("Rock","Ground","Steel")?(G.push(5325),l.attackerAbility=a.ability,l.weather=s.weather):(a.hasAbility("Reckless")&&(r.recoil||r.hasCrashDamage)||a.hasAbility("Iron Fist")&&r.flags.punch)&&(G.push(4915),l.attackerAbility=a.ability),i.hasAbility("Heatproof")&&r.hasType("Fire")?(G.push(2048),l.defenderAbility=i.ability):i.hasAbility("Dry Skin")&&r.hasType("Fire")&&(G.push(5120),l.defenderAbility=i.ability),a.hasAbility("Sheer Force")&&r.secondaries&&(G.push(5325),l.attackerAbility=a.ability),a.hasAbility("Rivalry")&&![a.gender,i.gender].includes("N")&&(a.gender===i.gender?(G.push(5120),l.rivalry="buffed"):(G.push(3277),l.rivalry="nerfed"),l.attackerAbility=a.ability),a.item&&ne.getItemBoostType(a.item)===r.type?(G.push(4915),l.attackerItem=a.item):a.hasItem("Muscle Band")&&"Physical"===r.category||a.hasItem("Wise Glasses")&&"Special"===r.category?(G.push(4505),l.attackerItem=a.item):a.hasItem("Adamant Orb")&&a.named("Dialga")&&r.hasType("Steel","Dragon")||a.hasItem("Lustrous Orb")&&a.named("Palkia")&&r.hasType("Water","Dragon")||a.hasItem("Griseous Orb")&&a.named("Giratina-Origin")&&r.hasType("Ghost","Dragon")?(G.push(4915),l.attackerItem=a.item):a.hasItem(r.type+" Gem")&&(G.push(t.num>5?5325:6144),l.attackerItem=a.item),r.named("Facade")&&a.hasStatus("brn","par","psn","tox")||r.named("Brine")&&i.curHP()<=i.maxHP()/2||r.named("Venoshock")&&i.hasStatus("psn","tox")?(G.push(8192),l.moveBP=2*w):r.named("Solar Beam")&&s.hasWeather("Rain","Heavy Rain","Sand","Hail")?(G.push(2048),l.moveBP=w/2,l.weather=s.weather):t.num>5&&r.named("Knock Off")&&!A&&(G.push(6144),l.moveBP=1.5*w),s.attackerSide.isHelpingHand&&(G.push(6144),l.isHelpingHand=!0),s.attackerSide.isBattery&&"Special"===r.category&&(G.push(5324),l.isBattery=!0),u||y||m||p?(G.push(5325),l.attackerAbility=a.ability):a.hasAbility("Mega Launcher")&&r.flags.pulse||a.hasAbility("Strong Jaw")&&r.flags.bite?(G.push(6144),l.attackerAbility=a.ability):a.hasAbility("Tough Claws")&&r.flags.contact&&(G.push(5325),l.attackerAbility=a.ability);var H,D=r.type+" Aura",W=a.hasAbility(D),C=i.hasAbility(D);(W||C)&&(a.hasAbility("Aura Break")||i.hasAbility("Aura Break")?(G.push(3072),l.attackerAbility=a.ability,l.defenderAbility=i.ability):(G.push(5447),W&&(l.attackerAbility=a.ability),C&&(l.defenderAbility=i.ability))),Q.isGrounded(a,s)&&(s.hasTerrain("Electric")&&r.hasType("Electric")||s.hasTerrain("Grassy")&&r.hasType("Grass")||s.hasTerrain("Psychic")&&r.hasType("Psychic"))&&(G.push(6144),l.terrain=s.terrain),Q.isGrounded(i,s)&&(s.hasTerrain("Misty")&&r.hasType("Dragon")||s.hasTerrain("Grassy")&&r.named("Bulldoze","Earthquake"))&&(G.push(2048),l.terrain=s.terrain),w=Q.OF16(Math.max(1,Q.pokeRound(w*Q.chainMods(G)/4096)));var O=r.named("Foul Play")?i:a,E="Special"===r.category?"spa":"atk";l.attackEVs=r.named("Foul Play")?Q.getEVDescriptionText(t,i,E,i.nature):Q.getEVDescriptionText(t,a,E,a.nature),0===O.boosts[E]||c&&O.boosts[E]<0?H=O.rawStats[E]:i.hasAbility("Unaware")?(H=O.rawStats[E],l.defenderAbility=i.ability):(H=O.stats[E],l.attackBoost=O.boosts[E]),a.hasAbility("Hustle")&&"Physical"===r.category&&(H=Q.pokeRound(3*H/2),l.attackerAbility=a.ability);var L,N=[];i.hasAbility("Thick Fat")&&r.hasType("Fire","Ice")&&(N.push(2048),l.defenderAbility=i.ability),r.named("Pursuit")&&"out"===s.defenderSide.isSwitching&&(a.hasAbility("Technician")?N.push(4096):(N.push(8192),l.isSwitching="out")),a.hasAbility("Guts")&&a.status&&"Physical"===r.category||a.curHP()<=a.maxHP()/3&&(a.hasAbility("Overgrow")&&r.hasType("Grass")||a.hasAbility("Blaze")&&r.hasType("Fire")||a.hasAbility("Torrent")&&r.hasType("Water")||a.hasAbility("Swarm")&&r.hasType("Bug"))||"Special"===r.category&&a.abilityOn&&a.hasAbility("Plus","Minus")?(N.push(6144),l.attackerAbility=a.ability):a.hasAbility("Flash Fire")&&a.abilityOn&&r.hasType("Fire")?(N.push(6144),l.attackerAbility="Flash Fire"):a.hasAbility("Solar Power")&&s.hasWeather("Sun","Harsh Sunshine")&&"Special"===r.category||a.named("Cherrim")&&a.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&"Physical"===r.category?(N.push(6144),l.attackerAbility=a.ability,l.weather=s.weather):a.hasAbility("Defeatist")&&a.curHP()<=a.maxHP()/2||a.hasAbility("Slow Start")&&a.abilityOn&&"Physical"===r.category?(N.push(2048),l.attackerAbility=a.ability):a.hasAbility("Huge Power","Pure Power")&&"Physical"===r.category&&(N.push(8192),l.attackerAbility=a.ability),a.hasItem("Thick Club")&&a.named("Cubone","Marowak","Marowak-Alola")&&"Physical"===r.category||a.hasItem("Deep Sea Tooth")&&a.named("Clamperl")&&"Special"===r.category||a.hasItem("Light Ball")&&a.named("Pikachu")&&!r.isZ?(N.push(8192),l.attackerItem=a.item):(a.hasItem("Soul Dew")&&a.named("Latios","Latias","Latios-Mega","Latias-Mega")&&"Special"===r.category||a.hasItem("Choice Band")&&"Physical"===r.category||a.hasItem("Choice Specs")&&"Special"===r.category)&&(N.push(6144),l.attackerItem=a.item),H=Q.OF16(Math.max(1,Q.pokeRound(H*Q.chainMods(N)/4096)));var V="Physical"===r.defensiveCategory,U=V?"def":"spd";l.defenseEVs=Q.getEVDescriptionText(t,i,U,i.nature),0===i.boosts[U]||c&&i.boosts[U]>0||r.ignoreDefensive?L=i.rawStats[U]:a.hasAbility("Unaware")?(L=i.rawStats[U],l.attackerAbility=a.ability):(L=i.stats[U],l.defenseBoost=i.boosts[U]),s.hasWeather("Sand")&&i.hasType("Rock")&&!V&&(L=Q.pokeRound(3*L/2),l.weather=s.weather);var z=[];i.hasAbility("Marvel Scale")&&i.status&&V?(z.push(6144),l.defenderAbility=i.ability):i.named("Cherrim")&&i.hasAbility("Flower Gift")&&s.hasWeather("Sun","Harsh Sunshine")&&!V&&(z.push(6144),l.defenderAbility=i.ability,l.weather=s.weather),s.hasTerrain("Grassy")&&i.hasAbility("Grass Pelt")&&V&&(z.push(6144),l.defenderAbility=i.ability),(!V&&i.hasItem("Soul Dew")&&i.named("Latios","Latias","Latios-Mega","Latias-Mega")||i.hasItem("Eviolite")&&(null===(o=t.species.get(n.toID(i.name)))||void 0===o?void 0:o.nfe)||!V&&i.hasItem("Assault Vest"))&&(z.push(6144),l.defenderItem=i.item),(i.hasItem("Metal Powder")&&i.named("Ditto")&&V||i.hasItem("Deep Sea Scale")&&i.named("Clamperl")&&!V)&&(z.push(8192),l.defenderItem=i.item),i.hasAbility("Fur Coat")&&V&&(z.push(8192),l.defenderAbility=i.ability),L=Q.OF16(Math.max(1,Q.pokeRound(L*Q.chainMods(z)/4096)));var K=Q.getBaseDamage(a.level,w,H,L),Z="Singles"!==s.gameType&&["allAdjacent","allAdjacentFoes"].includes(r.target);if(Z&&(K=Q.pokeRound(Q.OF32(3072*K)/4096)),a.hasAbility("Parental Bond (Child)")&&(K=Q.pokeRound(Q.OF32(2048*K)/4096)),s.hasWeather("Sun","Harsh Sunshine")&&r.hasType("Fire")||s.hasWeather("Rain","Heavy Rain")&&r.hasType("Water"))K=Q.pokeRound(Q.OF32(6144*K)/4096),l.weather=s.weather;else if(s.hasWeather("Sun")&&r.hasType("Water")||s.hasWeather("Rain")&&r.hasType("Fire"))K=Q.pokeRound(Q.OF32(2048*K)/4096),l.weather=s.weather;else if(s.hasWeather("Harsh Sunshine")&&r.hasType("Water")||s.hasWeather("Heavy Rain")&&r.hasType("Fire"))return h;c&&(K=Math.floor(Q.OF32(K*(t.num>5?1.5:2))),l.isCritical=c);var j=4096;a.hasType(r.type)?a.hasAbility("Adaptability")?(j=8192,l.attackerAbility=a.ability):j=6144:a.hasAbility("Protean")&&(j=6144,l.attackerAbility=a.ability);var _=a.hasStatus("brn")&&"Physical"===r.category&&!a.hasAbility("Guts")&&!(r.named("Facade")&&6===t.num);l.isBurned=_;var Y=[];if(s.defenderSide.isReflect&&"Physical"===r.category&&!c?(Y.push("Singles"!==s.gameType?t.num>5?2732:2703:2048),l.isReflect=!0):s.defenderSide.isLightScreen&&"Special"===r.category&&!c&&(Y.push("Singles"!==s.gameType?t.num>5?2732:2703:2048),l.isLightScreen=!0),!i.hasAbility("Multiscale")||i.curHP()!==i.maxHP()||s.defenderSide.isSR||s.defenderSide.spikes&&!i.hasType("Flying")||a.hasAbility("Parental Bond (Child)")||(Y.push(2048),l.defenderAbility=i.ability),a.hasAbility("Tinted Lens")&&k<1&&(Y.push(8192),l.attackerAbility=a.ability),s.defenderSide.isFriendGuard&&(Y.push(3072),l.isFriendGuard=!0),a.hasAbility("Sniper")&&c&&(Y.push(6144),l.attackerAbility=a.ability),i.hasAbility("Solid Rock","Filter")&&k>1&&(Y.push(3072),l.defenderAbility=i.ability),a.hasItem("Metronome")&&r.timesUsedWithMetronome>=1){var q=Math.floor(r.timesUsedWithMetronome);q<=4?Y.push(4096+819*q):Y.push(8192),l.attackerItem=a.item}a.hasItem("Expert Belt")&&k>1&&!r.isZ?(Y.push(4915),l.attackerItem=a.item):a.hasItem("Life Orb")&&(Y.push(5324),l.attackerItem=a.item),r.hasType(ne.getBerryResistType(i.item))&&(k>1||r.hasType("Normal"))&&!a.hasAbility("Unnerve")&&(Y.push(2048),l.defenderItem=i.item),s.defenderSide.isProtected&&r.isZ&&a.item&&a.item.includes(" Z")&&(Y.push(1024),l.isProtected=!0);var X,$=Q.chainMods(Y);if(a.hasAbility("Parental Bond")&&1===r.hits&&!Z){var ee=a.clone();ee.ability="Parental Bond (Child)",Q.checkMultihitBoost(t,ee,i,r,s,l),X=e(t,ee,i,r,s).damage,l.attackerAbility=a.ability}for(var te=[],ae=0;ae<16;ae++)te[ae]=Q.getFinalDamage(K,ae,k,_,j,$);if(r.dropsStats&&(r.timesUsed||0)>1){var ie=a.hasAbility("Simple")?2:1;l.moveTurns="over "+r.timesUsed+" turns";for(var re=a.hasItem("White Herb"),se=!1,oe=a.boosts[E],le=function(e){var t=Q.getModifiedStat(H,oe),i=0;te=te.map((function(r){if(e){var s=Q.getBaseDamage(a.level,w,t,L),o=Q.getFinalDamage(s,i,k,_,j,$);return i++,r+o}return r})),a.hasAbility("Contrary")?(oe=Math.min(6,oe+r.dropsStats),l.attackerAbility=a.ability):(oe=Math.max(-6,oe-r.dropsStats*ie),a.hasAbility("Simple")&&(l.attackerAbility=a.ability)),re&&a.boosts[E]<0&&!se&&(oe+=r.dropsStats*ie,se=!0,l.attackerItem=a.item)},he=0;he<r.timesUsed;he++)le(he)}return l.attackBoost=r.named("Foul Play")?i.boosts[E]:a.boosts[E],h.damage=X?[te,X]:te,h},e.calculateDPP=function(e,t,a,i,r){n.checkAirLock(t,r),n.checkAirLock(a,r),n.checkForecast(t,r.weather),n.checkForecast(a,r.weather),n.checkKlutz(t),n.checkKlutz(a),n.checkIntimidate(e,t,a),n.checkIntimidate(e,a,t),n.checkDownload(t,a),n.checkDownload(a,t),t.stats.spe=n.getFinalSpeed(e,t,r,r.attackerSide),a.stats.spe=n.getFinalSpeed(e,a,r,r.defenderSide);var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category&&!i.named("Nature Power"))return o;if(r.defenderSide.isProtected&&!i.breaksProtect)return s.isProtected=!0,o;t.hasAbility("Mold Breaker")&&(a.ability="",s.attackerAbility=t.ability);var l=i.isCrit&&!a.hasAbility("Battle Armor","Shell Armor"),h=i.bp;if(i.named("Weather Ball"))r.hasWeather("Sun")?(i.type="Fire",h*=2):r.hasWeather("Rain")?(i.type="Water",h*=2):r.hasWeather("Sand")?(i.type="Rock",h*=2):r.hasWeather("Hail")?(i.type="Ice",h*=2):i.type="Normal",s.weather=r.weather,s.moveType=i.type,s.moveBP=h;else if(i.named("Judgment")&&t.item&&t.item.includes("Plate"))i.type=ne.getItemBoostType(t.item);else if(i.named("Natural Gift")&&t.item&&t.item.includes("Berry")){var c=ne.getNaturalGift(e,t.item);i.type=c.t,i.bp=c.p,s.attackerItem=t.item,s.moveBP=i.bp,s.moveType=i.type}t.hasAbility("Normalize")&&(i.type="Normal",s.attackerAbility=t.ability);var d=t.hasAbility("Scrappy")||r.defenderSide.isForesight,u=n.getMoveEffectiveness(e,i,a.types[0],d,r.isGravity),y=a.types[1]?n.getMoveEffectiveness(e,i,a.types[1],d,r.isGravity):1,m=u*y;if(0===m)return o;if(!(i.hasType("???")||i.named("Fire Fang"))&&a.hasAbility("Wonder Guard")&&m<=1||i.hasType("Fire")&&a.hasAbility("Flash Fire")||i.hasType("Water")&&a.hasAbility("Dry Skin","Water Absorb")||i.hasType("Electric")&&a.hasAbility("Motor Drive","Volt Absorb")||i.hasType("Ground")&&!r.isGravity&&a.hasAbility("Levitate")||i.flags.sound&&a.hasAbility("Soundproof"))return s.defenderAbility=a.ability,o;s.HPEVs=a.evs.hp+" HP";var p=n.handleFixedDamageMoves(t,i);if(p)return o.damage=p,o;i.hits>1&&(s.hits=i.hits);var f=t.stats.spe>a.stats.spe?"first":"last";switch(i.name){case"Brine":a.curHP()<=a.maxHP()/2&&(h*=2,s.moveBP=h);break;case"Eruption":case"Water Spout":h=Math.max(1,Math.floor(h*t.curHP()/t.maxHP())),s.moveBP=h;break;case"Facade":t.hasStatus("par","psn","tox","brn")&&(h=2*i.bp,s.moveBP=h);break;case"Flail":case"Reversal":var b=Math.floor(48*t.curHP()/t.maxHP());h=b<=1?200:b<=4?150:b<=9?100:b<=16?80:b<=32?40:20,s.moveBP=h;break;case"Fling":h=ne.getFlingPower(t.item),s.moveBP=h,s.attackerItem=t.item;break;case"Grass Knot":case"Low Kick":var g=a.weightkg;h=g>=200?120:g>=100?100:g>=50?80:g>=25?60:g>=10?40:20,s.moveBP=h;break;case"Gyro Ball":h=Math.min(150,Math.floor(25*a.stats.spe/t.stats.spe)),s.moveBP=h;break;case"Payback":"first"!==f&&(h*=2,s.moveBP=h);break;case"Punishment":var S=n.countBoosts(e,a.boosts);S>0&&(h=Math.min(200,h+20*S),s.moveBP=h);break;case"Wake-Up Slap":a.hasStatus("slp")&&(h*=2,s.moveBP=h);break;case"Crush Grip":case"Wring Out":h=Math.floor(120*a.curHP()/a.maxHP())+1,s.moveBP=h;break;default:h=i.bp}if(0===h)return o;r.attackerSide.isHelpingHand&&(h=Math.floor(1.5*h),s.isHelpingHand=!0);var v="Physical"===i.category;t.hasItem("Muscle Band")&&v||t.hasItem("Wise Glasses")&&!v?(h=Math.floor(1.1*h),s.attackerItem=t.item):(i.hasType(ne.getItemBoostType(t.item))||t.hasItem("Adamant Orb")&&t.named("Dialga")&&i.hasType("Steel","Dragon")||t.hasItem("Lustrous Orb")&&t.named("Palkia")&&i.hasType("Water","Dragon")||t.hasItem("Griseous Orb")&&t.named("Giratina-Origin")&&i.hasType("Ghost","Dragon"))&&(h=Math.floor(1.2*h),s.attackerItem=t.item),t.hasAbility("Reckless")&&(i.recoil||i.hasCrashDamage)||t.hasAbility("Iron Fist")&&i.flags.punch?(h=Math.floor(1.2*h),s.attackerAbility=t.ability):(t.curHP()<=t.maxHP()/3&&(t.hasAbility("Overgrow")&&i.hasType("Grass")||t.hasAbility("Blaze")&&i.hasType("Fire")||t.hasAbility("Torrent")&&i.hasType("Water")||t.hasAbility("Swarm")&&i.hasType("Bug"))||t.hasAbility("Technician")&&h<=60)&&(h=Math.floor(1.5*h),s.attackerAbility=t.ability),a.hasAbility("Heatproof")&&i.hasType("Fire")||a.hasAbility("Thick Fat")&&i.hasType("Fire","Ice")?(h=Math.floor(.5*h),s.defenderAbility=a.ability):a.hasAbility("Dry Skin")&&i.hasType("Fire")&&(h=Math.floor(1.25*h),s.defenderAbility=a.ability);var k,A=v?"atk":"spa";s.attackEVs=n.getEVDescriptionText(e,t,A,t.nature);var P=t.boosts[A],M=t.rawStats[A];0===P||l&&P<0?k=M:a.hasAbility("Unaware")?(k=M,s.defenderAbility=a.ability):t.hasAbility("Simple")?(k=le(M,P),s.attackerAbility=t.ability,s.attackBoost=P):(k=n.getModifiedStat(M,P),s.attackBoost=P),v&&t.hasAbility("Pure Power","Huge Power")?(k*=2,s.attackerAbility=t.ability):r.hasWeather("Sun")&&t.hasAbility(v?"Flower Gift":"Solar Power")?(k=Math.floor(1.5*k),s.attackerAbility=t.ability,s.weather=r.weather):v&&(t.hasAbility("Hustle")||t.hasAbility("Guts")&&t.status)||!v&&t.abilityOn&&t.hasAbility("Plus","Minus")?(k=Math.floor(1.5*k),s.attackerAbility=t.ability):v&&t.hasAbility("Slow Start")&&t.abilityOn&&(k=Math.floor(k/2),s.attackerAbility=t.ability),(v?t.hasItem("Choice Band"):t.hasItem("Choice Specs"))||!v&&t.hasItem("Soul Dew")&&t.named("Latios","Latias")?(k=Math.floor(1.5*k),s.attackerItem=t.item):(t.hasItem("Light Ball")&&t.named("Pikachu")||t.hasItem("Thick Club")&&t.named("Cubone","Marowak")&&v||t.hasItem("Deep Sea Tooth")&&t.named("Clamperl")&&!v)&&(k*=2,s.attackerItem=t.item);var T,w=v?"def":"spd";s.defenseEVs=n.getEVDescriptionText(e,a,w,a.nature);var B=a.boosts[w],x=a.rawStats[w];0===B||l&&B>0?T=x:t.hasAbility("Unaware")?(T=x,s.attackerAbility=t.ability):a.hasAbility("Simple")?(T=le(x,B),s.defenderAbility=a.ability,s.defenseBoost=B):(T=n.getModifiedStat(x,B),s.defenseBoost=B),a.hasAbility("Marvel Scale")&&a.status&&v?(T=Math.floor(1.5*T),s.defenderAbility=a.ability):a.hasAbility("Flower Gift")&&r.hasWeather("Sun")&&!v&&(T=Math.floor(1.5*T),s.defenderAbility=a.ability,s.weather=r.weather),a.hasItem("Soul Dew")&&a.named("Latios","Latias")&&!v?(T=Math.floor(1.5*T),s.defenderItem=a.item):(a.hasItem("Deep Sea Scale")&&a.named("Clamperl")&&!v||a.hasItem("Metal Powder")&&a.named("Ditto")&&v)&&(T*=2,s.defenderItem=a.item),r.hasWeather("Sand")&&a.hasType("Rock")&&!v&&(T=Math.floor(1.5*T),s.weather=r.weather),(i.named("Explosion")||i.named("Self-Destruct"))&&(T=Math.floor(.5*T)),T<1&&(T=1);var F=Math.floor(Math.floor(Math.floor(2*t.level/5+2)*h*k/50)/T);if(t.hasStatus("brn")&&v&&!t.hasAbility("Guts")&&(F=Math.floor(.5*F),s.isBurned=!0),!l){var R="Singles"!==r.gameType?2/3:.5;v&&r.defenderSide.isReflect?(F=Math.floor(F*R),s.isReflect=!0):!v&&r.defenderSide.isLightScreen&&(F=Math.floor(F*R),s.isLightScreen=!0)}"Singles"!==r.gameType&&["allAdjacent","allAdjacentFoes"].includes(i.target)&&(F=Math.floor(3*F/4)),r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(F=Math.floor(1.5*F),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&i.hasType("Fire")||i.named("Solar Beam")&&r.hasWeather("Rain","Sand","Hail"))&&(F=Math.floor(.5*F),s.weather=r.weather),t.hasAbility("Flash Fire")&&t.abilityOn&&i.hasType("Fire")&&(F=Math.floor(1.5*F),s.attackerAbility="Flash Fire"),F+=2,l&&(t.hasAbility("Sniper")?(F*=3,s.attackerAbility=t.ability):F*=2,s.isCritical=l),t.hasItem("Life Orb")&&(F=Math.floor(1.3*F),s.attackerItem=t.item),i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(t.hasAbility("Technician")?F=Math.floor(1*F):(F=Math.floor(2*F),s.isSwitching="out"));var I=1;i.hasType.apply(i,N(t.types))&&(t.hasAbility("Adaptability")?(I=2,s.attackerAbility=t.ability):I=1.5);var G=1;a.hasAbility("Filter","Solid Rock")&&m>1&&(G=.75,s.defenderAbility=a.ability);var H=1;t.hasItem("Expert Belt")&&m>1&&(H=1.2,s.attackerItem=t.item);var D=1;t.hasAbility("Tinted Lens")&&m<1&&(D=2,s.attackerAbility=t.ability);var W=1;i.hasType(ne.getBerryResistType(a.item))&&(m>1||i.hasType("Normal"))&&(W=.5,s.defenderItem=a.item);for(var C=[],O=0;O<16;O++)C[O]=Math.floor(F*(85+O)/100),C[O]=Math.floor(C[O]*I),C[O]=Math.floor(C[O]*u),C[O]=Math.floor(C[O]*y),C[O]=Math.floor(C[O]*G),C[O]=Math.floor(C[O]*H),C[O]=Math.floor(C[O]*D),C[O]=Math.floor(C[O]*W),C[O]=Math.max(1,C[O]);return o.damage=C,o},e.calculateADV=function(e,t,a,i,r){Q.checkAirLock(t,r),Q.checkAirLock(a,r),Q.checkForecast(t,r.weather),Q.checkForecast(a,r.weather),Q.checkIntimidate(e,t,a),Q.checkIntimidate(e,a,t),t.stats.spe=Q.getFinalSpeed(e,t,r,r.attackerSide),a.stats.spe=Q.getFinalSpeed(e,a,r,r.defenderSide);var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category&&!i.named("Nature Power"))return o;if(r.defenderSide.isProtected)return s.isProtected=!0,o;i.named("Weather Ball")&&(i.type=r.hasWeather("Sun")?"Fire":r.hasWeather("Rain")?"Water":r.hasWeather("Sand")?"Rock":r.hasWeather("Hail")?"Ice":"Normal",i.category="Rock"===i.type?"Physical":"Special",s.weather=r.weather,s.moveType=i.type,s.moveBP=i.bp);var n=Q.getMoveEffectiveness(e,i,a.types[0],r.defenderSide.isForesight)*(a.types[1]?Q.getMoveEffectiveness(e,i,a.types[1],r.defenderSide.isForesight):1);if(0===n)return o;if(a.hasAbility("Flash Fire")&&i.hasType("Fire")||a.hasAbility("Levitate")&&i.hasType("Ground")||a.hasAbility("Volt Absorb")&&i.hasType("Electric")||a.hasAbility("Water Absorb")&&i.hasType("Water")||a.hasAbility("Wonder Guard")&&!i.hasType("???")&&n<=1||a.hasAbility("Soundproof")&&i.flags.sound)return s.defenderAbility=a.ability,o;s.HPEVs=a.evs.hp+" HP";var l,h=Q.handleFixedDamageMoves(t,i);if(h)return o.damage=h,o;switch(i.hits>1&&(s.hits=i.hits),i.name){case"Flail":case"Reversal":var c=Math.floor(48*t.curHP()/t.maxHP());l=c<=1?200:c<=4?150:c<=9?100:c<=16?80:c<=32?40:20,s.moveBP=l;break;case"Eruption":case"Water Spout":l=Math.max(1,Math.floor(150*t.curHP()/t.maxHP())),s.moveBP=l;break;case"Low Kick":var d=a.weightkg;l=d>=200?120:d>=100?100:d>=50?80:d>=25?60:d>=10?40:20,s.moveBP=l;break;default:l=i.bp}if(0===l)return o;var u="Physical"===i.category,y=u?"atk":"spa";s.attackEVs=Q.getEVDescriptionText(e,t,y,t.nature);var m=u?"def":"spd";s.defenseEVs=Q.getEVDescriptionText(e,a,m,a.nature);var p=t.rawStats[y],f=a.rawStats[m];u&&t.hasAbility("Huge Power","Pure Power")&&(p*=2,s.attackerAbility=t.ability),!t.hasItem("Sea Incense")&&i.hasType(ne.getItemBoostType(t.item))?(p=Math.floor(1.1*p),s.attackerItem=t.item):t.hasItem("Sea Incense")&&i.hasType("Water")?(p=Math.floor(1.05*p),s.attackerItem=t.item):u&&t.hasItem("Choice Band")||!u&&t.hasItem("Soul Dew")&&t.named("Latios","Latias")?(p=Math.floor(1.5*p),s.attackerItem=t.item):(!u&&t.hasItem("Deep Sea Tooth")&&t.named("Clamperl")||!u&&t.hasItem("Light Ball")&&t.named("Pikachu")||u&&t.hasItem("Thick Club")&&t.named("Cubone","Marowak"))&&(p*=2,s.attackerItem=t.item),!u&&a.hasItem("Soul Dew")&&a.named("Latios","Latias")?(f=Math.floor(1.5*f),s.defenderItem=a.item):(!u&&a.hasItem("Deep Sea Scale")&&a.named("Clamperl")||u&&a.hasItem("Metal Powder")&&a.named("Ditto"))&&(f*=2,s.defenderItem=a.item),a.hasAbility("Thick Fat")&&i.hasType("Fire","Ice")?(p=Math.floor(p/2),s.defenderAbility=a.ability):u&&a.hasAbility("Marvel Scale")&&a.status&&(f=Math.floor(1.5*f),s.defenderAbility=a.ability),u&&(t.hasAbility("Hustle")||t.hasAbility("Guts")&&t.status)||!u&&t.abilityOn&&t.hasAbility("Plus","Minus")?(p=Math.floor(1.5*p),s.attackerAbility=t.ability):t.curHP()<=t.maxHP()/3&&(t.hasAbility("Overgrow")&&i.hasType("Grass")||t.hasAbility("Blaze")&&i.hasType("Fire")||t.hasAbility("Torrent")&&i.hasType("Water")||t.hasAbility("Swarm")&&i.hasType("Bug"))&&(l=Math.floor(1.5*l),s.attackerAbility=t.ability),i.named("Explosion","Self-Destruct")&&(f=Math.floor(f/2));var b=i.isCrit&&!a.hasAbility("Battle Armor","Shell Armor"),g=t.boosts[y],S=a.boosts[m];(g>0||!b&&g<0)&&(p=Q.getModifiedStat(p,g),s.attackBoost=g),(S<0||!b&&S>0)&&(f=Q.getModifiedStat(f,S),s.defenseBoost=S);var v=t.level,k=Math.floor(Math.floor(Math.floor(2*v/5+2)*p*l/f)/50);if(t.hasStatus("brn")&&u&&!t.hasAbility("Guts")&&(k=Math.floor(k/2),s.isBurned=!0),!b){var A="Singles"!==r.gameType?2/3:.5;u&&r.defenderSide.isReflect?(k=Math.floor(k*A),s.isReflect=!0):!u&&r.defenderSide.isLightScreen&&(k=Math.floor(k*A),s.isLightScreen=!0)}i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(k=Math.floor(2*k),s.isSwitching="out"),"Singles"!==r.gameType&&"allAdjacentFoes"===i.target&&(k=Math.floor(k/2)),r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(k=Math.floor(1.5*k),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&i.hasType("Fire")||i.named("Solar Beam")&&r.hasWeather("Rain","Sand","Hail"))&&(k=Math.floor(k/2),s.weather=r.weather),t.hasAbility("Flash Fire")&&t.abilityOn&&i.hasType("Fire")&&(k=Math.floor(1.5*k),s.attackerAbility="Flash Fire"),k=("Physical"===i.category?Math.max(1,k):k)+2,b&&(k*=2,s.isCritical=!0),i.named("Weather Ball")&&r.weather&&(k*=2,s.moveBP=2*l),r.attackerSide.isHelpingHand&&(k=Math.floor(1.5*k),s.isHelpingHand=!0),i.hasType.apply(i,N(t.types))&&(k=Math.floor(1.5*k)),k=Math.floor(k*n),o.damage=[];for(var P=85;P<=100;P++)o.damage[P-85]=Math.max(1,Math.floor(k*P/100));return o},e.calculateRBYGSC=function(e,t,a,i,r){Q.computeFinalStats(e,t,a,r,"atk","def","spa","spd","spe");var s={attackerName:t.name,moveName:i.name,defenderName:a.name},o=new J.Result(e,t,a,i,r,0,s);if("Status"===i.category)return o;if(r.defenderSide.isProtected)return s.isProtected=!0,o;if(1===e.num&&(n=Q.handleFixedDamageMoves(t,i)))return o.damage=n,o;var n,l=Q.getMoveEffectiveness(e,i,a.types[0],r.defenderSide.isForesight)*(a.types[1]?Q.getMoveEffectiveness(e,i,a.types[1],r.defenderSide.isForesight):1);if(0===l)return o;if(2===e.num&&(n=Q.handleFixedDamageMoves(t,i)))return o.damage=n,o;if(i.hits>1&&(s.hits=i.hits),i.named("Flail","Reversal")){i.isCrit=!1;var h=Math.floor(48*t.curHP()/t.maxHP());i.bp=h<=1?200:h<=4?150:h<=9?100:h<=16?80:h<=32?40:20,s.moveBP=i.bp}else i.named("Present")&&!i.bp&&(i.bp=40);if(0===i.bp)return o;var c="Physical"===i.category,d=c?"atk":"spa",u=c?"def":"spd",y=t.stats[d],m=a.stats[u],p=i.isCrit&&(1===e.num||2===e.num&&t.boosts[d]<=a.boosts[u]),f=t.level;if(p?(y=t.rawStats[d],m=a.rawStats[u],1===e.num&&(f*=2,s.isCritical=!0)):(0!==t.boosts[d]&&(s.attackBoost=t.boosts[d]),0!==a.boosts[u]&&(s.defenseBoost=a.boosts[u]),c&&t.hasStatus("brn")&&(y=Math.floor(y/2),s.isBurned=!0)),i.named("Explosion","Self-Destruct")&&(m=Math.floor(m/2)),p||(c&&r.defenderSide.isReflect?(m*=2,s.isReflect=!0):!c&&r.defenderSide.isLightScreen&&(m*=2,s.isLightScreen=!0)),(t.named("Pikachu")&&t.hasItem("Light Ball")&&!c||t.named("Cubone","Marowak")&&t.hasItem("Thick Club")&&c)&&(y*=2,s.attackerItem=t.item),(y>255||m>255)&&(y=Math.floor(y/4)%256,m=Math.floor(m/4)%256),i.named("Present")){var b={Normal:0,Fighting:1,Flying:2,Poison:3,Ground:4,Rock:5,Bug:7,Ghost:8,Steel:9,"???":19,Fire:20,Water:21,Grass:22,Electric:23,Psychic:24,Ice:25,Dragon:26,Dark:27};y=10,m=Math.max(b[t.types[1]?t.types[1]:t.types[0]],1),f=Math.max(b[a.types[1]?a.types[1]:a.types[0]],1)}a.named("Ditto")&&a.hasItem("Metal Powder")&&(m=Math.floor(1.5*m),s.defenderItem=a.item);var g=Math.floor(Math.floor(Math.floor(2*f/5+2)*Math.max(1,y)*i.bp/Math.max(1,m))/50);2===e.num&&i.isCrit&&(g*=2,s.isCritical=!0),i.named("Pursuit")&&"out"===r.defenderSide.isSwitching&&(g=Math.floor(2*g),s.isSwitching="out");var S=t.hasItem("Dragon Fang")?void 0:ne.getItemBoostType(t.hasItem("Dragon Scale")?"Dragon Fang":t.item);if(i.hasType(S)&&(g=Math.floor(1.1*g),s.attackerItem=t.item),g=Math.min(997,g)+2,r.hasWeather("Sun")&&i.hasType("Fire")||r.hasWeather("Rain")&&i.hasType("Water")?(g=Math.floor(1.5*g),s.weather=r.weather):(r.hasWeather("Sun")&&i.hasType("Water")||r.hasWeather("Rain")&&(i.hasType("Fire")||i.named("Solar Beam")))&&(g=Math.floor(g/2),s.weather=r.weather),i.hasType.apply(i,N(t.types))&&(g=Math.floor(1.5*g)),g=Math.floor(g*l),i.named("Flail","Reversal"))return o.damage=g,o;o.damage=[];for(var v=217;v<=255;v++)o.damage[v-217]=Math.floor(g*v/255);return o};var he=e,ce=e,de=e,ue=e,ye=e,me=e,pe=[function(){},ce.calculateRBYGSC,ce.calculateRBYGSC,de.calculateADV,ue.calculateDPP,ye.calculateBWXY,ye.calculateBWXY,me.calculateSMSS,me.calculateSMSS];e.calculate=function(e,t,a,i,r){return pe[e.num](e,t.clone(),a.clone(),i.clone(),r?r.clone():new he.Field)},window.calc=Object.assign(window.calc||{},{Field:e.Field,Side:e.Side,Pokemon:e.Pokemon,Move:e.Move,calculate:e.calculate,Result:e.Result,toID:e.toID,STATS:e.STATS,Stats:e.Stats})}();
\ No newline at end of file
